(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[35227],{

/***/ 61128:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(813110);__web_req__(6534);__web_req__(175970);self._5880d4398c473aa67256e87589eaef11 = self._5880d4398c473aa67256e87589eaef11 || {};(function(__c) {var Js;var Cs;var qr;var or;var pr;var gs;var Oq;var Rq;var zs;var Jq;var Uq;var hr;var Hq;var Fq;var Sq;var iq;var Yq;var Xq;var ts;var ss;var Vq;var Tq;var os;var ea=__c.ea;var Pq;var Dq;var Wr;var as;var $r;var bs;var Yr;var Zr;var cs;var Gq;var Kq;var Ur;var Xr;var Pr;var N=__c.N;var Vr;var Tr;var Rr;var Jr;var Vh=__c.Vh;var Br;var Ar;var zr;var yr;var xr;var vr;var sa=__c.sa;var br;var ar;var Zq;var Cq;var Bq;var Mq;var Nq;var Lq;var Eq;var oa=__c.oa;var m=__c.m;var r=__c.r;var na=__c.na;
var jq,blb,kq,lq,mq,elb,glb,nq,oq,jlb,hlb,ilb,llb,pq,plb,qlb,rlb,slb,tlb,ulb,vlb,wlb,vq,wq,xq,xlb,ylb,yq,Blb,Aq,Flb,Hlb,Ilb,Glb,Klb,Llb,Mlb,Nlb,Olb,Plb,$lb,emb,imb,jmb,kmb,omb,pmb,qmb,rmb,smb,vmb,wmb,ymb,zmb,Bmb,Dmb,Emb,Fmb,Hmb,Jmb,Kmb,Nmb,Omb,er,Pmb,Qmb,Rmb,gr,Tmb,Umb,Vmb,Xmb,Ymb,Zmb,$mb,bnb,cnb,rr,nnb,sr,tr,pnb,qnb,ur,tnb,vnb,unb,wnb,xnb,znb,Bnb,snb,Dnb,Cnb,Enb,Gnb,Hnb,Cr,Inb,Lnb,Jnb,Knb,Er,Onb,Qnb,Nnb,Pnb,Rnb,Snb,Mnb,Tnb,Unb,Gr,Wnb,Xnb,Ynb,Hr,Znb,$nb,aob,bob,fob,Mr,Lr,gob,Nr,hob,iob,job,kob,lob,
Or,mob,oob,Qr,pob;iq=__c.iq=function(a,b){na(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};jq=function(...a){return RegExp(a.map(b=>b.source).join("|"))};
blb=function(a,b){na(0<b.length);switch(b.length){case 1:return b[0];case 2:return a.compose(b[0],b[1]);case 3:return a.compose(a.compose(b[0],b[1]),b[2]);case 4:return a.compose(a.compose(b[0],b[1]),a.compose(b[2],b[3]));default:const c=b.slice();for(b=b.length;1<b;){let d=0;for(let e=0;e<b;e+=2)c[d++]=e+1<b?a.compose(c[e],c[e+1]):c[e];b=d}return c[0]}};kq=function(a,b,c){na(a.Th(b,c),"{} != {}",b,c)};lq=function(a,b){return{Sj:a,qs:b}};mq=function(a){return 1===a?clb:{type:0,length:a}};
elb=function(a){return 1===a?dlb:{type:1,length:a}};glb=function(a){return 1===a?flb:{type:2,length:a}};nq=function(a,b){return{type:3,state:a,shift:b}};oq=function(a,b){return{type:4,delta:a,shift:b}};jlb=function(a){switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;case 2:return`T(${a.length})`;case 3:return`I(${hlb(a.state)})${ilb(a.shift)}`;case 4:return`U(${hlb(a.delta)})${ilb(a.shift)}`;default:throw new r(a);}};hlb=function(a){return null!=a?a:"\u22a5"};
ilb=function(a){return null!=a?`[${a.Sj},${a.qs}]`:""};llb=function(a,b){return b&&a.iKa?new klb(a.ops.map(c=>3===c.type&&c.shift?nq(c.state,lq(c.shift.Sj+b,c.shift.qs+b)):4===c.type&&c.shift?oq(c.delta,lq(c.shift.Sj+b,c.shift.qs+b)):c),a.pre,a.post,a.iKa):a};pq=function(a,b){const c=m(a.Hl);if(0===c.type)return a.WB(0,1),mlb;if(1===c.type)return a.WB(1,1),nlb;if(2===c.type)return a.WB(2,1),olb;if(c.type!==b)throw Error();a.Hl=a.ops[a.i++];return c};plb=function(a){return a.every(()=>!1)};
qlb=function(a,b){na(0<b.length);const c=a.length;b.forEach((d,e)=>a.list[c+e]=d);a.length+=b.length};rlb=function(a){na(a.Pua<a.input.length,"{} >= {}",a.Pua,a.input.length);return a.input[a.Pua++]};slb=function(a,b){b=a.Pua+b;na(b<=a.input.length);const c=a.input.slice(a.Pua,b);a.Pua=b;return c};tlb=function(a,b){a.Odb||(a.Odb=new Set);na(!a.Odb.has(b),"duplicate modification: {}",b);a.Odb.add(b)};ulb=function(a,b,c){tlb(a,b);(a.lqc||(a.lqc=new Map)).set(b,c)};
vlb=function(a,b,c){tlb(a,b);(a.kqc||(a.kqc=new Map)).set(b,c)};wlb=function(a,b){let {Sj:c,qs:d}=b;var e=a.lqc;a=a.kqc;if(e){const f=e.get(c);null!=f&&(c=f,e.delete(c))}a&&(e=a.get(d),null!=e&&(d=e,a.delete(d)));return c!==b.Sj||d!==b.qs?lq(c,d):b};vq=function(a,b,c){tlb(a,b);null!=c&&(a.J0a||(a.J0a=new Map)).set(b,c)};wq=function(a,b,c){(a.ELa||(a.ELa=new Map)).set(b,c)};xq=function(a,b,c){(a.XKa||(a.XKa=new Map)).set(c,b)};xlb=function({Sj:a,qs:b}){return lq(b,a)};
ylb=function(a,b){return a?!!b&&a.Sj===b.Sj&&a.qs===b.qs:!b};__c.zlb=function(a){return a.filter(()=>!0)};yq=function(a,b){na(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const d in a)c[d]=b(a[d],d);return c};Blb=function(a,b){return a===zq?b:b===zq?a:new Alb(a,b)};Aq=function(a,b){return b===zq?zq:new a(b)};Flb=function(a){a:{a={items:Aq(Clb,a),uj:zq};for(b in a)if(a[b]!==zq){var b=new Dlb(a);break a}b=zq}return Blb(Elb,b)};
Hlb=function(a,b){oa(null!=a.xJ,"mutable not connected");try{a.cY(b),a.domain.isIdentity(b)||a.LVb&&a.LVb.reportChanged()}catch(c){throw a.error(c),c;}Glb(a,b)};Ilb=function(a,b){if(a.clients){for(const c of a.clients.keys())try{c.error(b)}catch(d){}a.clients=void 0}};Glb=function(a,b){oa(null!=a.xJ);if(a.clients){var c=!1;for(const d of a.clients.keys())try{d.next(b)}catch(e){try{d.error(`could not publish to incoming: ${e}`)}catch(f){}a.clients.delete(d);c=!0}c&&!a.clients.size&&(a.clients=void 0)}};
Bq=__c.Bq=function(a,b){a.h9b||(a.h9b={next:c=>{a.xJ&&(a.LVb&&a.LVb.reportChanged(),Glb(a,c),a.xJ.next(c))},error:c=>{a.error(c)}});return new Jlb(a.h9b,b)};Cq=__c.Cq=function(a,b,c){b=a.My(b);a=a.connect(b,c);return{mutable:b,Uw:a}};Dq=__c.Dq=function(a,b,c,d){a.destroy(d,b);c.complete()};Klb=function(a,b){let c=a.rows[b];null==c&&(c=a.rows[b]=a.Z9c++);return c};Llb=function(a,b){let c=a.cols[b];null==c&&(c=a.cols[b]=a.X9c++);return c};
Mlb=function(a,b,c,d=()=>!0){a.cols.spliceWithArray(b,0,Array(c));for(let e=0;e<a.rows.length;e++){const f=a.get(e,b-1);if(null!=f&&d(f))for(let g=b;g<b+c;g++)a.set(e,g,f)}};Nlb=function(a,b,c,d=()=>!0){a.rows.spliceWithArray(b,0,Array(c));for(let e=0;e<a.cols.length;e++){const f=a.get(b-1,e);if(null!=f&&d(f))for(let g=b;g<b+c;g++)a.set(g,e,f)}};Olb=function(a,b){na(a.oN(b),"invalid value: {}",b);return b};
Plb=function(a,b,c){if(!a.Cv(b,c))throw Error(`Invalid argument: ${a.stringify(b)} != ${a.stringify(c)}`);};Eq=__c.Eq=function(a){return new Qlb(a)};Fq=__c.Fq=function(...a){return 1===a.length?new Rlb(a[0]):new Slb(new Set(a))};Gq=__c.Gq=function(a,b){return new Tlb(a,b,Aq(Clb,a.serializer))};__c.Wlb=function(a,b){return new Ulb(a,b,Aq(Vlb,b.serializer))};Hq=__c.Hq=function(a,b){return new Xlb(a,b)};__c.Iq=function(a,b){return new Ylb(a,b)};Jq=__c.Jq=function(a){return new Zlb(a)};
$lb=function(a,b){na(Number.isSafeInteger(a)&&Number.isSafeInteger(b)&&a<=b);return Eq(c=>Number.isSafeInteger(c)&&a<=c&&c<=b)};Kq=__c.Kq=function(a,b){na(Number.isFinite(a)&&Number.isFinite(b)&&a<=b);return Eq(c=>Number.isFinite(c)&&a<=c&&c<=b)};Mq=__c.Mq=function(a){return a instanceof Lq?new amb(a,Aq(bmb,a.serializer)):new cmb(a,Aq(bmb,a.b3b),Aq(bmb,a.Wpa))};emb=function(a){return new dmb(a)};Nq=__c.Nq=function(a){return new fmb(a,a.serializer)};Oq=__c.Oq=function(a){return new gmb(a,a.Wpa)};
Pq=__c.Pq=function(a){return Nq(Mq(a))};imb=function(a,b,c){return null==c||a.component.isIdentity(c)?hmb:new Map([[b,c]])};jmb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};kmb=function(a,b,c){const d=Bq(a,g=>a.domain.update(b,g)),{mutable:e,Uw:f}=Cq(a.type,c,d);return{yPc:{to:f,from:d},value:e}};__c.Qq=function(...a){[,a]=1===a.length?[void 0,a[0]]:a;return new lmb(a,Aq(Vlb,a.Wpa))};Rq=__c.Rq=function(a){return new mmb(a,a.serializer)};
omb=function(a,b,c){return nmb.of({...a,...b,...c})};pmb=function(...a){const b=new Set;for(const c of a)for(const d in c)na(!b.has(d),'duplicate key: "{}"',d),b.add(d)};qmb=function(a,b){return Bq(a,c=>({[b]:c}))};rmb=function(a,b){return Bq(a,c=>({[b]:c}))};
smb=function(a,b){if(!a)return b;if(!b)return a;const c=a.create,d=b.create;return{Xb:{...a.Xb,...b.Xb},attributes:{...a.attributes,...b.attributes},create:e=>{const {Xb:f,attributes:g}=c(e),{Xb:h,attributes:k}=d({...e,...f,...g});return{Xb:{...f,...h},attributes:{...g,...k}}}}};Sq=__c.Sq=function(a){return tmb.Di(a)};Tq=__c.Tq=function(a){return a.domain.wg()};Uq=__c.Uq=function(a){return new __c.umb(a,Flb(a.Wpa))};Vq=__c.Vq=function(){throw Error("list not modifiable");};
__c.Wq=function(a,b){return a?b?(...c)=>{a(...c);b(...c)}:a:b};vmb=function(a,b){a=a.length;na(0<=b&&b<a,"{} \u2209 [0, {})",b,a)};wmb=function(a,b){a=a.length;na(0<b&&b<a,"{} \u2209 (0, {})",b,a)};__c.xmb=function(a,b){return a?b?{cb:__c.Wq(a.cb,b.cb),item:__c.Wq(a.item,b.item),uj:__c.Wq(a.uj,b.uj)}:a:b};ymb=function(a,b){a=a.o$;na(0<b&&b<a,"{} \u2209 (0, {})",0,a)};zmb=function(a,b){a=a.w_;na(0<b&&b<a,"{} \u2209 (0, {})",0,a)};
Xq=__c.Xq=function(a,b,c){switch(b.type){case 0:case 1:switch(c.type){case 0:case 1:return a.change(b.state,c.state);case 2:return a.UV(b.state);default:throw new r(c);}case 2:switch(c.type){case 0:case 1:return a.D0a(c.state);case 2:return a.gpa(b.state);default:throw new r(c);}default:throw new r(b);}};Yq=__c.Yq=function(a){const b=m(a.Hl);a.Hl=a.ops[a.i++];return b};__c.Amb=function(a,b){const c=m(a.Hl),d=c.o$;na(0<b&&b<=d);if(b<d){const [e,f]=c.FMb(b);a.Hl=f;return e}a.Hl=a.ops[a.i++];return c};
Bmb=function(a,b){const c=m(a.Hl),d=c.w_;na(0<b&&b<=d);if(b<d){const [e,f]=c.EMb(b);a.Hl=f;return e}a.Hl=a.ops[a.i++];return c};Dmb=function(a,b,c){switch(c.type){case 0:return b;case 1:return na(1===b.type),new Zq(a.component.apply(b.state,c.delta));case 3:return __c.Cmb(a,b,c.oldState),c.newState;default:throw new r(c);}};
Emb=function(a,b,c){switch(c.type){case 0:return b;case 1:return na(1===b.type),new Zq(a.component.Yk(b.state,c.delta));case 3:return __c.Cmb(a,b,c.newState),c.oldState;default:throw new r(c);}};Fmb=function(a,b,c){switch(b.type){case 0:return 0===c.type&&b.state===c.state;case 1:return 1===c.type&&a.component.Th(b.state,c.state);case 2:return 2===c.type&&b.state===c.state;default:throw new r(b);}};__c.Cmb=function(a,b,c){na(Fmb(a,b,c),"{} != {}",b,c)};
__c.Gmb=function(a,b){const c=__c.$q.wg(),d=a.cursor(0,{...ar,uj:g=>c.retain(g)}),e={...ar,cb:g=>c.retain(g.length)},f={...ar,cb:g=>c.UV(g)};b.forEach({retain:g=>d.cn(g,e),delete:g=>d.cn(g,f),insert:g=>c.insert(g)});return c.build()};
Hmb=function(a,b){const c=new br,d=a.cursor();a=h=>{throw Error(String(h));};const e={...ar,cb:h=>c.retain(h.length)},f={...ar,cb:a},g={...ar,cb:()=>0,uj:a};b.forEach({retain:h=>d.bQ(h,e),update:h=>{throw new r(h);},insert:h=>2!==h.type&&c.insert(h.state),change:(h,k)=>{2===h.type?(d.bQ(h.length,f),2!==k.type&&c.insert(k.state)):(d.bQ(h.length,g),2===k.type?c.delete(h.length):(na(h.state===k.state,"non-reflexive change: {} != {}",h,k),c.retain(h.length)))}});return c.build()};__c.cr=function(a){return Object.keys(a)};
__c.dr=function(a,b,c){for(const [d,e]of Object.entries(a))c(d,e,b[d])};__c.Imb=function(a,b){return a.length?b.length?[...(new Set([...a,...b]))]:a:b};Jmb=function(a,b){return{type:0,uE:a,RF:b}};Kmb=function(a){return{type:1,length:a}};__c.Lmb=function(a,b){return a&&b?a.so===b.so&&a.sn===b.sn:!a&&!b};__c.Mmb=function(a,b){Object.entries(a).forEach(([c,d])=>null!=d&&b(d,c))};
Nmb=function(a,b){const c=__c.cr(a),d=__c.cr(b);if(a===b||!c.length&&!d.length)return!0;if(c.length!==d.length)return!1;const e=__c.Imb(c,d);return c.length===e.length&&d.length===e.length&&e.every(f=>__c.Lmb(a[f].r,b[f].r))};Omb=function(a,b={}){return{type:0,length:a,changes:b}};er=function(a,b){return a?!!b&&a.from===b.from&&a.to===b.to:!b};
Pmb=function(a,b){let c=0,d=0;for(const e of a.Lca)switch(a=e.length,e.type){case 0:b.retain&&b.retain(a,c,d);c+=a;d+=a;break;case 1:b.insert&&b.insert(a,c,d);d+=a;break;default:throw new r(e.type);}};Qmb=function(a,b,c){let {from:d,to:e}=a;d+=d>b?c:0;e+=e>b?c:0;return a.from!==d||a.to!==e?new fr(d,e):a};Rmb=function(a,b,c){for(const [d,e]of a){const f=Qmb(e,b,c);f!==e&&a.set(d,f)}};
gr=function(a,b,c,d){for(const [e,f]of a){const g=f.p$,h=f.k$,k=g&&(null!=b?Qmb(g,b,d):g),l=h&&(null!=c?Qmb(h,c,d):h);k===g&&l===h||a.set(e,new Smb(k,l))}};Tmb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};Umb=function(a,b){sa(a,b);return a};Vmb=function(a,b){return{key:a.fRa(b),value:b}};hr=__c.hr=function(a,b,c){return new Wmb(a,b,c)};Xmb=function(a,b){return a===b||a.size===b.size&&Array.from(a.keys()).every(c=>a.get(c)===b.get(c))};
Ymb=function(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const [e,f]of a){var d=b.get(e)||0;(d=f+d)&&c.set(e,d)}for(const [e,f]of b)a.has(e)||c.set(e,f);return c};Zmb=function(a,b){const c=new Map;for(const [d,e]of a)b(e)&&c.set(d,e);return c};$mb=function(a){return new RegExp(a+"B[0-9b-df-hj-np-tv-zB-DF-HJ-NP-TV-Z]{14}")};__c.anb=function(a){sa(a.normalize(a.defaultValue),a.defaultValue)};__c.ir=function(a,b){return null!=b?a.decode(b):void 0};
__c.jr=function(a,b){return null!=b?a.encode(b):void 0};bnb=function(a){a=a.split("/");return 2===a.length?a[0]:void 0};cnb=function(a){if(a.startsWith(`${__c.kr}/`)){const [,b,c]=a.split("/");return[b,c]}};__c.dnb=function(a,b){if(b=cnb(b)){const [c,d]=b;if(a.J4c(c))return[c,d]}};__c.lr=function(a,b,c,d){c=a.Nma(c);for(const e of Object.keys(b))a.pC(e)&&c(e)&&d(b[e],e)};__c.mr=function(a,b,c){const d={};a.copy(b,c,d);return d};
__c.enb=function(a,b,c){return a.attributes[c].I4c?b[c]:b[c]!==a.attributes[c].defaultValue?b[c]:void 0};__c.fnb=function(a,b,c){const d={};__c.lr(a,b,"all",(e,f)=>d[f]=c(e,f));return d};__c.nr=function(a,b){const c={};for(const [d,e]of Object.entries(b))try{na(a.pC(d)),c[d]=null!=e?a.attributes[d].normalize(e):void 0}catch(f){throw f;}return c};__c.hnb=function(a){return new gnb("block",a)};or=__c.or=function(a,b){return new inb(a,b)};pr=__c.pr=function(a,b,c){return new jnb(a,b,c)};
qr=__c.qr=function(a,b){return new knb(a,b,b[0])};__c.mnb=function(a){const b=(d,e)=>{if("string"===typeof e)return d[e]?d[e]:(d=bnb(e))&&a.pRa[d]?a.pRa[d]:(e=cnb(e))&&a.ju[e[0]]},c=new Proxy(a.static,{get:b,has:(d,e)=>null!=b(d,e),ownKeys:d=>Object.keys(d)});return new __c.lnb(c,new Set(Object.keys(a.static)),new Set(Object.keys(a.pRa)),new Set(Object.keys(a.ju)))};rr=function(a){return{type:0,length:a}};nnb=function(a){return{type:1,length:a}};sr=function(a,b){return a.WB(1,b).length};
tr=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return onb;na(0<=c[0]);b=new Map;a=a.cd(c[c.length-1],0);let d=0,e=0;for(const f of c){for(c=a.head;d<f;){oa(null!=c);switch(c.type){case 0:c=a.Jy(Math.min(f-d,c.length));d+=c;e+=c;break;case 1:e+=sr(a,c.length);break;default:throw new r(c);}c=a.head}c&&1===c.type&&(e+=sr(a,c.length));if(d!==f)throw Error();b.set(d,e)}return b};
pnb=function(a,b){var c=Array.from(b).sort((f,g)=>f-g);if(!c.length)return onb;na(0<=c[0]);b=new Map;a=a.cd(0,c[c.length-1]);let d=0,e=0;for(const f of c){for(c=a.head;e<f;){oa(null!=c);switch(c.type){case 0:c=a.Jy(Math.min(f-e,c.length));d+=c;e+=c;break;case 1:e+=sr(a,Math.min(f-e,c.length));break;default:throw new r(c);}c=a.head}if(e!==f)throw Error();b.set(e,d)}return b};qnb=function(a){return JSON.stringify(a,(b,c)=>null!=c?c:null)};ur=function(a){return new rnb(a.eqd)};
tnb=function(a,b,c,d){var e=Math.max(a.Fp,b.Fp),f=Math.max(a.xz,b.xz);a=a.cd(void 0,e,f);b=b.cd(void 0,e,f);e=a.head;for(f=b.head;e||f;){if(e&&0===e.type||f&&0===f.type){f=a.aw();const k=b.aw(),l=c.aw();e=d;for(var g=f.head,h=k.head;g||h;){if(g&&0===g.type||h&&0===h.type){g=f.Dt();h=k.Dt();for(const n of snb(g,h))l.Il(n,e(n,f.attrs[n],k.attrs[n]))}else if(g&&h)g=Math.min(g.length,h.length),f.Tm(g),k.Tm(g),l.RB(g);else throw Error(`length mismatch: ${g} x ${h}`);g=f.head;h=k.head}f.finish();k.finish();
l.finish()}else if(e&&f)e=Math.min(e.length,f.length),vr(a,e),vr(b,e),c.rows(e);else throw Error(`length mismatch: ${e} x ${f}`);e=a.head;f=b.head}a.finish();b.finish()};vnb=function(a,b,c,d){return wr.isIdentity(c)&&wr.isIdentity(d)||b.items.isEmpty()?b:unb("apply",a.eqd,b,c,d)};
unb=function(a,b,c,d,e){const f=new xr,[g,h]="apply"===a?[c.items.cd(e.pre),e.cd(c.items.length,0)]:[c.items.cd(e.post),e.cd(0,c.items.length)];e=g.head;var k=h.head;for(c=0;e||k;){if(k&&1===k.type)sr(h,k.length),"apply"===a?f.uc(k.length):g.Tm(k.length);else if(e&&0===e.type){e=g.Dt();const [n,p]="apply"===a?[e.cd(d.pre),d.cd(e.length,0)]:[e.cd(d.post),d.cd(0,e.length)];e=a;k=new xr;var l=n.head;let q=p.head;for(;l||q;){if(q&&1===q.type)sr(p,q.length),"apply"===e?k.uc(q.length):n.Tm(q.length);else if(l)0===
l.type?k.grad(n.Dt()):q?(l=Math.min(l.length,q.length),n.Tm(l),p.Jy(l),k.uc(l)):(n.Tm(l.length),k.uc(l.length));else throw Error(`length mismatch: ${l} vs ${q}`);l=n.head;q=p.head}e=k.build();e.isEmpty()||(f.grad(e),c=Math.max(c,e.length));n.finish();p.finish()}else if(e&&k)e=Math.min(k.length,e.length),g.Tm(e),h.Jy(e),f.uc(e);else throw Error("length mismatch");e=g.head;k=h.head}g.finish();h.finish();a=f.build();return yr.of(b,a,c,a.length)};wnb=function(a){return{type:1,length:a}};
vr=__c.vr=function(a,b){oa(null==a.NU);return a.oRa.Tm(b)};xnb=function(a,b,c,d){return c===d?!0:c&&d?a(b,c.Zb,d.Zb)&&a(b,c.r,d.r):!1};__c.ynb=function(a,b,c,d){if(!d)return c;na(a(b,c,d.Zb),"{} != {}",c,d.Zb);return d.r};znb=function(a,b,c,d){return xnb(a,b,c,d)?void 0:{t:c,b:d}};
__c.Anb=function(a,b,c){const d={};if(b&&c)for(const f of snb(b,c)){var e=znb(a,f,b[f],c[f]);e&&(d[f]=e)}else if(b)for(e of zr(b))(c=znb(a,e,b[e]))&&(d[e]=c);else if(c)for(const f of zr(c))(b=znb(a,f,void 0,c[f]))&&(d[f]=b);return Ar(d)?void 0:d};Bnb=function(a,b,c){return snb(b,c).every(d=>{var e=b&&b[d],f=c&&c[d];return e===f?!0:e&&f?xnb(a,d,e.t,f.t)&&xnb(a,d,e.b,f.b):!1})};zr=__c.zr=function(a){return Object.keys(a)};
snb=function(a,b){return a&&b?[...(new Set([...zr(a),...zr(b)]))]:a?zr(a):b?zr(b):[]};Ar=__c.Ar=function(a){return 0===zr(a).length};Dnb=function(a,b){b.forEach(a.fh.pC,(c,d,e)=>{const f=a.grid.get(c,d),g=f?{...f}:{};Cnb(e,(h,k)=>{null!=h&&(oa(a.fh.Dza(k,f&&f[k],h.o)),g[k]=h.n)});a.write(c,d,g)})};Cnb=function(a,b){for(const c of Object.keys(a))b(a[c],c)};Enb=function(a,b){return a&&b?[...(new Set([...Object.keys(a),...Object.keys(b)]))]:a?Object.keys(a):b?Object.keys(b):[]};
Br=__c.Br=function(a,b,c,d){oa(0<=a);oa(0<=b);oa(a<=c);oa(b<=d);return{left:a,top:b,right:c,bottom:d}};__c.Fnb=function(a,b){return{span:a,state:b}};Gnb=function(a){const b=a.rows[a.y];if(null!=b)for(;null==b.cells[a.x]&&a.x<b.cells.length;)a.x++};Hnb=function(a){for(;null==a.rows[a.y]&&a.y<a.rows.length;)a.y++};Cr=function(a,b){return a.right===b.right&&a.bottom===b.bottom};
Inb=function(a,b,c,d){if(wr.isIdentity(c)&&wr.isIdentity(d))return b;const e=new Set,f=new Set;b.forEach((l,n,p)=>{e.add(l);f.add(n);switch(p.type){case 1:p.bounds&&e.add(p.bounds.o.right);p.bounds&&f.add(p.bounds.o.bottom);p.bounds&&e.add(p.bounds.n.right);p.bounds&&f.add(p.bounds.n.bottom);break;case 0:p.o&&e.add(p.o.right);p.o&&f.add(p.o.bottom);p.n&&e.add(p.n.right);p.n&&f.add(p.n.bottom);break;default:throw new r(p);}});const g=tr(c,e),h=tr(d,f),k=new Dr;b.forEach((l,n,p)=>{switch(p.type){case 1:k.add(m(g.get(l)),
m(h.get(n)),a.update(p.bounds&&{o:{right:m(g.get(p.bounds.o.right)),bottom:m(h.get(p.bounds.o.bottom))},n:{right:m(g.get(p.bounds.n.right)),bottom:m(h.get(p.bounds.n.bottom))}},p.delta));break;case 0:k.add(m(g.get(l)),m(h.get(n)),a.replace(p.o&&{right:m(g.get(p.o.right)),bottom:m(h.get(p.o.bottom)),state:p.o.state},p.n&&{right:m(g.get(p.n.right)),bottom:m(h.get(p.n.bottom)),state:p.n.state}));break;default:throw new r(p);}});return k.build()};
Lnb=function(a,b,c){const d=new Dr;Jnb(b.cd(),c.cd(),(e,f,g,h)=>{null==b&&null==c||d.add(e,f,Knb(a,g,h))});return d.build()};Jnb=function(a,b,c){var d=a.head;let e=b.head;for(;d||e;){d=null==d?1:null==e?-1:d===e||d.y===e.y&&d.x===e.x?0:d.y<e.y||d.y===e.y&&d.x<e.x?-1:1;if(0>d){const {x:f,y:g,value:h}=a.Iz();c(f,g,h,void 0)}else if(0<d){const {x:f,y:g,value:h}=b.Iz();c(f,g,void 0,h)}else{const {x:f,y:g,value:h}=a.Iz();({value:d}=b.Iz());c(f,g,h,d)}d=a.head;e=b.head}a.finish();b.finish()};
Knb=function(a,b,c){if(null==b)return c;if(null==c)return b;switch(b.type){case 0:a:switch(c.type){case 1:oa(null!=b.n);c.bounds&&oa(Cr(b.n,c.bounds.o));a=a.replace(b.o,{...(c.bounds?c.bounds.n:b.n),state:c.delta?a.component.apply(b.n.state,c.delta):b.n.state});break a;case 0:oa(Er(a,b.n,c.o));a=a.replace(b.o,c.n);break a;default:throw new r(c);}return a;case 1:a:switch(c.type){case 1:b.bounds&&c.bounds&&oa(Cr(b.bounds.n,c.bounds.o));const d=b.bounds&&c.bounds?{o:b.bounds.o,n:c.bounds.n}:b.bounds||
c.bounds;b=b.delta&&c.delta?a.component.compose(b.delta,c.delta):b.delta||c.delta;a=a.update(d,b);break a;case 0:oa(null!=c.o);b.bounds&&oa(Cr(b.bounds.n,c.o));a=a.replace({...(b.bounds?b.bounds.o:c.o),state:b.delta?a.component.Yk(c.o.state,b.delta):c.o.state},c.n);break a;default:throw new r(c);}return a;default:throw new r(b);}};Er=function(a,b,c){return b===c?!0:b&&c?Cr(b,c)&&a.component.Th(b.state,c.state):!1};
Onb=function(a,b,c,d,e,f){const g=0===d.type?d.n:d.bounds&&d.bounds.n,h=g?g.bottom:c;for(let n=Math.max(c,f.yi);n<=h;n++)Mnb(f,2*n),f.aw(),f.J0b((p,q)=>{e.append(Br(p,q,p,q))}),f.y9a();f.yi<=h&&Mnb(f,2*(h+1));if(null==g)return{o5a:b}=Nnb(e,{left:b,top:c,right:b,bottom:c}),b?a.replace(void 0,void 0):void 0;const {o5a:k,GJb:l}=Nnb(e,{left:b,top:c,right:g.right,bottom:g.bottom});if(k){if(l)return a.update({o:{right:g.right,bottom:g.bottom},n:l},void 0);oa(0===d.type);return a.replace(d.n,void 0)}};
Qnb=function(a,b){Pnb(a,b.left,b.top);a.append(b)};Nnb=function(a,b){Pnb(a,b.left,b.top);if(a.readBuffer(b.left,b.top))return{o5a:!0,GJb:void 0};let c=b.left,d=b.top;for(var e=b.left+1;e<=b.right;e++){if(a.readBuffer(e,b.top))return{o5a:!0,GJb:{right:c,bottom:d}};c=e}for(e=b.top+1;e<=b.bottom;e++){for(let f=b.left;f<=c;f++)if(a.readBuffer(f,e))return{o5a:!0,GJb:{right:c,bottom:d}};d=e}return{o5a:!1,GJb:void 0}};
Pnb=function(a,b,c){c>a.$qa&&(a.buffer.splice(0,c-a.$qa),a.$qa=c,a.tNa=0);b>a.tNa&&a.buffer[0]&&(a.buffer[0].splice(0,b-a.tNa),a.tNa=b)};Rnb=function(a,b,c){c-=a.$qa;a=0===c?b-a.tNa:b;oa(0<=c&&0<=a);return{yud:a,Cud:c}};Snb=function(a){const b=wr.wg();a=a.cd();let c=a.head;for(;c;){switch(c.type){case 0:b.retain(2*c.length);a.Jy(c.length);break;case 1:b.expand(2*c.length);sr(a,c.length);break;default:throw new r(c);}c=a.head}return b.build()};
Mnb=function(a,b){for(oa(b>=a.Qia);b>a.Qia;){var c=a.cd.head;oa(null!=c);0===c.type?(a.aw(),a.y9a()):(c=Math.min(c.length,b-a.Qia),vr(a.cd,c),a.Qia+=c)}};Tnb=function(a,b){const c=new Dr,d=new Set;for(let e=b.top;e<=b.bottom;e++)for(let f=b.left;f<=b.right;f++){const g=a.grid.get(e,f);null==g||d.has(g)||(d.add(g),c.add(g.span.left,g.span.top,a.domain.replace({right:g.span.right,bottom:g.span.bottom,state:a.type.kc(g.value)},void 0)))}return a.domain.$d({cells:c.build()})};
Unb=function(a,b){return c=>{const {left:d,top:e}=b.ncd.get();return a.domain.$d({cells:(new Dr).add(d,e,a.domain.update(void 0,c)).build()})}};Gr=function(a,b,c,d){a.Mj.set(b,new Fr(c,d));return a};Wnb=function(a,b,c,d){a.Mj.set(b,new Vnb(c,d));return a};Xnb=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()};
Ynb=function(a,b){if(wr.isIdentity(b))return a;const c=new Set;for(const e of a.values())switch(e.type){case 0:null!=e.oldValue&&c.add(e.oldValue);null!=e.newValue&&c.add(e.newValue);break;case 1:c.add(e.oldValue);c.add(e.newValue);break;default:throw new r(e);}const d=tr(b,c);return Vh(a,e=>{switch(e.type){case 0:return new Fr(null!=e.oldValue?m(d.get(e.oldValue)):void 0,null!=e.newValue?m(d.get(e.newValue)):void 0);case 1:return new Vnb(m(d.get(e.oldValue)),m(d.get(e.newValue)));default:throw new r(e);
}})};Hr=function(a){return{start:`${"a/"}${a}`,end:`${"b/"}${a}`}};Znb=function(a){oa(a.startsWith("a/")||a.startsWith("b/"));return a.substring(2)};$nb=function(a){const b=new Map;for(const [c,d]of a)a=Hr(c),b.set(a.start,d.start),b.set(a.end,d.end);return b};aob=function(a){const b=new Map;a=new Map(a);for(const c of a.keys()){const d=Znb(c),e=Hr(d),f=m(a.get(e.start)),g=m(a.get(e.end));a.delete(e.start);a.delete(e.end);b.set(d,Ir.from({start:f,end:g}))}if(a.size)throw Error();return b};
bob=function(a){const b=Jr.wg();for(const [d,e]of a.Ke)switch(e.type){case "replace":var c=Hr(d);Gr(b,c.start,e.oldValue?e.oldValue.start:void 0,e.newValue?e.newValue.start:void 0);Gr(b,c.end,e.oldValue?e.oldValue.end:void 0,e.newValue?e.newValue.end:void 0);break;case "update":c=Hr(d);e.start&&Wnb(b,c.start,e.start.oldValue,e.start.newValue);e.end&&Wnb(b,c.end,e.end.oldValue,e.end.newValue);break;default:throw new r(e);}return Jr.$d(a.axis,b.build().Mj)};
fob=function(a){const b=new Map,c=new Map(a.Mj);for(const [f,g]of c){const h=Znb(f),k=Hr(h);switch(g.type){case 0:var d=m(c.get(k.start)),e=m(c.get(k.end));oa(d.type===g.type);oa(e.type===g.type);oa(null!=d.oldValue===(null!=e.oldValue));oa(null!=d.newValue===(null!=e.newValue));c.delete(k.start);c.delete(k.end);b.set(h,new cob(null!=d.oldValue&&null!=e.oldValue?Ir.from([d.oldValue,e.oldValue]):void 0,null!=d.newValue&&null!=e.newValue?Ir.from([d.newValue,e.newValue]):void 0));break;case 1:d=c.get(k.start);
e=c.get(k.end);d&&oa(d.type===g.type);e&&oa(e.type===g.type);c.delete(k.start);c.delete(k.end);b.set(h,new dob(d?Kr.from(d):void 0,e?Kr.from(e):void 0));break;default:throw new r(g);}}if(c.size)throw Error();return eob.create(a.axis,b)};Mr=function(a,b,c){const {x:d,y:e,...f}=a;na(wr.Hj(d,Lr(b)));na(wr.Hj(e,Lr(c)));return f};
Lr=function(a){const b=wr.wg();a.ops.forEach(c=>{switch(c.type){case 0:b.retain(c.length);break;case 1:b.expand(c.length);break;case 2:b.retain(c.length);break;case 3:b.expand(1);break;case 4:b.retain(1);break;default:throw new r(c);}});return b.build()};gob=function(a,b){let c=a.items[b];null==c&&(c=a.items[b]={});return c};Nr=function(a,b){if(null!=b)return m(a.a5c.get(b))};hob=function(a,b){let c;for(let d=b.top;d<=b.bottom&&!(c=a.kUa(d));d++);return c};
iob=function(a,b){let c;for(let d=b.left;d<=b.right&&!(c=a.jUa(d));d++);return c};job=function(a,b){let c;for(let d=b.bottom;d>=b.top&&!(c=a.kUa(d));d--);return c};kob=function(a,b){let c;for(let d=b.right;d>=b.left&&!(c=a.jUa(d));d--);return c};lob=function(a,b){const c=a.j2(b.Gg),d=a.o5(b.Qg),e=a.j2(b.Ij||b.Gg);a=a.o5(b.zk||b.Qg);na(null!=c&&null!=d&&null!=e&&null!=a);na(d<=a&&c<=e);return{left:c,top:d,right:e,bottom:a}};Or=__webpack_require__(519427);mob=Or._isComputingDerivation;__c.nob=Or.comparer;
Pr=__c.Pr=Or.computed;oob=Or.createAtom;Qr=Or.observable;pob=Or.ObservableMap;var qob,sob;qob=__webpack_require__(635872);__c.rob=qob.Om;sob=qob.kq;__c.tob=__webpack_require__(223897).h;__c.uob=__webpack_require__(17986).xQ;__c.vob=__webpack_require__(858800).U;__c.wob=__webpack_require__(127414).C;var yob,Aob,Cob,Sr;__c.xob=/^$|^(https?|ftp|tel|sms|mailto|shortcuts):(\/\/|[^/])[^ ]+(\/|$)|^[^: ]+(\/|$)|^[\w.]+:\d+(\/|$)/;Rr=__c.Rr=/^#[0-9a-f]{6}$/;yob=jq(/^transparent$/,Rr);__c.zob=/^[0-9]+(\.[0-9]+)?$/;Aob=/^[0-9]+(\.[0-9]+)?px$/;__c.Bob=/^-?[0-9]+(\.[0-9]+)?%$/;Cob=/^(([1-9]|10)( ([1-9]|10)){0,9})?$/;Sr=/^inherit$/;var Dob;Tr=__c.Tr=class{static equals(a,b){return a?!!b&&a.equals(b):!b}map(a,b,c,d){return new Dob(this,a,b,c,d)}};
Dob=class extends Tr{isIdentity(a){return this.component.isIdentity(this.Z0(a))}compose(a,b){return this.Vva(this.component.compose(this.Z0(a),this.Z0(b)))}transform(a,b){const [c,d]=this.component.transform(this.Z0(a),this.Z0(b));return[this.Vva(c),this.Vva(d)]}Ik(a){return this.Vva(this.component.Ik(this.Z0(a)))}Hj(a,b){return a===b||this.component.Hj(this.Z0(a),this.Z0(b))}identity(a){return this.Vva(this.component.identity(this.Uha(a)))}apply(a,b){const c=this.Uha(a);b=this.component.apply(c,
this.Z0(b));return c===b?a:this.edb(b)}Yk(a,b){const c=this.Uha(a);b=this.component.Yk(c,this.Z0(b));return c===b?a:this.edb(b)}Th(a,b){return a===b||this.component.Th(this.Uha(a),this.Uha(b))}equals(a){return this===a}constructor(a,b,c,d,e){super();this.component=a;this.Vva=b;this.Z0=c;this.edb=d;this.Uha=e}};var Eob=class extends Tr{isIdentity(){return!0}compose(){}transform(){return[void 0,void 0]}Ik(){}Hj(){return!0}identity(){}apply(a){return a}Yk(a){return a}Th(a,b){return this.Cv(a,b)}equals(a){return this===a}constructor(a){super();this.Cv=a}};var dmb=class{toString(){return`U(${this.delta})`}constructor(a){this.delta=a;this.type=0}},Fob=class{toString(){return`R(${this.oldState}, ${this.newState})`}constructor(a,b){this.oldState=a;this.newState=b;this.type=1}},Gob=class extends Tr{update(a){return this.component.isIdentity(a)?void 0:new dmb(a)}replace(a,b){return new Fob(a,b)}isIdentity(a){return null==a||0===a.type&&this.component.isIdentity(a.delta)}compose(a,b){if(null==a)return b;if(null==b)return a;switch(a.type){case 0:switch(b.type){case 0:return this.update(this.component.compose(a.delta,
b.delta));case 1:return this.replace(this.component.Yk(b.oldState,a.delta),b.newState);default:throw new r(b);}case 1:switch(b.type){case 0:return this.replace(a.oldState,this.component.apply(a.newState,b.delta));case 1:return kq(this.component,a.newState,b.oldState),this.replace(a.oldState,b.newState);default:throw new r(b);}default:throw new r(a);}}transform(a,b){if(null==a||null==b)return[b,a];switch(a.type){case 0:switch(b.type){case 0:const [c,d]=this.component.transform(a.delta,b.delta);return[this.update(c),
this.update(d)];case 1:return[this.replace(this.component.apply(b.oldState,a.delta),b.newState),void 0];default:throw new r(b);}case 1:switch(b.type){case 0:return[void 0,this.replace(this.component.apply(a.oldState,b.delta),a.newState)];case 1:return kq(this.component,a.oldState,b.oldState),[void 0,this.replace(b.newState,a.newState)];default:throw new r(b);}default:throw new r(a);}}Ik(a){if(null==a)return a;switch(a.type){case 0:return this.update(this.component.Ik(a.delta));case 1:return this.replace(a.newState,
a.oldState);default:throw new r(a);}}Hj(a,b){return a===b?!0:null==a||null==b?a===b:0===a.type&&0===b.type?this.component.Hj(a.delta,b.delta):1===a.type&&1===b.type?this.component.Th(a.oldState,b.oldState)&&this.component.Th(a.newState,b.newState):!1}identity(){}apply(a,b){if(null==b)return a;switch(b.type){case 0:return this.component.apply(a,b.delta);case 1:return kq(this.component,a,b.oldState),b.newState;default:throw new r(b);}}Yk(a,b){if(null==b)return a;switch(b.type){case 0:return this.component.Yk(a,
b.delta);case 1:return kq(this.component,a,b.newState),b.oldState;default:throw new r(b);}}Th(a,b){return this.component.Th(a,b)}equals(a){return this===a||a instanceof Gob&&this.component.equals(a.component)}constructor(a){super();this.component=a}};var Hob=class extends Tr{isIdentity(a){return null==a||this.component.isIdentity(a)}compose(a,b){na(null==a===(null==b));return null!=a&&null!=b?this.component.compose(a,b):void 0}transform(a,b){na(null==a===(null==b));return null!=a&&null!=b?this.component.transform(a,b):[void 0,void 0]}Ik(a){return null!=a?this.component.Ik(a):void 0}Hj(a,b){return null!=a&&null!=b&&this.component.Hj(a,b)||null==a&&null==b}identity(a){return null!=a?this.component.identity(a):void 0}apply(a,b){na(null==a===(null==
b));return null!=a&&null!=b?this.component.apply(a,b):void 0}Yk(a,b){na(null==a===(null==b));return null!=a&&null!=b?this.component.Yk(a,b):void 0}Th(a,b){return a===b||null!=a&&null!=b&&this.component.Th(a,b)}equals(a){return this===a||a instanceof Hob&&this.component.equals(a.component)}constructor(a){super();this.component=a;na(!(a instanceof Hob))}};var clb={type:0,length:1},dlb={type:1,length:1},flb={type:2,length:1},nlb=nq(),mlb=oq(),olb=oq(new Fob),klb=class{toString(){return this.ops.map(jlb).join("")}constructor(a,b,c,d){this.ops=a;this.pre=b;this.post=c;this.iKa=d}},Iob=new klb([],0,0,0),Job=class{V5(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(mq(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(elb(this.acc));this.post+=this.acc;this.acc=0;break;case 2:this.ops.push(glb(this.acc));
this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 3:case 4:break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){na(0<=b,"{} < 0",b);b&&(this.V5(a),this.acc+=b);return this}oJb({Sj:a,qs:b}){const c=this.ops.length,d=this.d5||(this.d5=new Map),e=this.Mxa||(this.Mxa=new Map);na(!d.has(a),"duplicate record: {}",a);na(!e.has(b),"duplicate recall: {}",b);d.set(a,c);e.set(b,c)}append(a,b){switch(a.type){case 0:return this.retain(a.length);case 1:return this.expand(a.length);case 2:return this.gpa(a.length);
case 3:var c=a.shift;if(!b&&(b=a.state,c&&c.Sj===c.qs&&(c=void 0,a=nq(b)),null==b&&null==c))return this.expand();this.V5(a.type);c&&this.oJb(c);this.ops.push(a);this.post++;return this;case 4:c=a.shift;if(!b)if(b=a.delta,c&&c.Sj===c.qs&&(c=void 0,a=oq(b)),null==b){if(null==c)return this.retain()}else if(1===b.type&&null==b.oldState&&null==b.newState&&null==c)return this.gpa();this.V5(a.type);c&&this.oJb(c);this.ops.push(a);this.pre++;this.post++;return this;default:throw new r(a);}}retain(a){return null==
a||"number"===typeof a?this.accumulate(0,a):this.append(oq(void 0,a))}expand(a){return null==a||"number"===typeof a?this.accumulate(1,a):this.append(nq(void 0,a))}gpa(a){return null==a||"number"===typeof a?this.accumulate(2,a):this.append(oq(this.component.replace(void 0,void 0),a))}insert(a,b){return this.append(nq(a,b))}update(a,b){return this.append(oq(null!=a?this.component.update(a):void 0,b))}D0a(a){return this.append(oq(this.component.replace(void 0,a)))}UV(a){return this.append(oq(this.component.replace(a,
void 0)))}change(a,b,c){return this.append(oq(this.component.replace(a,b),c))}build(a){0!==this.mode&&this.V5();if(a&&a.CCc())return a.j8b(this.ops);if(!this.d5&&!this.Mxa)return new klb(this.ops,this.pre,this.post,0);a=this.ops;const b=m(this.d5);var c=[...b.keys()];if(c.some((g,h)=>g!==h)){const g=new Map;c.forEach((h,k)=>g.set(h,k));for(const h of b.values())switch(c=a[h],c.type){case 3:var d=c.shift,e=g.get(d.Sj),f=g.get(d.qs);if(e!==d.Sj||f!==d.qs)a[h]=nq(c.state,lq(e,f));break;case 4:d=c.shift;
e=g.get(d.Sj);f=g.get(d.qs);if(e!==d.Sj||f!==d.qs)a[h]=oq(c.delta,lq(e,f));break;case 0:case 1:case 2:throw Error(`INSERT | UPDATE expected: ${jlb(c)}`);default:throw new r(c);}}return new klb(a,this.pre,this.post,b.size)}constructor(a){this.component=a;this.ops=[];this.acc=this.post=this.pre=0;this.Mxa=this.d5=this.mode=void 0}},Kob=class{static create(a,b,c){na(0<=b,"{} < 0",b);na(0<=c,"{} < 0",c);a=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,mq(b)]:a.ops;return new Kob(a)}get head(){return this.Hl}WB(a,
b=1){const c=m(this.Hl);if(c.type!==a)throw Error();const d=c.length;na(0<b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Hl=mq(d-b),mq(b);case 1:return this.Hl=elb(d-b),elb(b);case 2:return this.Hl=glb(d-b),glb(b);default:throw new r(a);}else return this.Hl=this.ops[this.i++],c}constructor(a){this.ops=a;this.i=0;this.Hl=a[this.i++]}},Lob=class{oJb(a,{Sj:b,qs:c}){const d=this.d5||(this.d5=new Map),e=this.Mxa||(this.Mxa=new Map);oa(!d.has(b),"already recorded: {}",b);oa(!e.has(c),
"already recalled: {}",c);d.set(b,a);e.set(c,this.length)}append(a,b){b?this.oJb(a,b):null!=a&&(this.list[this.length]=a);this.length++;return this}expand(a=1){na(0<=a,"{} < 0",a);this.length+=a;return this}build(){const a=this.list;if(this.d5||this.Mxa){const c=m(this.d5);var b=m(this.Mxa);sa(c.size,b.size);for(const [d,e]of b)oa(c.has(d),"recall has no record: {}",d),b=c.get(d),null!=b&&(a[e]=b)}null!=this.NWc&&sa(this.length,this.NWc);return a}constructor(a){this.NWc=a;this.list=[];this.length=
0;this.Mxa=this.d5=void 0}},Mob=class{static create(a,b){a.length<b&&(a=a.slice(),a.length=b);return new Mob(a)}finish(){sa(this.Pua,this.input.length)}constructor(a){this.input=a;this.Pua=0}},Nob=class{CCc(){return!!this.Odb}j8b(a){const b=new Job(this.component);for(const c of a)switch(c.type){case 3:b.append(this.VXc(c));break;case 4:b.append(this.WXc(c));break;case 0:case 1:case 2:b.append(c);break;default:throw new r(c);}return b.build()}constructor(a){this.component=a;this.kqc=this.lqc=this.Odb=
void 0}},Oob=class extends Nob{VXc(a){if(!a.shift)return a;const b=a.state,c=a.shift;var d=this.J0a&&this.J0a.get(c.Sj);d=this.component.apply(b,d);const e=wlb(this,c);return d!==b||e!==c?nq(d,e):a}WXc(a){if(!a.shift)return a;const b=a.delta,c=a.shift;var d=this.J0a&&this.J0a.get(c.Sj);d=this.component.compose(b,d);const e=wlb(this,c);return d!==b||e!==c?oq(d,e):a}constructor(...a){super(...a);this.J0a=void 0}},Pob=class extends Nob{CCc(){return super.CCc()||!!this.XKa||!!this.ELa}VXc(a){if(!a.shift)return a;
const b=a.shift,c=wlb(this,b);if(c!==b)throw Error(`${JSON.stringify(c)} != ${JSON.stringify(b)}`);return a}WXc(a){const b=a.delta,c=a.shift;var d=this.XKa;if(d){var e=d.get(a);if(null==e)e=a.delta;else{d.delete(a);d=m(this.ELa);var f=d.get(e);d.delete(e);e=f}}else e=a.delta;d=c&&wlb(this,c);return e!==b||d!==c?oq(e,d):a}j8b(a){a=super.j8b(a);if(this.XKa&&this.XKa.size)throw Error(`unconsumed setSurrogates: ${[...this.XKa.values()]}`);if(this.ELa&&this.ELa.size)throw Error(`unconsumed subSurrogates: ${[...this.ELa.keys()]}`);
return a}constructor(...a){super(...a);this.ELa=this.XKa=void 0}},Qob=class extends Tr{wg(){return new Job(this.component)}isIdentity(a){return!a.ops.length||a.ops.every(b=>{switch(b.type){case 0:return!0;case 4:return!b.shift&&this.component.isIdentity(b.delta);case 2:case 1:case 3:return!1}throw new r(b);})}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=this.component,d=this.wg(),e=new Oob(c),f=Kob.create(a,0,b.pre),g=Kob.create(llb(b,a.iKa),a.post,0);for(var h=f.head,
k=g.head;h||k;){if(k)if(1===k.type)d.append(g.WB(k.type,k.length));else if(3===k.type)d.append(pq(g,k.type));else if(h)if(1===h.type)switch(k.type){case 2:case 0:var l=Math.min(h.length,k.length);f.WB(h.type,l);g.WB(k.type,l);d.append(elb(l));break;case 4:l=pq(f,h.type);k=pq(g,k.type);h=k.shift;d.append(nq(c.apply(l.state,k.delta),h));break;default:throw new r(k);}else if(3===h.type){l=pq(f,h.type);k=pq(g,k.type);h=l.shift;var n=k.shift;null==h?d.append(nq(c.apply(l.state,k.delta),n)):null==n?(d.append(l),
vq(e,h.qs,k.delta)):(d.append(nq(l.state,lq(h.Sj,n.qs))),vq(e,h.qs,k.delta),vlb(e,n.Sj,h.qs))}else 4===h.type||4===k.type?(k=pq(f,4),l=pq(g,4),h=k.shift,n=l.shift,null==h?d.append(oq(c.compose(k.delta,l.delta),n)):null==n?(d.append(k),vq(e,h.qs,l.delta)):(d.append(oq(k.delta,lq(h.Sj,n.qs))),vq(e,h.qs,l.delta),vlb(e,n.Sj,h.qs))):(l=Math.min(h.length,k.length),h=f.WB(h.type,l),k=g.WB(k.type,l),d.append(2===h.type||2===k.type?glb(l):mq(l)));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);
h=f.head;k=g.head}return d.build(e)}transform(a,b){if(!a.ops.length||!b.ops.length)return[b,a];const c=this.component,d=Kob.create(a,b.pre,0),e=Kob.create(llb(b,a.iKa),a.pre,0),f=this.wg(),g=this.wg(),h=new Pob(c),k=new Pob(c);for(var l=d.head,n=e.head;l||n;){if(l&&3===l.type)if(n=pq(d,l.type),n.shift){var p=n.shift;l=oq();g.append(l,"nocollapse");f.append(n);xq(h,p.qs,l);wq(h,p.Sj)}else g.append(clb),f.append(n);else if(l&&1===l.type)n=d.WB(l.type,l.length),g.append(mq(n.length)),f.append(n);else if(n&&
3===n.type)if(n=pq(e,n.type),n.shift){l=n.shift;p=l.Sj;l=l.qs;var q=-p-1,u=oq(void 0,lq(-l-1,l));g.append(n);f.append(u);xq(k,l,u);wq(k,p);ulb(k,q,p)}else g.append(n),f.append(clb);else if(n&&1===n.type)p=e.WB(n.type,n.length),g.append(p),f.append(mq(n.length));else if(l&&n)if(4===l.type||4===n.type){p=pq(d,l.type);l=pq(e,n.type);const [w,y]=c.transform(p.delta,l.delta);n=p.shift;l=l.shift;if(n)if(l){p=l.Sj;l=l.qs;q=n.Sj;n=n.qs;u=-p-1;const z=oq(void 0,lq(-l-1,l)),B=oq(void 0,lq(p,l));g.append(B);
f.append(z);xq(h,n,B);xq(k,l,z);wq(h,q,w);wq(k,p,y);ulb(k,u,q);vlb(k,p,n)}else p=n.Sj,l=n.qs,q=oq(),g.append(q,"nocollapse"),f.append(oq(y,n)),xq(h,l,q),wq(h,p,w);else l?(n=l.Sj,p=l.qs,q=-n-1,u=oq(void 0,lq(-p-1,p)),g.append(oq(w,l)),f.append(u),xq(k,p,u),wq(k,n,y),ulb(k,q,n)):(g.append(oq(w)),f.append(oq(y)))}else p=Math.min(l.length,n.length),l=d.WB(l.type,p),n=e.WB(n.type,p),2===l.type&&2===n.type?g.append(mq(n.length)):g.append(n),f.append(l);else throw Error(`length mismatch (${a} x ${b})`);
l=d.head;n=e.head}return[g.build(h),f.build(k)]}Ik(a){if(!a.ops.length)return a;const b=this.wg(),c=new Oob(this.component);for(const d of a.ops)switch(d.type){case 0:case 1:case 2:b.retain(d.length);break;case 4:a=this.component.Ik(d.delta);const e=d.shift&&xlb(d.shift);e?(b.retain(e),vq(c,e.qs,a)):b.append(oq(a));break;case 3:a=d.shift&&xlb(d.shift);null!=d.state?a?(b.retain(a),vq(c,a.qs,this.component.replace(d.state,void 0))):b.UV(d.state):b.retain(a);break;default:throw new r(d);}return b.build(c)}Hj(a,
b){if(a===b)return!0;if(a.pre!==b.pre||a.post!==b.post||a.ops.length!==b.ops.length)return!1;for(let c=0;c<a.ops.length;c++)if(!this.$lc(a.ops[c],b.ops[c]))return!1;return!0}$lc(a,b){switch(a.type){case 0:case 1:case 2:return a.type===b.type&&a.length!==b.length;case 3:return a.type===b.type&&this.component.Th(a.state,b.state)&&ylb(a.shift,b.shift);case 4:return a.type===b.type&&this.component.Hj(a.delta,b.delta)&&ylb(a.shift,b.shift);default:throw new r(a);}}fg(a){return new Lob(a)}identity(){return Iob}apply(a,
b){if(!b.ops.length)return a;const c=Mob.create(a,b.pre),d=new Lob(Math.max(a.length,b.pre)+(b.post-b.pre));a=b.pre<a.length?[...b.ops,mq(a.length-b.pre)]:b.ops;for(const e of a)switch(e.type){case 0:qlb(d,slb(c,e.length));break;case 1:d.expand(e.length);break;case 2:oa(plb(slb(c,e.length)));d.expand(e.length);break;case 3:d.append(e.state,e.shift);break;case 4:d.append(this.component.apply(rlb(c),e.delta),e.shift);break;default:throw new r(e);}c.finish();return d.build()}Yk(a,b){if(!b.ops.length)return a;
const {unshift:c,SUe:d}=this.unshift(b);b=d;a=this.apply(a,c);const e=Mob.create(a,b.post),f=new Lob(Math.max(a.length,b.post)+(b.pre-b.post));a=b.post<a.length?[...b.ops,mq(a.length-b.post)]:b.ops;for(const g of a)switch(g.type){case 0:qlb(f,slb(e,g.length));break;case 1:oa(plb(slb(e,g.length)));break;case 2:oa(plb(slb(e,g.length)));f.expand(g.length);break;case 3:kq(this.component,g.state,rlb(e));break;case 4:f.append(this.component.Yk(rlb(e),g.delta));break;default:throw new r(g);}e.finish();return f.build()}unshift(a){const b=
this.wg(),c=this.wg();for(const d of a.ops)switch(d.type){case 0:b.append(d);c.append(d);break;case 1:case 2:b.append(mq(d.length));c.append(d);break;case 4:d.shift?(b.retain(xlb(d.shift)),c.append(oq(d.delta))):(b.retain(),c.append(d));break;case 3:d.shift?(b.retain(xlb(d.shift)),c.append(nq(d.state))):(b.retain(),c.append(d));break;default:throw new r(d);}return{unshift:b.build(),SUe:c.build()}}Th(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;const c=Object.keys(a),d=Object.keys(b);if(c.length!==
d.length)return!1;for(let e=0;e<c.length;e++)if(c[e]!==d[e]||!this.component.Th(a[c[e]],b[d[e]]))return!1;return!0}equals(a){return this===a||a instanceof Qob&&this.component.equals(a.component)}constructor(a){super();this.component=new Gob(new Hob(a))}};var zq,Alb,Rob,Clb,Elb,Vlb,Dlb,bmb;zq=Object.freeze({serialize:a=>a,deserialize:a=>a});Ur=__c.Ur=Object.freeze({serialize(){throw Error("serialization not implemented");},deserialize(){throw Error("serialization not implemented");}});Alb=class{serialize(a){return this.b.serialize(this.a.serialize(a))}deserialize(a){return this.a.deserialize(this.b.deserialize(a))}constructor(a,b){this.a=a;this.b=b}};
Rob=class{get serializer(){null==this.tHc&&(this.tHc=this.Fde());return this.tHc}serialize(a){return this.serializer.serialize(a)}deserialize(a){return this.serializer.deserialize(a)}constructor(a){this.Fde=a}};Clb=class{serialize(a){return a.map(b=>this.serializer.serialize(b))}deserialize(a){return a.map(b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
Elb=Object.freeze({serialize(a){let b=0,c=0;const d=__c.zlb(a),e=[];a.forEach((f,g)=>{if(f=g-c)b&&(e.push(b),b=0),e.push(-f);b++;c=g+1});return{items:d,uj:e}},deserialize({items:a,uj:b}){const c=[];let d=0;for(const e of b)0>e?d+=-e:0<e&&(a.slice(0,e).forEach(f=>c[d++]=f),a=a.slice(e));a.length&&a.forEach(e=>c[d++]=e);return c}});Vlb=class{serialize(a){return Vh(a,b=>this.serializer.serialize(b))}deserialize(a){return Vh(a,b=>this.serializer.deserialize(b))}constructor(a){this.serializer=a}};
Dlb=class{serialize(a){return yq(this.fields,(b,c)=>b.serialize(a[c]))}deserialize(a){return yq(this.fields,(b,c)=>b.deserialize(a[c]))}constructor(a){this.fields=a}};bmb=class{serialize(a){return null!=a?this.serializer.serialize(a):void 0}deserialize(a){return null!=a?this.serializer.deserialize(a):void 0}constructor(a){this.serializer=a}};Object.freeze({serialize:a=>a,deserialize:a=>new dmb(a.delta)});Object.freeze({serialize:a=>a,deserialize:a=>new Fob(a.oldState,a.newState)});
Object.freeze({serialize:a=>({ops:a}),deserialize:a=>a.ops});var Sob,Jlb,Tob,Uob;Sob={next:()=>{},error:()=>{}};Jlb=class{next(a){this.closed||this.o.next(this.f(a))}error(a){this.closed||(this.closed=!0,this.o.error(a))}constructor(a,b){this.o=a;this.f=b;this.closed=!1}};Tob=class{create(a,b=__c.wob,c=Sob){a=this.My(a);b.subscribe(this.connect(a,c));return a}};
Vr=__c.Vr=class extends Tob{map(a,b,c,d,e,f){return new Uob(this,a,b,c,d,e,f,Blb({serialize:b,deserialize:a},this.b3b),Blb({serialize:d,deserialize:c},this.Wpa))}constructor(a,b){super();this.b3b=a;this.Wpa=b}};
Uob=class extends Vr{My(a){return this.Ppe(this.component.My(this.Uha(a)))}connect(a,b){const c=this.component.connect(this.cPb(a),{next:d=>b.next(this.Vva(d)),error:d=>b.error(d)});return{next:d=>c.next(this.Z0(d)),complete:()=>c.complete()}}kc(a){return this.edb(this.component.kc(this.cPb(a)))}destroy(a,b){return this.component.destroy(this.cPb(a),this.Uha(b))}Ai(a,b){return this.component.Ai(this.cPb(a),this.Uha(b))}constructor(a,b,c,d,e,f,g,h,k){super(h,k);this.component=a;this.Vva=b;this.Z0=
c;this.edb=d;this.Uha=e;this.Ppe=f;this.cPb=g;this.domain=this.component.domain.map(this.Vva,this.Z0,this.edb,this.Uha)}};Wr=__c.Wr=class{connect(a){oa(null==this.xJ);this.xJ=a;return{next:b=>{this.xJ&&Hlb(this,b)},complete:()=>this.complete()}}kc(){return this.$R()}complete(){this.xJ&&(this.xJ=void 0,Ilb(this,"mutable disconnected"))}error(a){this.xJ&&(this.xJ.error(a),this.xJ=void 0,Ilb(this,"mutable failure"))}lq(a){var b;Hlb(this,a);this.domain.isIdentity(a)||(null===(b=this.xJ)||void 0===b?void 0:b.next(a))}constructor(){this.clients=this.h9b=this.xJ=void 0}};var Vob;Xr=__c.Xr=class{get(){this.qV.reportObserved();return this.value}set(a){__c.nob.identity(this.value,a)||(this.value=a,this.qV.reportChanged())}constructor(a){this.value=a;this.qV=oob("")}};
Vob=class{static F(a){N(a,{wrc:Pr,Z_b:Pr})}get Fp(){return this.cols.length}get xz(){return this.rows.length}get wrc(){const a=new Map;this.rows.forEach((b,c)=>a.set(b,c));return a}get Z_b(){const a=new Map;this.cols.forEach((b,c)=>a.set(b,c));return a}get(a,b){a=this.rows[a];b=this.cols[b];if(null!=a&&null!=b){var c=this.values.get(this.VX(a,b));null==c&&mob()&&(c=new Xr,this.values.set(this.VX(a,b),c));return c&&c.get()}}set(a,b,c){let d=this.rows[a];null==d&&(d=this.rows[a]=this.Z9c++);a=this.cols[b];
null==a&&(a=this.cols[b]=this.X9c++);(b=this.values.get(this.VX(d,a)))?b.set(c):this.values.set(this.VX(d,a),new Xr(c))}delete(a,b){a=this.rows[a];b=this.cols[b];if(null!=a&&null!=b){var c=this.values.get(this.VX(a,b));c&&c.set(void 0);this.values.delete(this.VX(a,b))}}forEach(a){for(const c of this.rows)for(const d of this.cols){var b=this.values.get(this.VX(c,d));null!=b&&(b=b.get(),null!=b&&a(b,c,d))}}VX(a,b){return`${a}:${b}`}constructor(){Vob.F(this);this.X9c=this.Z9c=0;this.rows=Qr.array([],
{deep:!1});this.cols=Qr.array([],{deep:!1});this.values=new Map}};var Wob,Rlb,Slb,Qlb,Tlb,Ulb,Xob,Xlb,Ylb,amb,Zlb,$ob,bpb,cpb,dpb;Lq=__c.Lq=class{constructor(a){this.serializer=a}};Wob=class extends Lq{Cv(a,b){return a===b}stringify(a){return JSON.stringify(a)}};Rlb=class extends Wob{oN(a){return a===this.value}constructor(a){super(zq);this.value=a}};Slb=class extends Wob{oN(a){return this.values.has(a)}constructor(a){super(zq);this.values=a}};Qlb=class extends Wob{constructor(a){super(zq);this.oN=a}};
Tlb=class extends Lq{oN(a){return a.every(b=>this.type.oN(b))&&(!this.W2a||this.W2a(a))}Cv(a,b){return a.length===b.length&&a.every((c,d)=>d in b&&this.type.Cv(c,b[d]))&&a.reduce(c=>c+1,0)===b.reduce(c=>c+1,0)}stringify(a){return a.length?"[ "+a.map(b=>this.type.stringify(b)).join(", ")+" ]":"[]"}constructor(a,b,c){super(c);this.type=a;this.W2a=b}};
Ulb=class extends Lq{oN(a){return[...a].every(this.Wke)}Cv(a,b){if(a.size!==b.size)return!1;for(const [c,d]of a)if(a=b.get(c),null==a||!this.valueType.Cv(d,a))return!1;return!0}stringify(a){return a.size?`{ ${[...a].map(([b,c])=>`${this.keyType.stringify(b)} => ${this.valueType.stringify(c)}`).join(", ")} }`:"{}"}constructor(a,b,c){super(c);this.keyType=a;this.valueType=b;this.Wke=([d,e])=>Xob.every(f=>!d.includes(f))&&this.keyType.oN(d)&&this.valueType.oN(e)}};Xob=["$",".","\x00"];
Xlb=class extends Lq{oN(a){return this.keys.every(b=>this.fields[b].oN(a[b]))&&(!this.W2a||this.W2a(a))}Cv(a,b){return this.keys.every(c=>this.fields[c].Cv(a[c],b[c]))}stringify(a){return this.keys.length?"{ "+this.keys.map(b=>`${b}: ${this.fields[b].stringify(a[b])}`).join(", ")+" }":"{}"}constructor(a,b){super(Ur);this.fields=a;this.W2a=b;this.keys=Object.keys(this.fields)}};
Ylb=class extends Lq{oN(a){return this.vK[this.Wub(a)].oN(a)}Cv(a,b){const c=this.Wub(a),d=this.Wub(b);return c===d&&this.vK[c].Cv(a,b)}stringify(a){return this.vK[this.Wub(a)].stringify(a)}constructor(a,b){super(Ur);this.vK=a;this.Wub=b}};amb=class extends Lq{oN(a){return null==a||this.type.oN(a)}Cv(a,b){return null!=a?null!=b&&this.type.Cv(a,b):null==b}stringify(a){return null!=a?this.type.stringify(a):"undefined"}constructor(a,b){super(b);this.type=a}};
Zlb=class extends Wob{oN(a){return"string"===typeof a&&this.hGe.test(a)}constructor(a){super(zq);this.hGe=a}};Yr=__c.Yr=Eq(a=>"boolean"===typeof a);Zr=__c.Zr=Eq(a=>"string"===typeof a);__c.Yob=Eq(a=>1===a.length);__c.Zob=$lb(-2147483648,2147483647);$ob=Eq(a=>Number.isSafeInteger(a));$r=__c.$r=$lb(0,2147483647);__c.apb=$lb(1,2147483647);as=__c.as=$lb(0,Number.MAX_SAFE_INTEGER);bs=__c.bs=Eq(a=>Number.isFinite(a));cs=__c.cs=Kq(0,Number.MAX_VALUE);bpb=Eq(a=>Number.isFinite(a)&&0<a&&a<=Number.MAX_VALUE);
cpb=Gq(cs);dpb=Gq(Zr);var epb,cmb;epb={next:a=>na(null==a),complete:()=>{}};
cmb=class extends Vr{My(a){return null!=a?this.type.My(a):void 0}connect(a,b){if(null==a)return epb;const c=this.type.connect(a,b);return{next:d=>c.next(m(d)),complete:()=>c.complete()}}kc(a){return null!=a?this.type.kc(a):void 0}destroy(a,b){if(null!=a&&null!=b)this.type.destroy(a,b);else if(null!=a||null!=b)throw Error(`${this.kc(a)} != ${b}`);}Ai(a,b){return null!=a?null!=b&&this.type.Ai(a,b):null==b}constructor(a,b,c){super(b,c);this.type=a;this.domain=new Hob(this.type.domain)}};__c.ds=Mq(Zr);
__c.fpb=Mq(Yr);Mq(__c.Zob);Mq($ob);__c.es=Mq(bs);__c.gpb=Mq($r);__c.hpb=Mq(as);__c.ipb=Mq(cs);var jpb,fmb,kpb,gmb,lpb;jpb=class extends Wr{cY(a){if(null!=a)switch(a.type){case 1:na(this.utd.Cv(this._value.get(),a.oldState));this._value.set(a.newState);break;case 0:na(null==a.delta);break;default:throw new r(a);}}get value(){return this._value.get()}set value(a){Olb(this.utd,a);const b=this._value.get();this.lq(this.domain.replace(b,a))}$R(){return this.value}constructor(a,b,c){super();this.utd=a;this.domain=b;this._value=new Xr(c)}};
fmb=class extends Vr{My(a){a=Olb(this.type,a);return new jpb(this.type,this.domain,a)}connect(a,b){return a.connect(b)}kc(a){return a.kc()}destroy(a,b){Plb(this.type,a.value,b)}Ai(a,b){this.type.Cv(a.value,b)||(a.value=b);return!0}constructor(a,b){super(Ur,b);this.type=a;this.domain=new Gob(new Eob((c,d)=>this.type.Cv(c,d)))}};
kpb=class extends Wr{instantiate(a){const b=Bq(this,emb),{mutable:c,Uw:d}=Cq(this.type,a,b);this.spb.set(c);this.oMa=d;this.W9a=b}destroy(a){Dq(this.type,a,this.oMa,this.spb.get())}cY(a){if(null!=a)switch(a.type){case 0:this.oMa.next(a.delta);break;case 1:this.destroy(a.oldState);this.instantiate(a.newState);break;default:throw Error();}}$R(){return this.type.kc(this.ref)}get ref(){return this.spb.get()}set(a){this.lq(new Fob(this.type.kc(this.spb.get()),a))}constructor(a,b,c){super();this.type=a;
this.domain=b;a=Bq(this,emb);const {mutable:d,Uw:e}=Cq(this.type,c,a);this.spb=new Xr(d);this.oMa=e;this.W9a=a}};gmb=class extends Vr{My(a){return new kpb(this.type,this.domain,a)}connect(a,b){return a.connect(b)}kc(a){return a.kc()}destroy(a,b){this.type.destroy(a.ref,b)}Ai(a,b){this.type.Ai(a.ref,b)||a.set(b);return!0}constructor(a,b){super(Ur,b);this.type=a;this.domain=new Gob(this.type.domain)}};__c.fs=Nq(Zr);gs=__c.gs=Nq(Yr);__c.hs=Nq(bs);__c.is=Nq($r);__c.js=Nq(cs);lpb=Nq(bpb);__c.mpb=Nq(cpb);
__c.ks=Nq(dpb);__c.ls=Pq(Zr);__c.npb=Pq(Yr);__c.ms=Pq(bs);__c.opb=Pq($r);__c.ns=Pq(cs);var hmb=new Map,ppb=class extends Tr{create(a,b){return imb(this,a,this.component.replace(void 0,b))}update(a,b){return imb(this,a,this.component.update(b))}replace(a,b,c){return imb(this,a,this.component.replace(b,c))}delete(a,b){return imb(this,a,this.component.replace(b,void 0))}identity(){return hmb}isIdentity(a){return!a.size||Array.from(a.values()).every(b=>this.component.isIdentity(b))}Ik(a){if(!a.size)return a;const b=new Map;for(const [c,d]of a)a=this.component.Ik(d),null!=a&&b.set(c,a);
return b}compose(a,b){if(!a.size)return b;if(!b.size)return a;const c=new Map;for(const d of jmb(a,b)){const e=this.component.compose(a.get(d),b.get(d));null!=e&&c.set(d,e)}return c}transform(a,b){if(!a.size||!b.size)return[b,a];const c=new Map,d=new Map;for(const e of jmb(a,b)){const [f,g]=this.component.transform(a.get(e),b.get(e));null!=g&&c.set(e,g);null!=f&&d.set(e,f)}return[d,c]}apply(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.apply(a.get(e),d);null!=d?c.set(e,
d):c.delete(e)});return c}Yk(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((d,e)=>{d=this.component.Yk(a.get(e),d);null!=d?c.set(e,d):c.delete(e)});return c}Th(a,b){return a===b||a.size===b.size&&Array.from(jmb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return null!=d&&null!=c&&this.component.Th(d,c)})}Hj(a,b){return a===b||a.size===b.size&&Array.from(jmb(a,b)).every(c=>{const d=a.get(c);c=b.get(c);return null!=d&&null!=c&&this.component.Hj(d,c)})}equals(a){return this===a||a instanceof ppb&&
this.component.equals(a)}constructor(a){super();this.component=new Gob(new Hob(a))}};__c.qpb=class extends Wr{static F(a){N(a,{refs:Qr.shallow})}get size(){return this.refs.size}set(a,b){var c=this.refs.get(a);c=null!=c?this.domain.replace(a,this.type.kc(c),b):this.domain.create(a,b);this.lq(c);c=this.get(a);if(null==c)throw Error(`Unable to set key "${a}" to value "${b}"`);return c}get(a){return this.refs.get(a)}has(a){return this.refs.has(a)}delete(a){const b=this.refs.get(a);null!=b&&(a=this.domain.delete(a,this.type.kc(b)),this.lq(a))}forEach(a){this.refs.forEach(a)}map(a){return[...this.refs].map(([b,
c])=>a(c,b))}every(a){return[...this.refs.entries()].every(([b,c])=>a(c,b))}entries(){return this.refs.entries()}keys(){return this.refs.keys()}values(){return this.refs.values()}[Symbol.iterator](){return this.refs[Symbol.iterator]()}$R(){return Vh(this.refs,a=>this.type.kc(a))}destroy(a){na(this.refs.size===a.size);this.forEach((b,c)=>{const d=m(a.get(c));c=m(this.$Ca.get(c));Dq(this.type,d,c.to,b)})}Ai(a){for(const [b,c]of this.refs)if(a.has(b)){const d=a.get(b);this.type.Ai(c,d)||this.set(b,d)}else this.delete(b);
for(const [b,c]of a)this.refs.has(b)||this.set(b,c);return!0}cY(a){a.forEach((b,c)=>{if(null!=b)switch(b.type){case 0:null!=b.delta&&m(this.$Ca.get(c)).to.next(b.delta);break;case 1:null!=b.oldState?(this.m3b(c,b.oldState),this.refs.delete(c),this.$Ca.delete(c)):(na(!this.refs.has(c)),na(!this.$Ca.has(c)));if(null!=b.newState){const {yPc:d,value:e}=kmb(this,c,b.newState);this.refs.set(c,e);this.$Ca.set(c,d)}break;default:throw new r(b);}})}m3b(a,b){const c=m(this.refs.get(a));a=m(this.$Ca.get(a));
Dq(this.type,b,a.to,c)}constructor(a,b,c){super();__c.qpb.F(this);this.type=a;this.domain=b;this.refs=new Map;this.$Ca=new Map;c.forEach((d,e)=>{const {yPc:f,value:g}=kmb(this,e,d);this.refs.set(e,g);this.$Ca.set(e,f)})}};__c.qpb.prototype.wI=ea(93);
var lmb=class extends Vr{My(a){return new __c.qpb(this.type,this.domain,a)}Bm(a){return a}connect(a,b){return this.Bm(a).connect(b)}kc(a){return this.Bm(a).kc()}destroy(a,b){return this.Bm(a).destroy(b)}Ai(a,b){return this.Bm(a).Ai(b)}constructor(a,b){super(Ur,b);this.type=a;this.domain=new ppb(this.type.domain)}};var rpb={next:()=>{},complete:()=>{}},mmb=class extends Vr{My(a){return Olb(this.type,a)}connect(){return rpb}kc(a){return a}destroy(a,b){Plb(this.type,a,b)}Ai(a,b){return this.type.Cv(a,b)}constructor(a,b){super(zq,b);this.type=a;this.domain=new Eob((c,d)=>this.type.Cv(c,d))}};var nmb=class extends Tr{static of(a){return new nmb(a)}update(a,b){const c={};m(this.components[a]).isIdentity(b)||(c[a]=b);return c}identity(){return this.id}isIdentity(a){return a===this.id||Object.entries(a).every(([b,c])=>null==c||this.components[b].isIdentity(c))}Ik(a){const b={};var c=Object.keys(a);if(!c.length)return a;for(const e of c){var d=a[e];null!=d&&(c=this.components[e],d=c.Ik(d),c.isIdentity(d)||(b[e]=d))}return b}compose(a,b){const c={};var d=Object.keys(a),e=Object.keys(b);if(!d.length)return b;
if(!e.length)return a;for(const f of new Set([...d,...e])){e=a[f];const g=b[f];null!=e&&null!=g?(d=this.components[f],e=d.compose(e,g),d.isIdentity(e)||(c[f]=e)):null!=e?c[f]=e:null!=g&&(c[f]=g)}return c}transform(a,b){const c={},d={};var e=Object.keys(a),f=Object.keys(b);if(!e.length||!f.length)return[b,a];for(const g of new Set([...e,...f]))if(e=a[g],f=b[g],null!=e&&null!=f){const h=this.components[g],[k,l]=h.transform(e,f);h.isIdentity(l)||(c[g]=l);h.isIdentity(k)||(d[g]=k)}else null!=e?c[g]=e:
null!=f&&(d[g]=f);return[d,c]}apply(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],null!=c&&(d[e]=this.components[e].apply(a[e],c));return d}Yk(a,b){var c=Object.keys(b);if(!c.length)return a;const d=Object.assign({},a);for(const e of c)c=b[e],null!=c&&(d[e]=this.components[e].Yk(a[e],c));return d}Th(a,b){return a===b||Object.keys(this.components).every(c=>this.components[c].Th(a[c],b[c]))}Hj(a,b){if(a===b)return!0;const c=Object.keys(a),d=Object.keys(b);
return!c.length&&!d.length||__c.hq([...c,...d]).every(e=>{const f=a[e],g=b[e];return null!=f&&null!=g&&this.components[e].Hj(f,g)})}equals(a){return this===a?!0:a instanceof nmb?Object.keys(this.components).length===Object.keys(a.components).length&&Object.keys(this.components).every(b=>b in a.components&&this.components[b].equals(a.components[b])):!1}constructor(a){super();this.components=a;this.id={}}};var tpb;
__c.spb=class extends Wr{$R(){const a=this.sba,b=this.Ahb,c=this.NOa,d={};for(const e in a)d[e]=this.values[e];for(const e in b)d[e]=b[e].kc(this.Xb[e]);for(const e in c)d[e]=c[e].kc(this.attributes[e]);return d}destroy(a){const b=this.sba,c=this.Ahb,d=this.NOa,e=this.DSc;for(const f in b)Plb(b[f],this.values[f],a[f]);for(const f in c)Dq(c[f],a[f],this.ahd[f],this.Xb[f]);for(const f in d)Dq(d[f],a[f],this.WJc[f],this.attributes[f]);if(e)try{e()}catch(f){Promise.reject(f)}}Ai(a){const b=this.sba,c=
this.Ahb,d=this.NOa;for(const e in b)if(!b[e].Cv(this.values[e],a[e]))return!1;for(const e in c)if(!c[e].Ai(this.Xb[e],a[e]))return!1;for(const e in d)if(!d[e].Ai(this.attributes[e],a[e]))return!1;return!0}cY(a){for(const b in a)null!=a[b]&&(b in this.Ahb?this.ahd[b].next(a[b]):b in this.NOa&&this.WJc[b].next(a[b]))}getAttribute(a){return this.attributes[a].value}setAttribute(a,b){this.attributes[a].value=b}constructor(a,b,c,d,e,f){super();this.domain=a;this.sba=b;this.Ahb=c;this.NOa=d;this.DSc=void 0;
this.values=yq(b,(g,h)=>Olb(g,f[h]));a=yq(c,(g,h)=>{const k=qmb(this,h),{Uw:l,mutable:n}=Cq(g,f[h],k);return{ref:n,oMa:l,W9a:k}});this.Xb=yq(a,g=>g.ref);this.ahd=yq(a,g=>g.oMa);yq(a,g=>g.W9a);d=yq(d,(g,h)=>{const k=rmb(this,h),{Uw:l,mutable:n}=Cq(g,f[h],k);return{ref:n,oMa:l,W9a:k}});this.attributes=yq(d,g=>g.ref);this.WJc=yq(d,g=>g.oMa);yq(d,g=>g.W9a);if(e){const {Xb:g,attributes:h,Ofa:k}=e.create({...this.values,...this.Xb,...this.attributes});this.MOc=yq(e.Xb,(l,n)=>g[n]);this.x0b=yq(e.attributes,
(l,n)=>h[n]);this.DSc=k}else this.MOc={},this.x0b={}}};__c.spb.prototype.zQ=ea(95);os=__c.os=Symbol("$impl");tpb=class extends Vr{};
__c.upb=class extends tpb{My(a){a=new __c.spb(this.domain,this.values,this.Xb,this.attributes,this.computed,a);const b={...a.values,...a.Xb,...a.MOc};Object.defineProperties(b,this.BEe);Object.defineProperty(b,os,{enumerable:!1,writable:!1,value:a});return b}connect(a,b){return a[os].connect(b)}kc(a){return a[os].kc()}destroy(a,b){a[os].destroy(b)}Ai(a,b){return a[os].Ai(b)}Di({values:a={},Xb:b={},attributes:c={},computed:d}){return new __c.upb({...this.values,...a},{...this.Xb,...b},{...this.attributes,
...c},smb(this.computed,d))}constructor(a,b,c,d){super(Ur,Ur);this.values=a;this.Xb=b;this.attributes=c;this.computed=d;this.domain=omb(yq(this.values,e=>new Eob((f,g)=>e.Cv(f,g))),yq(this.Xb,e=>e.domain),yq(this.attributes,e=>e.domain));pmb(a,{...b,...(null===d||void 0===d?void 0:d.Xb)},{...c,...(null===d||void 0===d?void 0:d.attributes)});a=yq(c,(e,f)=>({enumerable:!0,get(){return this[os].getAttribute(f)},set(g){this[os].setAttribute(f,g)}}));d=yq((null===d||void 0===d?void 0:d.attributes)||{},
(e,f)=>({enumerable:!0,get(){return this[os].x0b[f].value},set(g){this[os].x0b[f].value=g}}));this.BEe={...a,...d}}};__c.upb.prototype.zQ=ea(94);var tmb=new __c.upb({},{},{});var vpb=class extends Tr{eJ(a){return a}isIdentity(a){return 0===a}compose(a,b){return a+b}transform(a,b){return[b,a]}Hj(a,b){return a===b}identity(){return 0}apply(a,b){return a+b}Yk(a,b){return a-b}Th(a,b){return a===b}},wpb=class extends vpb{Ik(a){return 0-a}equals(a){return this===a||a instanceof wpb}},xpb=class extends vpb{eJ(a){na(0<=a);return super.eJ(a)}compose(a,b){na(0<=a);na(0<=b);return super.compose(a,b)}transform(a,b){na(0<=a);na(0<=b);return super.transform(a,b)}Ik(a){na(0<=a);return 0}apply(a,
b){na(0<=b);return super.apply(a,b)}Yk(a,b){na(0<=b);return super.Yk(a,b)}equals(a){return this===a||a instanceof xpb}},ypb=new wpb,zpb=new xpb;var Apb=class extends Wr{cY(a){this._value.set(this.domain.apply(this._value.get(),a))}get value(){return this._value.get()}eJ(a){this.lq(this.domain.eJ(a))}$R(){return this.value}constructor(a,b){super();this.domain=a;this._value=new Xr(b)}},Bpb=class extends Vr{My(a){return new Apb(this.domain,a)}connect(a,b){return a.connect(b)}kc(a){return a.kc()}destroy(a,b){kq(this.domain,a.value,b)}Ai(a,b){a.eJ(b-a.value);return!0}},Cpb=class extends Bpb{constructor(){super(zq,zq);this.domain=ypb}},Dpb=class extends Bpb{Ai(a,
b){return b<a.value?!1:super.Ai(a,b)}constructor(){super(zq,zq);this.domain=zpb}};new Cpb;new Dpb;__c.ps=class{get values(){return this.list.get()}get empty(){return this.values.empty}count(){return this.values.count()}toArray(){return this.values.toArray()}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}first(a){return this.values.first(a)}last(a){return this.values.last(a)}next(a,b){return this.values.next(a,b)}En(a,b){return this.values.En(a,b)}has(a){return this.values.has(a)}set(a,b){return this.values.set(a,b)}replace(a,b){return this.values.replace(a,b)}append(a){return this.values.append(a)}prepend(a){return this.values.prepend(a)}FGa(a,
b){return this.values.FGa(a,b)}insertBefore(a,b){return this.values.insertBefore(a,b)}delete(a){return this.values.delete(a)}map(a){return this.values.map(a)}flatMap(a){return this.values.flatMap(a)}filter(a){return this.values.filter(a)}forEach(a){return this.values.forEach(a)}reduce(a,b){return this.values.reduce(a,b)}some(a){return this.values.some(a)}every(a){return this.values.every(a)}constructor(a){this.list=a}};__c.da=__c.ps.prototype;__c.da.sJ=ea(111);__c.da.IV=ea(106);__c.da.c9=ea(102);
__c.da.rq=ea(98);__c.da.wI=ea(92);__c.qs=class extends Wr{static F(a){N(a,{h9:Pr,Lp:Pr,empty:Pr,Kxb:Pr,SCb:Pr})}qIa(a){const b=Bq(this,e=>Tq(this).retain(this.qL(c)).update(e).build()),{mutable:c,Uw:d}=Cq(this.type,a,b);return{id:String(this.jFb++),value:c,to:d,from:b,toString:()=>`${c}`}}l3b(a,b){Dq(this.type,a,b.to,b.value)}get h9(){const a=new Map;this.BK.forEach((b,c)=>b&&a.set(b.value,c));return a}get Lp(){return this.BK.filter(__c.eb)}get(a){return(a=this.BK[a])&&a.value}qL(a){return m(this.h9.get(a),"ref not found")}cY(a){const b=
this.BK,c=new Map,d=new Map;var e=0;b.length<a.pre&&(b.length=a.pre);for(var f of a.ops)switch(f.type){case 0:case 2:e+=f.length;break;case 1:b.spliceWithArray(e,0,Array(f.length));e+=f.length;break;case 3:var g=f.state,h=f.shift;b.splice(e,0,null!=g?this.qIa(g):void 0);h&&(d.set(h.Sj,b[e]),c.set(h.qs,e));e++;break;case 4:var k=f.delta;g=f.shift;if(k)switch(k.type){case 0:h=k.delta;null!=h&&m(b[e]).to.next(h);break;case 1:h=k.oldState;k=k.newState;null==h?oa(null==b[e]):this.l3b(h,m(b[e]));b[e]=null!=
k?this.qIa(k):void 0;break;default:throw new r(k);}g&&(d.set(g.Sj,b[e]),c.set(g.qs,e));e++;break;default:throw new r(f);}oa(d.size===a.iKa);oa(c.size===a.iKa);for(e=0;e<a.iKa;e++)oa(d.has(e)),f=m(c.get(e)),b[f]=d.get(e);for(;b.length&&null==b[b.length-1];)b.length--}$R(){const a=[];this.BK.forEach((b,c)=>{null!=b&&(a[c]=this.type.kc(b.value))});return a}destroy(a){let b=0;this.BK.forEach((d,e)=>{null!=d&&(na(e in a),this.type.destroy(d.value,a[e]),b++)});const c=a.reduce(d=>d+1,0);na(b===c)}Ai(a){const b=
this.BK,c=Tq(this);for(let e=0;e<b.length;e++){const f=b[e];null!=f&&null!=a[e]&&this.type.Ai(f.value,a[e])||null==f&&null==a[e]?c.retain():c.change(f&&this.type.kc(f.value),a[e])}let d=b.length;a.forEach((e,f)=>{f>=b.length&&(c.retain(f-d),c.insert(e),d=f+1)});a=c.build();this.domain.isIdentity(a)||this.lq(c.build());return!0}get empty(){return!this.Lp.length}count(){return this.Lp.length}toArray(){return this.Lp.map(a=>a.value)}[Symbol.iterator](){return this.toArray()[Symbol.iterator]()}get Kxb(){const a=
this.Lp[0];return a&&a.value}get SCb(){const a=this.Lp[this.Lp.length-1];return a&&a.value}first(a){if(!a)return this.Kxb;const b=this.Lp.find(c=>a(c.value));return b&&b.value}last(a){if(!a)return this.SCb;const b=this.Lp;for(let c=b.length-1;0<=c;c--){const d=b[c];if(a(d.value))return d.value}}next(a,b){const c=this.BK;for(a=this.qL(a)+1;a<c.length;a++){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}En(a,b){const c=this.BK;for(a=this.qL(a)-1;0<=a;a--){const d=c[a];if(d&&(!b||b(d.value)))return d.value}}has(a){return this.h9.has(a)}insertAt(a,
b){this.lq(Tq(this).retain(a).insert(b).build());return this.BK[a].value}set(a,b){var c;na(0<=a);a>=this.BK.length&&(this.BK.length=a+1);const d=null===(c=this.BK[a])||void 0===c?void 0:c.value;c=null!=d?this.type.kc(d):void 0;this.lq(Tq(this).retain(a).change(c,b).build());return this.BK[a].value}replace(a,b){a=this.qL(a);return this.set(a,b)}append(a){return this.insertBefore(void 0,a)}prepend(a){return this.FGa(void 0,a)}FGa(a,b){return this.insertAt(a?this.qL(a)+1:0,b)}insertBefore(a,b){return this.insertAt(a?
this.qL(a):this.BK.length,b)}delete(a){a=Tq(this).retain(this.qL(a)).UV(this.type.kc(a)).build();this.lq(a)}moveTo(a,b){const c=this.qL(b);if(c===a)return b;this.lq(c<a?Tq(this).retain(c).retain(lq(0,1)).retain(a-c-1).expand(lq(1,0)).build():Tq(this).retain(a).expand(lq(0,1)).retain(c-a).retain(lq(1,0)).build());return b}map(a){return this.Lp.map(({value:b,id:c})=>a(b,c))}flatMap(a){return this.Lp.flatMap(({value:b,id:c})=>a(b,c))}filter(a){return this.Lp.filter(b=>a(b.value,b.id)).map(b=>b.value)}forEach(a){this.Lp.forEach(b=>
null!=b&&a(b.value,b.id))}reduce(a,b){return this.Lp.reduce((c,d)=>a(c,d.value,d.id),b)}some(a){return this.Lp.some(b=>a(b.value,b.id))}every(a){return this.Lp.every(b=>a(b.value,b.id))}constructor(a,b,c){super();__c.qs.F(this);this.type=a;this.domain=b;this.jFb=0;na(!c.length||null!=c[c.length-1]);this.BK=Qr.array([...c.map(d=>this.qIa(d))],{deep:!1})}};__c.da=__c.qs.prototype;__c.da.j3=ea(112);__c.da.sJ=ea(110);__c.da.IV=ea(105);__c.da.c9=ea(101);__c.da.rq=ea(97);__c.da.wI=ea(91);
__c.umb=class extends Vr{wg(){return this.domain.wg()}Bm(a){return a}My(a){return new __c.qs(this.type,this.domain,a)}connect(a,b){return this.Bm(a).connect(b)}kc(a){return this.Bm(a).kc()}destroy(a,b){this.Bm(a).destroy(b)}Ai(a,b){return this.Bm(a).Ai(b)}constructor(a,b){super(Ur,b);this.type=a;this.domain=new Qob(this.type.domain)}};__c.umb.prototype.MA=ea(114);__c.rs=class{get empty(){return this.list.empty}count(){return this.list.count()}toArray(){return this.list.toArray()}first(a){return this.list.first(a)}last(a){return this.list.last(a)}next(a,b){return this.list.next(a,b)}En(a,b){return this.list.En(a,b)}has(a){return this.list.has(a)}map(a){return this.list.map(a)}flatMap(a){return this.list.flatMap(a)}filter(a){return this.list.filter(a)}forEach(a){this.list.forEach(a)}reduce(a,b){return this.list.reduce(a,b)}some(a){return this.list.some(a)}every(a){return this.list.every(a)}[Symbol.iterator](){return this.list[Symbol.iterator]()}set(){return Vq()}replace(){return Vq()}FGa(){return Vq()}insertBefore(){return Vq()}append(){return Vq()}prepend(){return Vq()}delete(){return Vq()}constructor(a){this.list=
a}};__c.da=__c.rs.prototype;__c.da.sJ=ea(109);__c.da.IV=ea(104);__c.da.c9=ea(100);__c.da.rq=ea(96);__c.da.wI=ea(90);var Epb;Epb=class extends Tr{isIdentity(a){throw new r(a);}compose(a){throw new r(a);}transform(a){throw new r(a);}Ik(a){throw new r(a);}Hj(a){throw new r(a);}identity(a){throw new r(a);}apply(a){throw new r(a);}Yk(a){throw new r(a);}Th(a){throw new r(a);}equals(a){return this===a||a instanceof Epb}};__c.Fpb=new Epb;var Gpb,Hpb,Lpb,Mpb,Npb,Opb,vs,Qpb,Rpb,Ppb;Gpb=class{};ss=__c.ss=class extends Gpb{get length(){return this.state.length}WPb(a){vmb(this,a);return this.state.charAt(a)}bR(a){wmb(this,a);return[new ss(this.state.substring(0,a)),new ss(this.state.substring(a))]}VH(){return this}toString(){return this.state}constructor(a){super();this.state=a;this.type=0;na(!!a)}};
Zq=__c.Zq=class extends Gpb{get length(){return 1}WPb(a){vmb(this,a);return this.state}bR(a){wmb(this,a);throw Error();}VH(a){return new Zq(a(this.state))}toString(){return`[${this.state}]`}constructor(a){super();this.state=a;this.type=1}};
ts=__c.ts=class extends Gpb{get length(){return this.state}WPb(a){vmb(this,a)}bR(a){wmb(this,a);return[new ts(a),new ts(this.state-a)]}VH(){return this}toString(){return 7>=this.state?"\u00b7".repeat(this.state):`\u00b7\u00b7(${this.state})\u00b7\u00b7`}constructor(a){super();this.state=a;this.type=2;na(!!a)}};
__c.us=class{get length(){return this.Hja+this.zq+this.Nxc}cd(a){return new Hpb(this,a)}cursor(a,b){return new __c.Ipb(this,a,b)}VH(a){const b=this.jz.map(c=>c.VH(a));return new __c.us(b,this.Hja,this.zq,this.Nxc)}cb(){return this.jz.map(a=>0===a.type?a.state:"").join("")}forEach(a,b){for(const c of this.jz)switch(c.type){case 0:b.cb&&b.cb(c.state);break;case 1:b.item(c.state);break;case 2:b.uj&&b.uj(c.state);break;default:throw new r(c);}(a=Math.max(0,a-this.length))&&b.uj&&b.uj(a)}map(a,b){const c=
this.jz.map(d=>{switch(d.type){case 0:return b.cb(d.state);case 1:return b.item(d.state);case 2:return b.uj(d.state);default:throw new r(d);}});(a=Math.max(0,a-this.length))&&c.push(b.uj(a));return c}reduce(a,b){return this.jz.reduce((c,d)=>{switch(d.type){case 0:return a.cb(c,d.state);case 1:return a.item(c,d.state);case 2:return a.uj?a.uj(c,d.state):c;default:throw new r(d);}},b)}slice(a,b){na(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.Jpb;
const d=new __c.Kpb;c=this.cursor(b);c.bQ(a);c.bQ(b-a,{item:e=>d.item(e),cb:e=>d.je(e),uj:e=>d.xI(e)});return d.build()}toString(){return this.jz.join("")}constructor(a,b,c,d){this.jz=a;this.Hja=b;this.zq=c;this.Nxc=d;a=a.length?a[a.length-1]:void 0;na(!a||2!==a.type)}};__c.us.prototype.BCb=ea(115);__c.Jpb=new __c.us([],0,0,0);
__c.Kpb=class{rha(a){this.mode!==a&&(this.flush(),this.mode=a)}flush(){if(null!=this.mode){switch(this.mode){case 0:this.jz.push(new ss(this.Dhb));this.lsb+=this.Dhb.length;this.Dhb="";break;case 2:this.jz.push(new ts(this.Ehb));this.yOb+=this.Ehb;this.Ehb=0;break;default:throw new r(this.mode);}this.mode=void 0}}region(a){switch(a.type){case 0:return this.je(a.state);case 1:return this.item(a.state);case 2:return this.xI(a.state);default:throw new r(a);}}je(a){a&&(this.rha(0),this.Dhb+=a);return this}item(a){this.flush();
this.jz.push(new Zq(a));this.Aec++;return this}xI(a){0<a&&(this.rha(2),this.Ehb+=a);return this}append(a,b=0){a.forEach(b,{cb:c=>this.je(c),item:c=>this.item(c),uj:c=>this.xI(c)});return this}get length(){return this.lsb+this.Aec+this.yOb}build(){2!==this.mode&&this.flush();return this.length?new __c.us(this.jz,this.lsb,this.Aec,this.yOb):__c.Jpb}constructor(){this.jz=[];this.mode=void 0;this.Dhb="";this.yOb=this.Aec=this.lsb=this.Ehb=0}};
Hpb=class{get head(){return this.Hl}get prevValue(){return this.Mgb&&this.Mgb.WPb(this.Mgb.length-1)}Tm(a){const b=m(this.Hl),c=b.length;na(0<a&&a<=c,"{} \u2209 (0, {}]",a,c);if(a<c)return a=b.bR(a),this.Hl=a[1],this.Mgb=a[0];this.Hl=this.jz[this.i++];return this.Mgb=b}finish(){oa(null==this.Hl,"unconsumed reader head: {}",this.Hl)}constructor(a,b=0){this.i=0;this.Mgb=void 0;this.jz=(b=Math.max(0,b-a.length))?[...a.jz,new ts(b)]:a.jz;this.Hl=this.jz.length?this.jz[this.i++]:void 0}};
__c.Ipb=class{get prevValue(){return this.cd.prevValue}move(a,b,c){for(c=__c.xmb(this.jdb,c);a;){var d=this.cd.head;if(d)switch(d=this.cd.Tm(b||2!==d.type?Math.min(d.length,a):d.length),d.type){case 0:c&&c.cb&&c.cb(d.state);a-=d.length;break;case 1:c&&c.item&&c.item(d.state);a-=d.length;break;case 2:c&&c.uj&&c.uj(d.state);b&&(a-=d.length);break;default:throw new r(d);}else na(b,"not enough characters or items: {}",a),c&&c.uj&&c.uj(a),a-=a}}bQ(a,b){this.move(a,!0,b)}cn(a,b){this.move(a,!1,b)}finish(){this.cd.finish()}constructor(a,
b,c){this.jdb=c;this.cd=a.cd(b)}};__c.Ipb.prototype.gIa=ea(116);__c.Ipb.prototype.sJ=ea(108);Lpb=class{};Mpb=class extends Lpb{get o$(){return this.length}get w_(){return this.length}FMb(a){ymb(this,a);return this.bR(a)}EMb(a){zmb(this,a);return this.bR(a)}bR(a){return[new Mpb(a),new Mpb(this.length-a)]}map(){return this}toString(){return`R${this.length}`}constructor(a){super();this.length=a;this.type=0}};
Npb=class extends Lpb{get o$(){return 1}get w_(){return 1}FMb(a){ymb(this,a);throw Error();}EMb(a){zmb(this,a);throw Error();}map(a){return new Npb(a(this.delta))}toString(){return`U[${this.delta}]`}constructor(a){super();this.delta=a;this.type=1}};
Opb=class extends Lpb{get o$(){return 0}get w_(){return this.state.length}FMb(a){ymb(this,a);throw Error();}EMb(a){zmb(this,a);const [b,c]=this.state.bR(a);return[new Opb(b),new Opb(c)]}map(a,b){return new Opb(this.state.VH(b))}toString(){switch(this.state.type){case 0:case 1:return`I${this.state}`;case 2:return`X${this.state.length}`;default:throw new r(this.state);}}constructor(a){super();this.state=a;this.type=2}};
vs=class extends Lpb{get o$(){return this.oldState.length}get w_(){return this.newState.length}FMb(a){ymb(this,a);return this.bR(a)}EMb(a){zmb(this,a);return this.bR(a)}bR(a){const [b,c]=this.oldState.bR(a),[d,e]=this.newState.bR(a);return[new vs(b,d),new vs(c,e)]}map(a,b){return new vs(this.oldState.VH(b),this.newState.VH(b))}toString(){return 2===this.oldState.type?2===this.newState.type?`\u25e0${this.oldState.state}`:`\u2191${this.newState}`:2===this.newState.type?`\u2193${this.oldState}`:`\u25e1[${this.oldState}|${this.newState}]`}constructor(a,
b){super();this.oldState=a;this.newState=b;this.type=3;sa(a.length,b.length)}};
Qpb=class{cd(a,b){return new Ppb(this,a,b)}forEach(a,b=this.pre,c=this.post){for(const d of this.ops)switch(d.type){case 0:a.retain&&a.retain(d.length);break;case 1:a.update&&a.update(d.delta);break;case 2:a.insert&&a.insert(d.state);break;case 3:a.change&&a.change(d.oldState,d.newState);break;default:throw new r(d);}(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length);case 1:return a.update(b.delta);case 2:return a.insert(b.state);
case 3:return a.change(b.oldState,b.newState);default:throw new r(b);}})}VH(a,b){const c=this.ops.map(d=>d.map(a,b));return new Qpb(c,this.pre,this.post)}toString(){return`[${this.ops.toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};Rpb=new Qpb([],0,0);
__c.Spb=class{rha(a,b,c){if(this.I_!==a||this.cjc!==b||this.wic!==c)switch(this.flush(),this.I_=a,this.cjc=b,this.wic=c,a){case 0:break;case 2:0===c&&(this.OW="");break;case 3:0===b&&(this.Bwa="");0===c&&(this.OW="");break;default:throw new r(a);}}flush(){if(null!=this.I_){switch(this.I_){case 0:this.push(new Mpb(this.acc));this.acc=0;break;case 2:var a=null!=this.OW?new ss(this.OW):new ts(this.acc);this.push(new Opb(a));this.OW=void 0;this.acc=0;break;case 3:a=null!=this.Bwa?new ss(this.Bwa):new ts(this.acc);
const b=null!=this.OW?new ss(this.OW):new ts(this.acc);this.push(new vs(a,b));this.OW=this.Bwa=void 0;this.acc=0;break;default:throw new r(this.I_);}this.wic=this.cjc=this.I_=void 0}}push(a){this.ops.push(a);this.pre+=a.o$;this.post+=a.w_}op(a){switch(a.type){case 0:return this.retain(a.length);case 1:return this.update(a.delta);case 2:return this.cva(a.state);case 3:return Xq(this,a.oldState,a.newState);default:throw new r(a);}}cva(a){switch(a.type){case 0:return this.insert(a.state);case 1:return this.insert(a.state);
case 2:return this.expand(a.state);default:throw new r(a);}}retain(a){na(0<=a);a&&(this.rha(0),this.acc+=a);return this}update(a){if(this.isIdentity(a))return this.retain(1);this.flush();this.ops.push(new Npb(a));this.pre++;this.post++;return this}expand(a){na(0<=a);a&&(this.rha(2,void 0,2),this.acc+=a);return this}insert(a){"string"===typeof a?a&&(this.rha(2,void 0,0),this.OW+=a):(this.flush(),this.push(new Opb(new Zq(a))));return this}gpa(a){na(0<=a);a&&(this.rha(3,2,2),this.acc+=a);return this}D0a(a){"string"===
typeof a?a&&(this.rha(3,2,0),this.acc+=a.length,this.OW+=a):(this.flush(),this.push(new vs(new ts(1),new Zq(a))));return this}UV(a){"string"===typeof a?a&&(this.rha(3,0,2),this.acc+=a.length,this.Bwa+=a):(this.flush(),this.push(new vs(new Zq(a),new ts(1))));return this}change(a,b){"string"===typeof a?"string"===typeof b?(sa(a.length,b.length),a&&(this.rha(3,0,0),this.Bwa+=a,this.OW+=b)):(sa(a.length,1),this.flush(),this.push(new vs(new ss(a),new Zq(b)))):"string"===typeof b?(sa(1,b.length),this.flush(),
this.push(new vs(new Zq(a),new ss(b)))):(this.flush(),this.push(new vs(new Zq(a),new Zq(b))));return this}build(){0!==this.I_&&this.flush();return new Qpb(this.ops,this.pre,this.post)}constructor(a){this.isIdentity=a;this.ops=[];this.post=this.pre=0;this.wic=this.cjc=this.I_=void 0;this.acc=0;this.OW=this.Bwa=void 0}};__c.Spb.prototype.dva=ea(119);
Ppb=class{get head(){return this.Hl}finish(){oa(null==this.Hl)}constructor(a,b=0,c=0){this.ops=(b=Math.max(0,b-a.pre,c-a.post))?[...a.ops,new Mpb(b)]:a.ops;this.i=0;this.Hl=this.ops[this.i++]}};
__c.Tpb=class extends Tr{wg(){return new __c.Spb(a=>this.component.isIdentity(a))}fg(){return new __c.Kpb}id(){return Rpb}YM(){return __c.Jpb}isIdentity(a){return!a.ops.length||a.ops.every(b=>0===b.type)}compose(a,b){if(!a.ops.length)return b;if(!b.ops.length)return a;const c=a.cd(0,b.pre),d=b.cd(a.post,0),e=this.wg();for(;;){let g=c.head;var f=d.head;if(!f)break;2===f.type?(g=void 0,f=Yq(d)):g&&(f=Math.min(g.w_,f.o$),g=Bmb(c,f),f=__c.Amb(d,f));if(2===f.type)e.cva(f.state);else if(g)2===g.type?e.cva(Dmb(this,
g.state,f)):0===f.type?e.op(g):0===g.type?e.op(f):1===g.type?1===f.type?e.update(this.component.compose(g.delta,f.delta)):Xq(e,Emb(this,f.oldState,g),f.newState):Xq(e,g.oldState,Dmb(this,g.newState,f));else throw Error(`length mismatch: ${a} ; ${b}`);}c.finish();d.finish();return e.build()}transform(a,b){if(!a.ops.length||!b.ops.length)return[b,a];const c=this.wg(),d=this.wg(),e=a.cd(b.pre,0),f=b.cd(a.pre,0);for(;;){let h=e.head;var g=f.head;if(!h&&!g)break;h&&2===h.type?(h=Yq(e),g=void 0):g&&2===
g.type?(h=void 0,g=Yq(f)):h&&g&&(g=Math.min(h.o$,g.o$),h=__c.Amb(e,g),g=__c.Amb(f,g));if(h&&2===h.type)d.retain(h.w_),c.op(h);else if(g&&2===g.type)d.op(g),c.retain(g.w_);else if(h&&g)if(0===h.type||0===g.type)d.op(g),c.op(h);else if(3===h.type)d.retain(h.w_),Xq(c,Dmb(this,h.oldState,g),h.newState);else if(3===g.type)Xq(d,Dmb(this,g.oldState,h),g.newState),c.retain(g.w_);else{const [k,l]=this.component.transform(h.delta,g.delta);d.update(k);c.update(l)}else throw Error(`length mismatch (${a} x ${b})`);
}e.finish();f.finish();return[d.build(),c.build()]}Ik(a){if(!a.ops.length)return a;const b=this.wg();for(const c of a.ops)switch(c.type){case 0:b.retain(c.length);break;case 1:b.update(this.component.Ik(c.delta));break;case 2:a=c.state;2===a.type?b.retain(a.length):b.UV(a.state);break;case 3:a=c.oldState;const d=c.newState;2===a.type&&2===d.type?b.retain(a.length):Xq(b,d,a);break;default:throw new r(c);}return b.build()}Hj(a,b){if(a===b)return!0;if(a.ops.length!==b.ops.length)return!1;for(let c=0;c<
a.ops.length;c++)if(!this.$lc(a.ops[c],b.ops[c]))return!1;return!0}$lc(a,b){switch(a.type){case 0:return 0===b.type&&a.length===b.length;case 1:return 1===b.type&&this.component.Hj(a.delta,b.delta);case 2:return 2===b.type&&Fmb(this,a.state,b.state);case 3:return 3===b.type&&Fmb(this,a.oldState,b.oldState)&&Fmb(this,a.newState,b.newState);default:throw new r(a);}}identity(){return Rpb}apply(a,b){const c=this.fg(),d=a.cd(b.pre);for(a=b.cd(a.length,0);;){b=d.head;var e=a.head;if(!e)break;2===e.type?
(b=void 0,e=Yq(a)):b&&(e=Math.min(b.length,e.o$),b=d.Tm(e),e=__c.Amb(a,e));if(2===e.type)c.region(e.state);else if(b)c.region(Dmb(this,b,e));else break}d.finish();a.finish();return c.build()}Yk(a,b){const c=this.fg(),d=a.cd(b.post);for(a=b.cd(0,a.length);;){b=d.head;var e=a.head;if(!b||!e)break;2===e.type?(b=d.Tm(e.w_),e=Yq(a)):(e=Math.min(b.length,e.w_),b=d.Tm(e),e=Bmb(a,e));if(2===e.type)__c.Cmb(this,b,e.state);else if(b)c.region(Emb(this,b,e));else break}d.finish();a.finish();return c.build()}Th(a,
b){if(a===b)return!0;if(a.length!==b.length)return!1;a=a.cd();b=b.cd();let c=a.head,d=b.head;for(;c||d;){if(!c||!d||!Fmb(this,c,d))return!1;a.Tm(c.length);b.Tm(d.length);c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof __c.Tpb&&this.component.equals(a.component)}constructor(a){super();this.component=a}};__c.Tpb.prototype.eD=ea(124);__c.$q=new __c.Tpb(__c.Fpb);ar=__c.ar={item:a=>{throw new r(a);}};var Upb;Upb=class{forEach(a,b=this.pre,c=this.post){this.ops.forEach(d=>{switch(d.type){case 0:a.retain&&a.retain(d.cb);break;case 2:a.insert&&a.insert(d.cb);break;case 1:a.delete&&a.delete(d.cb);break;default:throw new r(d);}});(b=Math.max(0,b-this.pre,c-this.post))&&a.retain&&a.retain(b)}static JF(){return new br}constructor(a,b,c){this.pre=a;this.post=b;this.ops=c}};
br=__c.br=class{static insert(a,b){return(new br).retain(a).insert(b).build()}static delete(a,b){return(new br).retain(a).delete(b).build()}retain(a){na(0<=a);0<a&&(this.V5(0),this.VYa+=a);return this}insert(a){0<a.length&&(this.V5(2),this.rbb+=a);return this}delete(a){0<a&&(this.V5(1),this.PQa+=a);return this}V5(a){if(this.mode!==a){switch(this.mode){case 0:var b=this.ops,c=b.push,d=this.VYa;na(0<d);c.call(b,{type:0,cb:d});this.pre+=this.VYa;this.post+=this.VYa;this.VYa=0;break;case 2:b=this.ops;
c=b.push;d=this.rbb;na(0<d.length);c.call(b,{type:2,cb:d});this.post+=this.rbb.length;this.rbb="";break;case 1:b=this.ops;c=b.push;d=this.PQa;na(0<d);c.call(b,{type:1,cb:d});this.pre+=this.PQa;this.post+=this.PQa;this.PQa=0;break;case void 0:break;default:throw new r(this.mode);}this.mode=a}}build(){0!==this.mode&&this.V5();return new Upb(this.pre,this.post,this.ops)}constructor(){this.ops=[];this.post=this.pre=0;this.mode=void 0;this.VYa=0;this.rbb="";this.PQa=0}};__c.Vpb=class extends Wr{static F(a){N(a,{cb:Pr})}get cb(){return this.state.get().cb()}insert(a,b){this.lq(__c.Gmb(this.state.get(),br.insert(a,b)))}delete(a,b){this.lq(__c.Gmb(this.state.get(),br.delete(a,b)))}cY(a){const b=Hmb(this.state.get(),a);this.state.set(__c.$q.apply(this.state.get(),a));this.subject.next(b)}$R(){return this.state.get()}destroy(a){na(__c.$q.Th(this.state.get(),a))}Ai(a){return __c.$q.Th(this.state.get(),a)}constructor(a,b){super();__c.Vpb.F(this);this.domain=a;this.subject=
new __c.uob;this.state=new Xr(b)}};__c.Vpb.prototype.JM=ea(129);var Wpb=class extends Tob{Bm(a){return a}My(a){return new __c.Vpb(this.domain,a)}connect(a,b){return this.Bm(a).connect(b)}kc(a){return this.Bm(a).kc()}destroy(a,b){this.Bm(a).destroy(b)}Ai(a,b){return this.Bm(a).Ai(b)}constructor(){super();this.domain=__c.$q}};new Wpb;__c.Xpb=class extends Tr{get target(){return m(this.QVb)}isIdentity(a){return this.target.isIdentity(a)}compose(a,b){return this.target.compose(a,b)}transform(a,b){return this.target.transform(a,b)}Ik(a){return this.target.Ik(a)}Hj(a,b){return this.target.Hj(a,b)}identity(a){return this.target.identity(a)}apply(a,b){return this.target.apply(a,b)}Yk(a,b){return this.target.Yk(a,b)}Th(a,b){return this.target.Th(a,b)}equals(a){return this===a||a instanceof __c.Xpb&&this.target.equals(a.target)}constructor(){super();
this.QVb=void 0}};__c.Xpb.prototype.gha=ea(131);__c.ws=class extends Vr{get type(){return m(this.SVb)}My(a){return this.type.My(a)}connect(a,b){return this.type.connect(a,b)}kc(a){return this.type.kc(a)}destroy(a,b){this.type.destroy(a,b)}Ai(a,b){return this.type.Ai(a,b)}constructor(){super(new Rob(()=>this.type.b3b),new Rob(()=>this.type.Wpa));this.SVb=void 0;this.domain=new __c.Xpb}};__c.ws.prototype.gha=ea(130);var Ypb,dqb,Zpb,$pb;Ypb=Jmb({},{});
__c.cqb=class{cd(a){return new Zpb(this,a)}cursor(a,b){return new $pb(this,a,b)}forEach(a,{grad:b,uc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.uE,d.RF);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}map(a,{grad:b,uc:c}){const d=this.items.map(e=>{switch(e.type){case 0:return b(e.uE,e.RF);case 1:return c(e.length);default:throw new r(e);}});(a=Math.max(0,a-this.length))&&d.push(c(a));return d}reduce({grad:a,uc:b},c){return this.items.reduce((d,
e)=>{switch(e.type){case 0:return a?a(d,e.uE,e.RF):d;case 1:return b?b(d,e.length):d;default:throw new r(e);}},c)}slice(a,b){na(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return __c.aqb;const d=new __c.bqb;c=this.cursor(b);c.move(a);d.attrs(c.MN,c.pga);c.move(b-a,{cells:(e,f,g,h)=>d.attrs(f,h).uc(e)});return d.build()}toString(){return`${this.items.map(a=>{switch(a.type){case 0:const b=[];for(const [c,d]of Object.entries(a.RF))b.push(`${c}:${null!=
d?`<${d}|`:""}`);return`G{${b.join(",")}}`;case 1:return`R${a.length}`;default:throw new r(a);}}).join("")}`}constructor(a,b,c={}){this.items=a;this.length=b;this.attributes=c;a=a.length?a[a.length-1]:void 0;na(!a||1!==a.type)}};__c.cqb.prototype.UDb=ea(132);__c.aqb=new __c.cqb([],0);
__c.eqb=class{cd(a,b){return new dqb(this,a,b)}forEach(a){for(const b of this.ops)switch(b.type){case 0:a.retain(b.length,b.changes);break;case 1:a.insert(b.length,b.changes);break;default:throw new r(b);}}map(a){return this.ops.map(b=>{switch(b.type){case 0:return a.retain(b.length,b.changes);case 1:return a.insert(b.length,b.changes);default:throw new r(b);}})}equals(a){if(this===a)return!0;if(this.pre!==a.pre||this.post!==a.post||this.ops.length!==a.ops.length)return!1;for(let b=0;b<this.ops.length;b++){const c=
this.ops[b],d=a.ops[b];if(c!==d)switch(c.type){case 0:case 1:if(c.type!==d.type||c.length!==d.length||!Nmb(c.changes,d.changes))return!1;break;default:throw new r(c);}}return!0}toString(){return`[${this.ops.map(a=>{let b;switch(a.type){case 0:b="R";break;case 1:b="I";break;default:throw new r(a);}const c=[];__c.Mmb(a.changes,({r:e},f)=>{e?c.push(`+"${f.toString()}":${null!=e.so?`"${e.so}"`:"null"}=>${null!=e.sn?`"${e.sn}"`:"null"}`):c.push(`-"${f.toString()}"`)});const d=c.length?`{${c.join(",")}}`:
"";return`${b}${a.length}${d}`}).toString()}]`}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}};__c.fqb=new __c.eqb([],0,0);
dqb=class{get OL(){return this.rpb}get next(){return this._next}Iz(a,b){const c=m(this._next);oa(c.type===a,"{} != {}",c.type,a);na(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);for(const [d,e]of Object.entries(c.changes)){const f=e&&e.r;f?this.rpb[d]=f:delete this.rpb[d]}b<c.length?this._next={type:a,length:c.length-b,changes:{}}:(this._next=this.i<this.input.length?this.input[this.i++]:void 0,!this._next&&this.B_a&&(this._next=Omb(this.B_a,iq(this.rpb,()=>({r:void 0}))),this.B_a=0));return c.changes}Jy(a){return this.Iz(0,
a)}Uca(a){return this.Iz(1,a)}finish(){oa(!this._next)}constructor(a,b=0,c=0){this.i=0;this.rpb={};this.input=a.ops;this._next=this.i<this.input.length?this.input[this.i++]:void 0;this.B_a=Math.max(0,b-a.pre,c-a.post);!this._next&&this.B_a&&(this._next=Omb(this.B_a),this.B_a=0)}};
Zpb=class{get head(){return this.Hl}get MN(){return this.hH}get pga(){return this.PVb}Tm(a){var b=this.Hl;if(!b||1!==b.type)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Hl=a<b?Kmb(b-a):this.input[this.i++];return a}apply(a){__c.dr(a.uE,a.RF,(b,c,d)=>{null!=c&&null!=d?(this.hH[b]=c,this.PVb[b]=d):(delete this.hH[b],delete this.PVb[b])})}Dt(){const a=this.Hl;if(!a||1===a.type)return Ypb;this.Hl=this.input[this.i++];this.apply(a);return a}finish(){oa(!this.Hl)}constructor(a,
b=0){this.i=0;this.hH={};this.PVb={};b=Math.max(0,b-a.length);this.length=a.length+b;this.input=b?[...a.items,Kmb(b)]:a.items;this.Hl=this.input.length?this.input[this.i++]:void 0}};
$pb=class{get kA(){return this.cd.length-this.Wba}get MN(){return this.cd.MN}get pga(){return this.cd.pga}move(a,b){var c=this.jdb;b=c?b?{cells:__c.Wq(c.cells,b.cells)}:c:b;na(0<=a,"{} < 0",a);a=this.Wba+a;for(na(a<=this.cd.length,"{} > {}",a,this.cd.length);this.Wba<a;){c=this.cd.Dt();const d=this.cd.Tm(a-this.Wba);this.Wba+=d;b&&b.cells&&b.cells(d,c.uE,this.MN,c.RF,this.pga)}}finish(){this.cd.Dt();this.cd.finish()}constructor(a,b,c){this.jdb=c;this.Wba=0;this.cd=new Zpb(a,b)}};
__c.bqb=class{Il(a,b,c){this.ss[a]!==c?(this.uE[a]=b,this.RF[a]=c):(delete this.uE[a],delete this.RF[a]);return this}attrs(a,b){__c.dr(a,b,(c,d,e)=>this.Il(c,d,e));return this}uc(a){0<a&&(Object.keys(this.uE).length&&(this.length&&(this.items.push(Kmb(this.length)),this.length=0),this.items.push(Jmb(this.uE,this.RF)),__c.dr(this.uE,this.RF,(b,c,d)=>{if(null!=c){this.as[b]=c;this.ss[b]=d;var e;(null!==(e=this.attributes[b])&&void 0!==e?e:this.attributes[b]=new Set).add(c)}else delete this.as[b],delete this.ss[b]}),
this.uE={},this.RF={}),this.length+=a,this.R0+=a);return this}append(a,b=0){a.forEach(b,{grad:(c,d)=>this.attrs(c,d),uc:c=>this.uc(c)});return this}build(){for(const a of __c.cr(this.as))this.Il(a);for(const a of __c.cr(this.uE))this.Il(a);Object.keys(this.uE).length?(oa(!!this.length,"attributes still open: {}",this.uE),this.items.push(Kmb(this.length)),this.items.push(Jmb(this.uE,this.RF)),this.length=0,this.uE={},this.RF={}):this.R0-=this.length;return new __c.cqb(this.items,this.R0,this.attributes)}constructor(){this.items=
[];this.attributes={};this.as={};this.ss={};this.length=this.R0=0;this.uE={};this.RF={}}};var fr,gqb,hqb,iqb,Smb,kqb,jqb,mqb,nqb,oqb,lqb;fr=class{static from(a){if(a instanceof fr)return a;if(Array.isArray(a)){const [b,c]=a;return new fr(b,c)}return new fr(a.from,a.to)}toString(){return`[${this.from},${this.to}]`}constructor(a,b){this.from=a;this.to=b}};
gqb=class{get isEmpty(){return!this.Ke.size}slice(a,b){na(0<=a&&a<=b,"invalid range: [{}, {})",a,b);const c=new Map;for(const [e,f]of this.Ke){var d=b<f.from||f.to<a?void 0:new fr(Math.max(f.from,a)-a,Math.min(f.to,b)-a);d&&c.set(e,d)}return new gqb(c)}toString(){return[...this.Ke].map(([a,b])=>`"${a}":${b}`).join(",")}constructor(a=new Map){this.Ke=a}};hqb=new gqb;
iqb=class{range(a,b){b?this.R6.set(a,fr.from(b)):this.R6.delete(a);return this}Ke(a){a.forEach((b,c)=>this.R6.set(c,fr.from(b)));return this}build(){return this.R6.size?new gqb(this.R6):hqb}constructor(){this.R6=new Map}};Smb=class{toString(){return`${this.p$||"_"}->${this.k$||"_"}`}constructor(a,b){this.p$=a;this.k$=b}};kqb=class{toString(){return`${jqb[this.type]}${this.length}`}constructor(a,b){this.type=a;this.length=b}};jqb={[0]:"R",[1]:"I"};
mqb=class{cd(a,b){return new lqb(this,a,b)}toString(){const a=this.Lca.join(""),b=[...this.Ke].map(([c,d])=>`"${c}":${d}`).join(",");return`{${a}|${b}}`}constructor(a,b,c,d){this.Lca=a;this.Ke=b;this.pre=c;this.post=d}};nqb=new mqb([],new Map,0,0);
oqb=class{append(a,b){na(0<=b,"{} < 0",b);if(!b)return this;this.I_===a?this.length+=b:(null!=this.I_&&this.ops.push(new kqb(this.I_,this.length)),this.I_=a,this.length=b);switch(a){case 0:this.pre+=b;this.post+=b;break;case 1:this.post+=b;break;default:throw new r(a);}return this}retain(a){return this.append(0,a)}insert(a){return this.append(1,a)}createRange(a,b){return this.JYa(a,void 0,b)}JYa(a,b,c){b=new Smb(b&&fr.from(b),c&&fr.from(c));this.Ke.set(a,b);return this}nKa(a){a.forEach((b,c)=>this.Ke.set(c,
b));return this}build(){const a=this.I_,b=this.length;0===a?(this.pre-=b,this.post-=b):null!=a&&this.ops.push(new kqb(a,b));return this.ops.length||this.Ke.size?new mqb(this.ops,this.Ke,this.pre,this.post):nqb}constructor(){this.ops=[];this.I_=void 0;this.post=this.pre=this.length=0;this.Ke=new Map}};
lqb=class{get next(){return this._next}get Znc(){return this.qpb}get fIb(){return this.$Na}get GGa(){return this.$Na-this.qpb}Iz(a,b){const c=m(this._next);oa(c.type===a,"{} != {}",c.type,a);na(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);this._next=b<c.length?new kqb(a,c.length-b):this.i<this.input.length?this.input[this.i++]:void 0}Jy(a){this.Iz(0,a);this.qpb+=a;this.$Na+=a}Uca(a){this.Iz(1,a);this.$Na+=a}finish(){oa(!this._next)}constructor(a,b=0,c=0){this.$Na=this.qpb=this.i=0;this.input=
(b=Math.max(0,b-a.pre,c-a.post))?[...a.Lca,new kqb(0,b)]:a.Lca;this._next=this.i<this.input.length?this.input[this.i++]:void 0}};
__c.pqb=class extends Tr{fg(){return new iqb}wg(){return new oqb}isIdentity(a){return!a.Lca.length&&!a.Ke.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=new Map,d=new Map,e=new Map;for(var f of Tmb(a.Ke,b.Ke)){var g=a.Ke.get(f),h=b.Ke.get(f);g&&h?(na(er(g.k$,h.p$)),e.set(f,new Smb(g.p$,h.k$))):g?c.set(f,g):h&&d.set(f,h)}f=this.wg();g=a.cd(0,b.pre);a=b.cd(a.post,0);b=g.next;for(h=a.next;h;){if(1===h.type)b=h.length,gr(c,void 0,g.fIb+a.GGa,b),a.Uca(b),f.insert(b);
else if(b)1===b.type?(b=Math.min(b.length,h.length),gr(d,a.Znc-g.GGa,void 0,-b),g.Uca(b),a.Jy(b),f.insert(b)):(b=Math.min(b.length,h.length),g.Jy(b),a.Jy(b),f.retain(b));else throw Error("length mismatch");b=g.next;h=a.next}g.finish();a.finish();f.nKa(e);f.nKa(c);f.nKa(d);return f.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return[b,a];var c=new Map,d=new Map;const e=new Map;for(var f of Tmb(a.Ke,b.Ke)){var g=a.Ke.get(f),h=b.Ke.get(f);g&&h?(na(er(g.p$,h.p$)),e.set(f,new Smb(h.k$,
g.k$))):g?c.set(f,g):h&&d.set(f,h)}g=a.cd(b.pre,0);h=b.cd(a.pre,0);f=this.wg();const k=this.wg();var l=g.next;let n=h.next;for(;l||n;){if(l&&1===l.type)l=l.length,gr(d,h.Znc+g.GGa,h.fIb+g.GGa,l),g.Uca(l),k.retain(l),f.insert(l);else if(n&&1===n.type)l=n.length,gr(c,g.Znc+h.GGa,g.fIb+h.GGa,l),gr(e,void 0,g.fIb+h.GGa,l),h.Uca(l),k.insert(l),f.retain(l);else if(l&&n)l=Math.min(l.length,n.length),g.Jy(l),h.Jy(l),k.retain(l),f.retain(l);else throw Error(`unreachable case: ${l} x ${n}`);l=g.next;n=h.next}g.finish();
h.finish();d=k.nKa(d).build();c=f.nKa(c).nKa(e).build();sa(d.post-d.pre,b.post-b.pre);sa(c.post-c.pre,a.post-a.pre);return[d,c]}Ik(a){if(!a.Ke.size)return nqb;const b=new Map(a.Ke);Pmb(a,{insert:(c,d,e)=>gr(b,e,void 0,c)});a=Vh(b,c=>new Smb(c.k$,c.p$));return new mqb([],a,0,0)}Hj(a,b){if(a===b)return!0;if(a.Lca.length!==b.Lca.length||a.Ke.size!==b.Ke.size)return!1;for(let e=0;e<a.Lca.length;e++){var c=a.Lca[e],d=b.Lca[e];if(c.type!==d.type||c.length!==d.length)return!1}for(const e of a.Ke.keys())if(c=
a.Ke.get(e),d=b.Ke.get(e),c?!(d&&er(c.p$,d.p$)&&er(c.k$,d.k$)):d)return!1;return!0}id(){return nqb}identity(){return nqb}apply(a,b){if(this.isIdentity(b)||!a.Ke.size&&!b.Ke.size)return a;const c=this.fg(),d=new Map(a.Ke);for(const [e,f]of b.Ke)na(er(a.Ke.get(e),f.p$)),d.delete(e),c.range(e,f.k$);Pmb(b,{insert:(e,f,g)=>Rmb(d,g,e)});return c.Ke(d).build()}Yk(a,b){if(this.isIdentity(b)||!a.Ke.size&&!b.Ke.size)return a;const c=this.fg(),d=new Map(a.Ke);for(const [e,f]of b.Ke)na(er(a.Ke.get(e),f.k$)),
d.delete(e),c.range(e,f.p$);Pmb(b,{insert:(e,f)=>Rmb(d,f,-e)});return c.Ke(d).build()}Th(a,b){const c=a.Ke,d=b.Ke;return a===b||c===d?!0:c.size===d.size&&[...c.keys()].every(e=>er(c.get(e),d.get(e)))}equals(a){return this===a||a instanceof __c.pqb}constructor(){super();this.YM=hqb}};__c.pqb.prototype.eD=ea(123);__c.qqb=new __c.pqb;var rqb=class extends Tr{isIdentity(a){return this.components[a.key].isIdentity(a.value)}compose(a,b){const c=Umb(a.key,b.key);return{key:c,value:this.components[c].compose(a.value,b.value)}}transform(a,b){const c=Umb(a.key,b.key),[d,e]=this.components[c].transform(a.value,b.value);return[{key:c,value:d},{key:c,value:e}]}Ik(a){return{key:a.key,value:this.components[a.key].Ik(a.value)}}Hj(a,b){return a.key===b.key&&this.components[a.key].Hj(a.value,b.value)}identity(a){return{key:a.key,value:this.components[a.key].identity(a.value)}}apply(a,
b){const c=Umb(a.key,b.key);return{key:c,value:this.components[c].apply(a.value,b.value)}}Yk(a,b){const c=Umb(a.key,b.key);return{key:c,value:this.components[c].Yk(a.value,b.value)}}Th(a,b){return a===b?!0:a.key===b.key&&this.components[a.key].Th(a.value,b.value)}equals(a){if(this===a)return!0;const b=this.components,c=a.components;a=Object.keys(b);const d=Object.keys(c);return a.length===d.length&&a.every(e=>e in c&&b[e].equals(c[e]))}constructor(a){super();this.components=a}};var sqb=class extends Tr{isIdentity(a){return this.sum.isIdentity(a)}compose(a,b){return this.sum.compose(a,b)}transform(a,b){return this.sum.transform(a,b)}Ik(a){return this.sum.Ik(a)}Hj(a,b){return this.sum.Hj(a,b)}identity(a){return this.sum.identity(Vmb(this,a))}apply(a,b){return this.sum.apply(Vmb(this,a),b).value}Yk(a,b){return this.sum.Yk(Vmb(this,a),b).value}Th(a,b){return a===b||this.sum.Th(Vmb(this,a),Vmb(this,b))}equals(a){return this===a||a instanceof sqb&&this.sum.equals(a.sum)}constructor(a,
b){super();this.components=a;this.fRa=b;this.sum=new rqb(this.components)}};var Wmb=class extends Vr{create(a,b,c){return super.create(a,b,c)}My(a){const b=this.fRa(a);return this.vK[b].My(a)}connect(a,b){const c=this.Xub(a),d=this.vK[c].connect(a,{next:e=>{b.next({key:c,value:e})},error:e=>b.error(e)});return{next:e=>{na(e.key===c);d.next(e.value)},complete:()=>d.complete()}}kc(a){const b=this.Xub(a);return this.vK[b].kc(a)}destroy(a,b){const c=this.Xub(a),d=this.fRa(b);na(c===d);this.vK[c].destroy(a,b)}Ai(a,b){const c=this.Xub(a),d=this.fRa(b);return c===d&&this.vK[c].Ai(a,
b)}constructor(a,b,c){super(Ur,Ur);this.vK=a;this.fRa=b;this.Xub=c;this.domain=new sqb(iq(this.vK,d=>d.domain),this.fRa)}};var tqb=class extends Tr{isIdentity(){return!0}compose(){return 1}transform(){return[1,1]}Ik(){return 1}Hj(){return!0}identity(){return 1}apply(){return 1}Yk(){return 1}Th(){return!0}equals(a){return this===a||a instanceof tqb}constructor(){super();this.unit=1}},uqb=new tqb;var vqb=class extends Vr{My(a){return a}connect(){return{next:()=>{},complete:()=>{}}}kc(a){return a}destroy(){}Ai(){return!0}constructor(){super(zq,zq);this.domain=uqb}};new vqb;var wqb=new Map,xqb=class extends Tr{isIdentity(a){return!a.size||Array.from(a.values()).every(b=>0===b)}compose(a,b){return Ymb(a,b)}transform(a,b){return[b,a]}Ik(a){return a.size?Vh(a,b=>-b):a}Hj(a,b){return Xmb(a,b)}identity(){return wqb}apply(a,b){return Ymb(a,b)}Yk(a,b){return Ymb(a,this.Ik(b))}Th(a,b){return Xmb(a,b)}equals(a){return this===a||a instanceof xqb}};var yqb,zqb;
yqb=class extends Wr{static F(a){N(a,{values:Pr.struct})}cY(a){for(const [b,c]of a)(a=(this.map.get(b)||0)+c)?this.map.set(b,a):this.map.delete(b)}$R(){return new Map(this.map)}Ai(a){const b=this.map,c=new Map;for(const [d,e]of b){const f=a.get(d)||0;e!==f&&c.set(d,f-e)}for(const [d,e]of a)!b.has(d)&&e&&c.set(d,e);this.lq(c);return!0}add(a){const b=this.map.get(a)||0;0<b||this.lq(new Map([[a,-b+1]]))}delete(a){const b=this.map.get(a)||0;b&&this.lq(new Map([[a,-b]]))}has(a){return 0<(this.map.get(a)||0)}get values(){return[...Zmb(this.map,
a=>0<a).keys()]}[Symbol.iterator](){return this.values[Symbol.iterator]()}constructor(a,b){super();yqb.F(this);this.domain=a;this.map=new pob(b)}};zqb=class extends Vr{My(a){return new yqb(this.domain,a)}connect(a,b){return a.connect(b)}kc(a){return a.kc()}destroy(a,b){na(this.domain.Th(a.kc(),b))}Ai(a,b){return a.Ai(b)}constructor(){super(Ur,Ur);this.domain=new xqb}};__c.Aqb=new zqb;var Bqb,Cqb,xs,Dqb,Eqb,Fqb,Gqb,Hqb,Iqb,Jqb,Kqb,Lqb,Mqb,Nqb,Oqb,Pqb;Bqb=Sq({attributes:{Vcc:Nq(Fq(1,2,3,4)),value:Nq(bs)}});Cqb=__c.Qq($r,Bqb);xs=Sq({attributes:{h_a:__c.is,ji:__c.is},Xb:{vha:Cqb}});Dqb=xs.Di({values:{type:Fq("brightness")}});Eqb=xs.Di({values:{type:Fq("contrast")}});Fqb=xs.Di({values:{type:Fq("highlights")}});Gqb=xs.Di({values:{type:Fq("shadows")}});Hqb=xs.Di({values:{type:Fq("whites")}});Iqb=xs.Di({values:{type:Fq("blacks")}});Jqb=xs.Di({values:{type:Fq("saturation")}});Kqb=xs.Di({values:{type:Fq("vibrance")}});
Lqb=xs.Di({values:{type:Fq("temperature")}});Mqb=xs.Di({values:{type:Fq("tint")}});Nqb=Hq({id:Zr});Oqb=xs.Di({values:{type:Fq("lut"),Ycb:Nqb}});Pqb=hr({brightness:Dqb,contrast:Eqb,highlights:Fqb,shadows:Gqb,whites:Hqb,blacks:Iqb,saturation:Jqb,vibrance:Kqb,temperature:Lqb,tint:Mqb,lut:Oqb},a=>a.type,a=>a.type);__c.Qqb=Uq(Pqb);var Rqb,Uqb,Vqb,Yqb,ys,grb,nrb,orb,qrb,srb,urb,wrb,yrb,zrb,Arb,Brb,Crb,Drb,Frb,Grb,Irb,Krb,Lrb;Rqb=Hq({id:Zr,version:$r});__c.Sqb=Sq({values:{app:Rqb},attributes:{jja:Nq(__c.Wlb(Zr,Zr))}});__c.Tqb=Kq(-1,1);Uqb=Kq(0,100);Vqb=Kq(-100,100);__c.Wqb=Kq(0,1);__c.Xqb=Kq(-180,180);Yqb=Nq(Uqb);ys=Nq(Vqb);__c.Zqb=Nq(__c.Wqb);__c.$qb=Nq(__c.Xqb);zs=__c.zs=Jq(Rr);__c.arb=Mq(zs);__c.brb=Nq(__c.arb);__c.crb=Jq(/^100%$/);__c.drb=Jq(/^[0-9]+(\.[0-9]+)?%$/);__c.erb=Jq(/^[0-9]+(\.[0-9]+)?px/);__c.frb=__c.Qq(Rq(Zr));
grb=$lb(0,10);__c.hrb=Gq(grb,a=>10>=a.length);__c.irb=Nq(__c.hrb);__c.jrb=Jq($mb("L"));__c.krb=Jq($mb("T"));__c.lrb=Nq(Fq(1,2,3));__c.mrb=Hq({text:Zr,O7:Yr});nrb=Hq({top:bs,left:bs,width:cs,height:cs,rotation:__c.Xqb});orb=Hq({id:Zr,Wf:bs});__c.prb=Sq({attributes:{Coa:Pq(orb),brightness:ys,contrast:ys,saturation:ys,TX:ys,Y_a:Yqb,blur:ys,jia:ys,Oza:ys,Mja:Yqb,Mqa:Yqb,highlights:ys,B5:ys,jY:Yqb,Wta:Yqb}});qrb=Oq(Mq(__c.prb));
__c.rrb=Sq({values:{media:Rqb},Xb:{filter:qrb},attributes:{OF:Pq(Rqb),Ie:Pq(nrb),Sa:__c.Zqb,tg:Nq(__c.Wlb(zs,zs)),altText:Pq(__c.mrb)}});srb=Oq(Mq(__c.rrb));__c.trb=Fq(1,2);urb=Hq({od:cs,Qv:cs});__c.vrb=Sq({values:{video:Zr,id:__c.ds},Xb:{filter:qrb,$U:__c.Qqb},attributes:{Ie:Nq(nrb),Sa:__c.Zqb,tg:Nq(__c.Wlb(zs,zs)),altText:Pq(__c.mrb),trim:Pq(urb),Boa:Nq(__c.trb),autoplay:gs,playbackRate:Pq(Kq(.25,4)),volume:Nq(Kq(0,4))}});wrb=Oq(Mq(__c.vrb));__c.xrb=Hq({top:bs,left:bs});yrb=Hq({width:cs,height:cs});
zrb=Hq({color:zs,Sa:__c.Wqb,position:bs},a=>-1<=a.position&&2>=a.position);Arb=Gq(zrb,a=>2<=a.length&&a.every((b,c,d)=>0===c||d[c-1].position<=b.position));Brb=Nq(Arb);Crb=Sq({values:{type:Fq("linear")},attributes:{ui:Brb,rotation:__c.$qb}});Drb=Sq({values:{type:Fq("radial")},attributes:{ui:Brb,center:Nq(__c.xrb)}});__c.Erb=hr({linear:Crb,radial:Drb},a=>a.type,a=>a.type);Frb=Oq(Mq(__c.Erb));
__c.As=Sq({Xb:{image:srb,video:wrb,gradient:Frb},attributes:{dropTarget:__c.npb,color:__c.brb,Sa:__c.Zqb,locked:gs,GD:gs,mS:__c.ls,Qo:__c.ls,flipX:gs,flipY:gs}});__c.Bs=Sq({Xb:{fill:__c.As},attributes:{weight:__c.js,color:__c.brb,Pn:__c.irb,ds:gs}});Grb=Hq({top:bs,left:bs,height:cs,width:cs});__c.Hrb=Nq(Grb);Irb=Hq({tf:Gq($r)});__c.Jrb=Nq(Irb);Krb=Hq({text:Zr,user:Zr,brand:Zr});Lrb=Hq({text:Zr,url:Zr});var Mrb,Nrb,Orb,Prb,Qrb,Rrb,Srb,Trb;Mrb=Hq({type:Fq("google-sheets"),url:Zr,yYa:Mq(as),KE:Zr,range:__c.ds});Nrb={cJb:Jq(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*|[A-Z]+[1-9]\d*:[A-Z]+[1-9]\d*)$/)};Orb=Hq(Nrb);Prb=Hq({type:Fq("copy-sheets"),yYa:Mq(as),Gf:Zr,yya:Zr,Ke:Gq(Orb)});Qrb=Hq({...Nrb});Rrb=Hq({type:Fq("live-sheets"),yYa:Mq(as),yya:Zr,Ke:Gq(Qrb)});Srb=Hq({app:Rqb,source:Zr,title:__c.ds});Trb=Hq({type:Fq("app"),aMd:Srb,yYa:Mq(as)});
__c.Urb=__c.Iq({"google-sheets":Mrb,"copy-sheets":Prb,"live-sheets":Rrb,app:Trb},a=>a.type);__c.Vrb=class{encode(a){return String(a)}decode(a){switch(typeof this.defaultValue){case "string":return a;case "number":return Number(a);case "boolean":return"false"!==a;default:throw Error();}}validate(a){na(this.isValid(a),"invalid value: {}",a)}normalize(a){this.validate(a);return this.vTc(a)}vTc(a){return a}constructor(a,b,c){this.scope=a;this.defaultValue=b;this.I4c=c}};__c.kr=Object.keys({ju:0})[0];
__c.lnb=class{getScope(a){return this.attributes[a].scope}Nma(a){if("function"===typeof a)return a;switch(a){case "all":return()=>!0;case "block":return this.yke;case "inline":return this.hle;default:throw new r(a);}}copy(a,b,c){__c.lr(this,b,a,(d,e)=>c[e]=d)}n6(a){for(const [b,c]of Object.entries(a))na(this.pC(b)),null!=c&&this.attributes[b].validate(c)}validate(a,b){a=m(this.attributes[a]);null!=b&&a.validate(b)}normalize(a,b){a=m(this.attributes[a]);return null!=b?a.normalize(b):void 0}encode(a,
b){return __c.jr(this.attributes[a],b)}decode(a,b){return __c.ir(this.attributes[a],b)}constructor(a,b,c,d){this.attributes=a;this.ALa=b;this.qRa=c;this.oQe=d;this.Mi=iq(this.attributes,e=>e.defaultValue);this.wub={as:this.Mi,ss:iq(this.Mi,(e,f)=>null!=e?this.encode(f,e):void 0)};this.pC=e=>e in this.attributes;this.yke=e=>"block"===this.getScope(e);this.hle=e=>"inline"===this.getScope(e);this.MBb=e=>{e=bnb(e);return!(!e||!this.qRa.has(e))};this.hHa=e=>"string"!==typeof e?!1:null!=__c.dnb(this,e);
this.J4c=e=>{const f=this.oQe;return"string"===typeof e&&f.has(e)};this.Dza=(e,f,g)=>f===g?!0:null!=f&&null!=g?this.attributes[e].Dza(f,g):null==f&&null==g}};__c.lnb.prototype.f_=ea(133);
var gnb=class extends __c.Vrb{LOa(){return new gnb(this.scope,this,!0)}isValid(a){return Number.isInteger(a)&&this.min<=a&&a<=this.max}Dza(a,b){return a===b}encode(a){return`${a.toFixed(1)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=-2147483648,max:c=2147483647,defaultValue:d=0,units:e=""}={},f=!1){super(a,d,f);na(Number.isInteger(b)&&-2147483648<=b);na(Number.isInteger(c)&&2147483647>=c);na(Number.isInteger(d));
na(b<=d&&d<=c);this.min=b;this.max=c;this.units=e;__c.anb(this)}},inb=class extends __c.Vrb{LOa(){return new inb(this.scope,this,!0)}isValid(a){return Number.isFinite(a)&&this.min<=a&&a<=this.max}vTc(a){return 0===a?a:Number(a.toPrecision(this.tnd))}Dza(a,b){return a===b}encode(a){return`${"fixed"===this.ova&&Number.isInteger(a)?a.toFixed(1):String(a)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}constructor(a,{min:b=
-Number.MAX_VALUE,max:c=Number.MAX_VALUE,tnd:d=6,ova:e="integer",defaultValue:f=0,units:g=""}={},h=!1){super(a,f,h);na(Number.isFinite(b)&&b>=-Number.MAX_VALUE);na(Number.isFinite(c)&&c<=Number.MAX_VALUE);na(Number.isInteger(d)&&1<=d&&15>=d);this.min=b;this.max=c;this.units=g;this.tnd=d;this.ova=e;__c.anb(this)}},jnb=class extends __c.Vrb{isValid(a){return this.b0.test(a)}LOa(){return new jnb(this.scope,this.b0,this.defaultValue,!0)}Dza(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.b0=
b;__c.anb(this)}},knb=class extends __c.Vrb{isValid(a){return this.xtd.has(a)}LOa(){return new knb(this.scope,this.xtd,this.defaultValue,!0)}Dza(a,b){return a===b}constructor(a,b,c,d=!1){super(a,c,d);this.xtd=new Set(b);__c.anb(this)}};var $rb,asb,bsb;__c.Wrb="normal thin extralight light medium semibold bold ultrabold heavy".split(" ");__c.Xrb=/^Y[A-Za-z0-9_-]{10},\d+$/;__c.Yrb=["normal","italic"];__c.Zrb=["none","underline"];$rb=["start","center","end","justify"];
Cs=__c.Cs={fontFamily:pr("inline",__c.Xrb,"YACgEZ1cb1Q,0"),fontSize:or("inline",{min:0,defaultValue:16,units:"px"}),fontWeight:qr("inline",__c.Wrb),fontStyle:qr("inline",__c.Yrb),LS:pr("inline",__c.zob,"1"),verticalAlign:pr("inline",__c.Bob,"0%"),color:pr("inline",Rr,"#000000"),backgroundColor:pr("inline",yob,"transparent"),rca:or("inline",{min:0,max:.2,units:"em"}),qca:or("inline",{min:0,max:.16,units:"em"}),vn:qr("inline",__c.Zrb),oz:qr("inline",["none","strikethrough"]),link:pr("inline",__c.xob,
""),letterSpacing:or("inline",{min:-.2,max:.8,units:"em"}),lineHeight:or("block",{min:.5,max:2.5,defaultValue:1.4}),direction:qr("block",["ltr","rtl"]),textAlign:qr("block",$rb),eB:qr("block","none disc circle square decimal lower-alpha lower-roman checked unchecked".split(" ")),nL:__c.hnb({min:0}),marginInlineStart:__c.hnb({min:0,max:200,units:"px"}),textIndent:__c.hnb({min:0,max:32,units:"px"}),E0a:pr("inline",/^$/,""),F0a:pr("inline",/^$/,""),emb:pr("inline",/^$/,"")};
asb={KCa:pr("inline",/^(K[a-zA-Z0-9_-]{10}|)$/,"")};bsb={...iq(Cs,a=>a.LOa()),rA:qr("inline",["add","delete"]).LOa()};__c.Ds=__c.mnb({static:Cs,pRa:asb,ju:bsb});__c.Es=`${Object.keys({KCa:0})[0]}/`;__c.csb=Object.keys({rA:0})[0];var fsb=class{V5(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.ops.push(rr(this.acc));this.pre+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.ops.push(nnb(this.acc));this.post+=this.acc;this.acc=0;break;default:throw new r(this.mode);}this.mode=a}}accumulate(a,b=1){na(0<=b,"{} < 0",b);b&&(this.V5(a),this.acc+=b);return this}retain(a){return this.accumulate(0,a)}expand(a){return this.accumulate(1,a)}append(a){switch(a.type){case 0:return this.accumulate(0,a.length);
case 1:return this.accumulate(1,a.length);default:throw new r(a);}}build(){0!==this.mode&&this.V5();return this.ops?new dsb(this.ops,this.pre,this.post):esb}constructor(){this.ops=[];this.acc=this.post=this.pre=0;this.mode=void 0}},gsb=class{static create(a,b,c,d=0,e=0){na(0<=d,"{} < 0",d);na(0<=e,"{} < 0",e);b=Math.max(0,d-b,e-c);return new gsb(b?[...a,rr(b)]:a)}get head(){return this.Hl}Jy(a){return this.WB(0,a).length}WB(a,b=1){const c=m(this.Hl);if(c.type!==a)throw Error();const d=c.length;na(0<
b&&b<=d,"{} \u2209 (0, {}]",b,d);if(b<d)switch(a){case 0:return this.Hl=rr(d-b),rr(b);case 1:return this.Hl=nnb(d-b),nnb(b);default:throw new r(a);}else return this.Hl=this.ops[this.i++],c}finish(){oa(null==this.Hl)}constructor(a){this.ops=a;this.i=0;this.Hl=a[this.i++]}},dsb=class{isEmpty(){return 0===this.pre&&0===this.post&&0===this.ops.length}cd(a,b){return gsb.create(this.ops,this.pre,this.post,a,b)}toString(){return this.ops.map(a=>{switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;
default:throw new r(a);}}).join("")}constructor(a,b,c){this.ops=a;this.pre=b;this.post=c}},esb=new dsb([],0,0),hsb=class extends Tr{wg(){return new fsb}isIdentity(a){return a.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=this.wg(),d=a.cd(0,b.pre),e=b.cd(a.post,0);let f=d.head,g=e.head;for(;f||g;){if(g)if(1===g.type)c.append(e.WB(g.type,g.length));else if(f)if(1===f.type){var h=Math.min(f.length,g.length);d.WB(f.type,h);e.WB(g.type,h);c.append(nnb(h))}else h=
Math.min(f.length,g.length),d.WB(f.type,h),e.WB(g.type,h),c.append(rr(h));else throw Error(`length mismatch: ${a} ; ${b}`);else throw Error(`length mismatch: ${a} ; ${b}`);f=d.head;g=e.head}d.finish();e.finish();return c.build()}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return[b,a];const c=a.cd(b.pre,0),d=b.cd(a.pre,0),e=this.wg(),f=this.wg();for(var g=c.head,h=d.head;g||h;){if(g&&1===g.type)h=c.WB(g.type,g.length),f.append(rr(h.length)),e.append(h);else if(h&&1===h.type){var k=d.WB(h.type,
h.length);f.append(k);e.append(rr(h.length))}else if(g&&h)k=Math.min(g.length,h.length),g=c.WB(g.type,k),h=d.WB(h.type,k),f.append(h),e.append(g);else throw Error(`length mismatch (${a} x ${b})`);g=c.head;h=d.head}c.finish();d.finish();return[f.build(),e.build()]}Ik(){return esb}Hj(a,b){if(a===b)return!0;if(!a||!b||a.pre!==b.pre||a.post!==b.post)return!1;a=a.cd();b=b.cd();let c=a.head,d=b.head;for(;c||d;){if(!c||!d)return!1;switch(c.type){case 0:if(0!==d.type||c.length!==d.length)return!1;a.Jy(c.length);
b.Jy(d.length);break;case 1:if(1!==d.type||c.length!==d.length)return!1;sr(a,c.length);sr(b,d.length);break;default:throw new r(c);}c=a.head;d=b.head}return!0}identity(){return esb}apply(a){return a}Yk(a){return a}Th(a,b){return a===b}equals(a){return this===a||a instanceof hsb}},onb=new Map,wr=new hsb;var jsb,lsb,ksb,isb,nsb,rnb,osb,psb;
jsb=class extends Tr{fg(){return new rnb(this.EA)}YM(){return isb}$d(a={}){return{x:a.x||wr.wg().build(),y:a.y||wr.wg().build(),attrs:a.attrs||ur(this).build()}}isIdentity(a){return wr.isIdentity(a.x)&&wr.isIdentity(a.y)&&a.attrs.items.isEmpty()}compose(a,b){const c=wr.compose(a.x,b.x),d=wr.compose(a.y,b.y);a=vnb(this,a.attrs,b.x,b.y);if(b.attrs.items.isEmpty())return this.$d({x:c,y:d,attrs:a});const e=ur(this);tnb(a,b.attrs,e,(f,g,h)=>{g?h?(oa(this.EA(f,g.n,h.o)),f={o:g.o,n:h.n}):f=g:f=h;return f});
return{x:c,y:d,attrs:e.build()}}REa(a,b,c,d){return wr.isIdentity(c)&&wr.isIdentity(d)||b.items.isEmpty()?b:unb(a,this.EA,b,c,d)}transform(a,b){const [c,d]=wr.transform(a.x,b.x),[e,f]=wr.transform(a.y,b.y);a=vnb(this,a.attrs,c,e);b=vnb(this,b.attrs,d,f);if(a.items.isEmpty()||b.items.isEmpty()){var g=this.$d({x:c,y:e,attrs:b});a=this.$d({x:d,y:f,attrs:a});return[g,a]}var h=Math.max(a.Fp,b.Fp),k=Math.max(a.xz,b.xz);a=a.cd(void 0,h,k);h=b.cd(void 0,h,k);b=ur(this);k=ur(this);for(var l=a.head,n=h.head;l||
n;){if(l&&0===l.type||n&&0===n.type){l=a.aw();n=h.aw();const u=b.aw(),w=k.aw();for(var p=l.head,q=n.head;p||q;){if(p&&0===p.type||q&&0===q.type){p=l.Dt();q=n.Dt();for(g of snb(p,q)){p=l.attrs[g];q=n.attrs[g];p&&q?(oa(this.EA(g,p.o,q.o)),p=[void 0,{o:q.n,n:p.n}]):p=[q,p];const [y,z]=p;u.Il(g,z);w.Il(g,y)}}else if(p&&q)p=Math.min(p.length,q.length),l.Tm(p),n.Tm(p),u.RB(p),w.RB(p);else if(p)p=p.length,l.Tm(p),u.RB(p),w.RB(p);else if(q)p=q.length,n.Tm(p),u.RB(p),w.RB(p);else throw Error();p=l.head;q=
n.head}l.finish();n.finish();u.finish();w.finish()}else if(l&&n)l=Math.min(l.length,n.length),vr(a,l),vr(h,l),b.rows(l),k.rows(l);else if(l)l=l.length,vr(a,l),b.rows(l),k.rows(l);else if(n)l=n.length,vr(h,l),b.rows(l),k.rows(l);else throw Error();l=a.head;n=h.head}a.finish();h.finish();g=this.$d({x:c,y:e,attrs:k.build()});a=this.$d({x:d,y:f,attrs:b.build()});return[g,a]}Ik(a){a=a.attrs.cd();const b=ur(this);for(var c=a.head;c;){if(0===c.type){c=a.aw();const e=b.aw();for(var d=c.head;d;){if(0===d.type){d=
c.Dt();for(const f of zr(d))d=c.attrs[f],e.Il(f,d&&{o:d.n,n:d.o})}else d=d.length,c.Tm(d),e.RB(d);d=c.head}c.finish();e.finish()}else c=c.length,vr(a,c),b.rows(c);c=a.head}return this.$d({attrs:b.build()})}Hj(a,b){return wr.Hj(a.x,b.x)&&wr.Hj(a.y,b.y)&&a.attrs.equals(b.attrs)}identity(){return{x:wr.wg().build(),y:wr.wg().build(),attrs:ur(this).build()}}apply(a,b){a=this.REa("apply",a,b.x,b.y);if(b.attrs.items.isEmpty())return a;const c=this.fg();tnb(a,b.attrs,c,(d,e,f)=>this.mMd(d,e,f));return c.build()}Yk(a,
b){if(b.attrs.items.isEmpty())return this.REa("unapply",a,b.x,b.y);const c=this.fg();tnb(a,b.attrs,c,(d,e,f)=>this.uUe(d,e,f));return this.REa("unapply",c.build(),b.x,b.y)}Th(a,b){return a.equals(b)}equals(a){return this===a?!0:a instanceof jsb?this.EA===a.EA:!1}constructor(a){super();this.EA=a;this.eqd=(b,c,d)=>{if(c===d)return!0;if(c&&d){const e=c.n,f=d.n;return this.EA(b,c.o,d.o)&&this.EA(b,e,f)}return!c&&!d};this.mMd=(b,c,d)=>null!=d?(oa(this.EA(b,c,d.o),"{}: {} != {}",b,c,d.o),d.n):c;this.uUe=
(b,c,d)=>null!=d?(oa(this.EA(b,c,d.n)),d.o):c}};
lsb=class{isEmpty(){return!this.items.length}cd(a){return new ksb(this.items,this.length,a)}forEach(a,{grad:b,uc:c}){for(const d of this.items)switch(d.type){case 0:b&&b(d.value);break;case 1:c&&c(d.length);break;default:throw new r(d);}(a=Math.max(0,a-this.length))&&c&&c(a)}equals(a,b){if(this===a)return!0;if(this.length!==a.length)return!1;const c=this.cd();a=a.cd();for(var d=c.head,e=a.head;d||e;){if(!d||!e)return!1;switch(d.type){case 0:if(0!==e.type)return!1;d=c.Dt();e=a.Dt();if(null!=d?null==
e||!b(d,e):null!=e)return!1;break;case 1:if(1!==e.type||d.length!==e.length)return!1;c.Tm(d.length);a.Tm(e.length);break;default:throw new r(d);}d=c.head;e=a.head}return!0}toString(a="C",b="G",c=JSON.stringify){return this.items.map(d=>{switch(d.type){case 1:return`${a}${d.length}`;case 0:return`${b}${c(d.value)}`;default:throw new r(d);}}).join()}constructor(a,b){this.items=a;this.length=b}};__c.msb=new lsb([],0);
ksb=class{get head(){return this.Hl}Tm(a){var b=this.Hl;if(!b||1!==b.type)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);this.Hl=a<b?wnb(b-a):this.input[this.i++];return a}Dt(){const a=this.Hl;if(a&&1!==a.type)return this.Hl=this.input[this.i++],a.value}finish(){oa(null==this.Hl,"stream not empty: {}",this.Hl)}constructor(a,b,c=0){this.i=0;c=Math.max(0,c-b);this.length=b+c;this.input=c?[...a,wnb(c)]:a;this.Hl=this.input.length?this.input[this.i++]:void 0}};
xr=__c.xr=class{grad(a){if(null==a)return this;oa(null==this.tna,"nextGrad already set: {}",this.tna);this.tna=a;return this}uc(a){if(0>=a)return this;null!=this.tna&&(this.sna&&(this.items.push(wnb(this.sna)),this.sna=0),this.items.push({type:0,value:this.tna}),this.tna=void 0);this.sna+=a;this.R0+=a;return this}build(){null!=this.tna?(oa(0!==this.sna),this.items.push(wnb(this.sna)),this.items.push({type:0,value:this.tna}),this.sna=0,this.tna=void 0):this.R0-=this.sna;return new lsb(this.items,this.R0)}constructor(){this.items=
[];this.sna=this.R0=0;this.tna=void 0}};
yr=__c.yr=class{static of(a,b,c,d){return b.isEmpty()?isb:new yr(a,b,c,d)}cd(a=()=>!0,b=0,c=0){b=Math.max(this.Fp,b);c=Math.max(this.xz,c);const d=this.items.cd(c);return new nsb(this.EA,d,a,b,c)}forEach(a,b,c=0,d=0){a=this.cd(a,c,d);c=a.head;let e=0;for(;c;)e=0!==c.type&&a.tte?e+vr(a,c.length):e+a.J0b((f,g)=>b(e,f,g)),c=a.head;a.finish()}serialize(a){const b=a.aw;this.items.forEach(this.items.length,{uc:a.rows,grad:c=>{const {RB:d,grad:e,y9a:f}=b();c.forEach(c.length,{uc:d,grad:e});f()}})}equals(a){return this===
a?!0:a instanceof yr&&this.xz===a.xz&&this.Fp===a.Fp?this.items.equals(a.items,(b,c)=>b.equals(c,(d,e)=>Bnb(this.EA,d,e))):!1}toString(){return this.items.toString("R","G",a=>a.toString("C","G",qnb))}constructor(a,b,c,d){this.EA=a;this.items=b;this.Fp=c;this.xz=d}};isb=new yr((a,b,c)=>b===c,__c.msb,0,0);
nsb=class{get head(){return this.oRa.head}J0b(a){oa(null==this.NU);const b=this.aw();var c=b.head;let d=0;for(;c;){if(0===c.type)b.Dt();else{c=b.Tm(c.length);if(!Ar(b.attrs)){const e={...b.attrs};for(let f=0;f<c;f++)a(d+f,e)}d+=c}c=b.head}b.finish();return this.head?vr(this,1):0}get tte(){oa(null!=this.head);oa(null==this.NU);return 1===this.head.type&&this.fA.isEmpty()}aw(){oa(null==this.NU);var a=this.oRa.Dt();if(a){a=a.cd(this.Fp);for(var b=this.fA.cd(this.Fp),c=new xr,d=a.head,e=b.head;d||e;){if(d&&
0===d.type||e&&0===e.type){const g=a.Dt(),h=b.Dt();b:{d=this.OCa;e=this.Nma;if(!g){d=h;break b}const k={...h};for(f in g){if(e&&!e(f))continue;const l=g[f];na(xnb(d,f,null===h||void 0===h?void 0:h[f],l.t));l.b?k[f]=l.b:delete k[f]}d=Ar(k)?void 0:k}c.grad(d)}else if(d&&e)d=Math.min(d.length,e.length),a.Tm(d),b.Tm(d),c.uc(d);else throw Error("length mismatch");d=a.head;e=b.head}var f=c.build()}else f=this.fA;this.NU=f;return new osb(this.OCa,this.Nma,this.NU.cd(this.Fp),this.flc)}finish(){oa(null==
this.NU);this.oRa.finish()}constructor(a,b,c,d,e){this.OCa=a;this.oRa=b;this.Nma=c;this.Fp=d;this.xz=e;this.fA=__c.msb;this.NU=void 0;this.flc=()=>{oa(null!=this.NU);this.fA=this.NU;this.NU=void 0}}};
rnb=class{aw(){oa(null==this.dlb);return this.dlb=new psb(this.EA,this.eUd)}rows(a){this.j4b.uc(a);return this}build(){oa(null==this.dlb);oa(this.fA.isEmpty(),"prevDxs not empty: {}",this.fA);const a=this.j4b.build();return yr.of(this.EA,a,this.Fp,a.length)}constructor(a){this.EA=a;this.j4b=new xr;this.Fp=0;this.fA=__c.msb;this.dlb=void 0;this.eUd=b=>{oa(null!=this.dlb);this.Fp=Math.max(this.Fp,b.length);var c=this.fA.cd(this.Fp);const d=b.cd(this.Fp),e=new xr;for(var f=c.head,g=d.head;f||g;){if(f&&
0===f.type||g&&0===g.type)f=c.Dt(),g=d.Dt(),f=__c.Anb(this.EA,f,g),e.grad(f);else if(f&&g)f=Math.min(f.length,g.length),c.Tm(f),d.Tm(f),e.uc(f);else throw Error("length mismatch");f=c.head;g=d.head}c=e.build();c.isEmpty()||this.j4b.grad(c);this.fA=b;this.dlb=void 0}}};
osb=class{get attrs(){return this.hH}get head(){return this.xvb.head}Tm(a){return this.xvb.Tm(a)}Dt(){const a=this.xvb.Dt();this.gja(a);return a}finish(){this.xvb.finish();this.dn()}gja(a){if(a)for(const b in a){if(!this.Nma(b))continue;const c=__c.ynb(this.OCa,b,this.hH[b],a[b]);null==c?delete this.hH[b]:this.hH[b]=c}}constructor(a,b,c,d){this.OCa=a;this.Nma=b;this.xvb=c;this.dn=d;this.hH={}}};
psb=class{Il(a,b){var c=this.hH[a];(b=(0,this.OCa)(a,c,b)?void 0:{Zb:c,r:b})?(this.eI||(this.eI={}),this.eI[a]=b):this.eI&&(delete this.eI[a],Ar(this.eI)&&(this.eI=void 0));return this}attrs(a){for(const b of zr(a))this.Il(b,a[b]);return this}RB(a){if(0>=a)return this;this.gja();this.Ata.uc(a);return this}gja(){if(this.eI){var a=this.eI;this.eI=void 0;for(const b in a){const c=__c.ynb(this.OCa,b,this.hH[b],a[b]);null==c?delete this.hH[b]:this.hH[b]=c}this.Ata.grad(a)}}finish(){this.gja();oa(Ar(this.hH));
const a=this.Ata.build();this.dn(a)}constructor(a,b){this.OCa=a;this.dn=b;this.hH={};this.eI=void 0;this.Ata=new xr}};var qsb=class extends Wr{get Fp(){return this.grid.Fp}get xz(){return this.grid.xz}set(a,b,c){const {COe:d,pOe:e,Cwb:f=d,y7d:g=e}=b,h=__c.nr(this.fh,__c.mr(this.fh,a,c)),k=__c.fnb(this.fh,h,(n,p)=>__c.enb(this.fh,h,p));b=iq(k,()=>{});c=ur(this.domain);c.rows(d);for(var l=d;l<=f;l++){const n=c.aw();n.RB(e);for(let p=e;p<=g;p++){const q=this.grid.get(l,p),u={};__c.lr(this.fh,k,a,(w,y)=>{u[y]={o:q&&q[y],n:k[y]}});n.attrs(u);n.RB(1)}n.attrs(b);n.finish();c.rows(1)}a=c.aw();a.RB(e);for(l=e;l<=g;l++)a.attrs(b),
a.RB(1);a.attrs(b);a.finish();a=this.domain.$d({attrs:c.build()});this.lq(a)}write(a,b,c){null==c||0===Object.keys(c).length?this.grid.delete(a,b):this.grid.set(a,b,c)}get(a,b,c){b=this.grid.get(b,c);if(null!=b&&(a=__c.mr(this.fh,a,b),0!==Object.keys(a).length))return a}$R(){const a=this.domain.fg();for(let b=0;b<=this.xz;b++){const c=a.aw();let d={};for(let e=0;e<=this.Fp;e++){const f=this.grid.get(b,e);for(const g of Enb(d,f))c.Il(g,f&&f[g]);d=f;c.RB(1)}c.finish();a.rows(1)}return a.build()}destroy(a){const b=
this.kc();oa(this.domain.Th(b,a))}Ai(a){const b=this.kc(),c=ur(this.domain);tnb(b,a,c,(d,e,f)=>null==e&&null==f?void 0:{o:e,n:f});this.lq(this.domain.$d({attrs:c.build()}));return!0}cY(a){this.xXb(a.x);this.yXb(a.y);Dnb(this,a.attrs)}xXb(a){if(0!==a.pre||0!==a.post){var b=0;a=a.cd();for(var c=a.head;c;)0===c.type?b+=a.Jy(c.length):(c=sr(a,c.length),Mlb(this.grid,b,c),b+=c),c=a.head}}yXb(a){let b=0;a=a.cd();for(var c=a.head;c;)0===c.type?b+=a.Jy(c.length):(c=sr(a,c.length),Nlb(this.grid,b,c),b+=c),
c=a.head}constructor(a,b,c){super();this.fh=a;this.domain=b;this.grid=new Vob;c.forEach(a.pC,(d,e,f)=>{0===Object.keys(f).length||this.grid.set(d,e,f)});oa(this.domain.Th(c,this.$R()))}},rsb=class extends Tob{fg(){return this.domain.fg()}My(a){return new qsb(this.fh,this.domain,a)}Bm(a){return a}connect(a,b){return this.Bm(a).connect(b)}kc(a){return this.Bm(a).kc()}destroy(a,b){this.Bm(a).destroy(b)}Ai(a,b){return this.Bm(a).Ai(b)}constructor(){var a=__c.Fs;super();this.fh=a;this.domain=new jsb(a.Dza)}};__c.tsb=class{get Fp(){return this.grid.Fp}get xz(){return this.grid.xz}get rows(){return this.grid.rows}forEach(a){this.grid.forEach((b,c,d)=>{a(d.state,Br(b,c,d.right,d.bottom))})}map(a){const b=new ssb;this.forEach((c,d)=>{b.add(d,a(c,d))});return b.build()}get(a,b){var c=this.grid.rows[b];if(null!=c&&(c=c.cells[a],null!=c))return __c.Fnb(Br(a,b,c.right,c.bottom),c.state)}values(){const a=[];this.forEach((b,c)=>{a.push(__c.Fnb(c,b))});return a}cd(){return this.grid.cd()}constructor(a){this.grid=
a}};__c.tsb.prototype.Xcc=ea(134);
var ssb=class{add(a,b){Qnb(this.GTd,a);this.gjd.add(a.left,a.top,a.right,a.bottom,{right:a.right,bottom:a.bottom,state:b});return this}build(){const a=this.gjd.build();return a.isEmpty?usb:new __c.tsb(a)}constructor(){this.gjd=new vsb;this.GTd=new wsb}},xsb=class{constructor(a,b){this.type=0;this.o=a&&{right:a.right,bottom:a.bottom,state:a.state};this.n=b&&{right:b.right,bottom:b.bottom,state:b.state}}},ysb=class{constructor(a,b){this.bounds=a;this.delta=b;this.type=1}},Dr=class{add(a,b,c){if(null==
c)return this;switch(c.type){case 1:var d=a,e=b;if(c.bounds&&c.bounds.o){var f=Br(a,b,c.bounds.o.right,c.bounds.o.bottom);Qnb(this.A$c,f);d=Math.max(d,c.bounds.o.right);e=Math.max(e,c.bounds.o.bottom)}c.bounds&&c.bounds.n&&(f=Br(a,b,c.bounds.n.right,c.bounds.n.bottom),Qnb(this.V9c,f),d=Math.max(d,c.bounds.n.right),e=Math.max(e,c.bounds.n.bottom));this.MTa.add(a,b,d,e,c);return this;case 0:return d=a,e=b,c.o&&(f=Br(a,b,c.o.right,c.o.bottom),Qnb(this.A$c,f),d=Math.max(d,c.o.right),e=Math.max(e,c.o.bottom)),
c.n&&(f=Br(a,b,c.n.right,c.n.bottom),Qnb(this.V9c,f),d=Math.max(d,c.n.right),e=Math.max(e,c.n.bottom)),this.MTa.add(a,b,d,e,c),this;default:throw new r(c);}}build(){return this.MTa.build()}constructor(){this.MTa=new vsb;this.A$c=new wsb;this.V9c=new wsb}},Asb=class{get isEmpty(){return 0===this.rows.length}forEach(a){this.rows.forEach(({cells:b},c)=>{b.forEach((d,e)=>{a(e,c,d)})})}values(){const a=[];this.forEach((b,c,d)=>a.push([b,c,d]));return a}cd(){return new zsb(this.rows)}constructor(a,b,c){this.rows=
a;this.Fp=b;this.xz=c}},zsb=class{get head(){const a=this.rows[this.y];return a&&a.cells[this.x]&&{x:this.x,y:this.y,value:a.cells[this.x]}}Iz(){const a=m(this.head),b=m(this.rows[this.y]);this.x++;Gnb(this);null==b.cells[this.x]&&(this.y++,this.x=0,Hnb(this),Gnb(this));return a}finish(){oa(null==this.head)}constructor(a){this.rows=a;this.x=this.y=0;Hnb(this);Gnb(this)}},vsb=class{add(a,b,c,d,e){na(a<=c);na(b<=d);null==this.O4||this.O4.y<b?(this.flush(),this.rows.length&&oa(this.rows.length<=b),this.O4=
{y:b,Lgc:d,cells:[]},this.O4.cells[a]=e):this.O4.y===b?(oa(this.O4.cells.length<=a),this.O4.Lgc=Math.max(this.O4.Lgc,d),this.O4.cells[a]=e):oa(this.O4.y>b);this.Fp=Math.max(this.Fp,c+1);this.xz=Math.max(this.xz,d+1);return this}flush(){if(this.O4){const {y:a,...b}=this.O4;this.rows[a]=b;this.O4=void 0}}build(){this.flush();return new Asb(this.rows,this.Fp,this.xz)}constructor(){this.rows=[];this.xz=this.Fp=0}},usb=new __c.tsb(new Asb([],0,0)),Bsb=class extends Tr{fg(){return new ssb}YM(){return usb}replace(a,
b){return new xsb(a,b)}update(a,b){a=null==a||Cr(a.o,a.n)?void 0:a;b=null==b||this.component.isIdentity(b)?void 0:b;return null!=a||null!=b?new ysb(a,b):void 0}$d(a={}){const b=a.cells||(new Dr).build();return{x:a.x||wr.wg().build(),y:a.y||wr.wg().build(),cells:b,N2:a.N2||Gs.project(b)}}isIdentity(a){return wr.isIdentity(a.x)&&wr.isIdentity(a.y)&&a.cells.isEmpty&&Gs.isIdentity(a.N2)}compose(a,b){const c=Inb(this,a.cells,b.x,b.y),d=Gs.expand(a.N2,b.x,b.y);return{x:wr.compose(a.x,b.x),y:wr.compose(a.y,
b.y),cells:Lnb(this,c,b.cells),N2:Gs.compose(d,b.N2)}}transform(a,b){const [c,d]=wr.transform(a.x,b.x),[e,f]=wr.transform(a.y,b.y),g=Inb(this,a.cells,c,e),h=Inb(this,b.cells,d,f);a=Gs.expand(a.N2,c,e);b=Gs.expand(b.N2,d,f);const [k,l]=Gs.transform(a,b),n=new wsb,p=Gs.cursor(a,Math.max(g.Fp,h.Fp),Math.max(g.xz,h.xz)),q=new Dr,u=new Dr;Jnb(g.cd(),h.cd(),(w,y,z,B)=>{if(null!=z||null!=B){a:if(null==z||null==B)z=[B,z];else switch(z.type){case 1:b:switch(B.type){case 1:const [H,J]=z.delta&&B.delta?this.component.transform(z.delta,
B.delta):[B.delta,z.delta];if(z.bounds&&B.bounds){z=z.bounds;B=B.bounds;oa(Cr(z.o,B.o));const S={right:Math.min(z.n.right,B.n.right),bottom:Math.min(z.n.bottom,B.n.bottom)};z=[{o:z.n,n:S},{o:B.n,n:S}]}else z=[B.bounds,z.bounds];const [M,O]=z;z=[this.update(M,H),this.update(O,J)];break b;case 0:oa(null!=B.o);z.bounds&&oa(Cr(z.bounds.o,B.o));z=[this.replace({...(z.bounds?z.bounds.n:B.o),state:z.delta?this.component.apply(B.o.state,z.delta):B.o.state},B.n),void 0];break b;default:throw new r(B);}break a;
case 0:b:switch(B.type){case 1:oa(null!=z.o);B.bounds&&oa(Cr(z.o,B.bounds.o));z=[void 0,this.replace({...(B.bounds?B.bounds.n:z.o),state:B.delta?this.component.apply(z.o.state,B.delta):z.o.state},z.n)];break b;case 0:oa(Er(this,z.o,B.o));z=[void 0,this.replace(B.n,z.n)];break b;default:throw new r(B);}break a;default:throw new r(z);}var [D,F]=z;z=D&&Onb(this,w,y,D,n,p);(D||z)&&u.add(w,y,Knb(this,D,z));(F||z)&&q.add(w,y,Knb(this,F,z))}});p.finish();return[{x:c,y:e,cells:u.build(),N2:k},{x:d,y:f,cells:q.build(),
N2:l}]}Ik(a){const b=new Dr;a.cells.forEach((d,e,f)=>{if(null!=f)switch(f.type){case 1:f=this.update(f.bounds&&{o:f.bounds.n,n:f.bounds.o},f.delta&&this.component.Ik(f.delta));b.add(d,e,f);break;case 0:b.add(d,e,this.replace(f.n,f.o));break;default:throw new r(f);}});const c=b.build();return{x:wr.Ik(a.x),y:wr.Ik(a.y),cells:c,N2:Gs.project(c)}}Hj(a,b){var c;if(c=wr.Hj(a.x,b.x)&&wr.Hj(a.y,b.y))a:{c=a.cells;var d=b.cells;if(c.Fp!==d.Fp||c.xz!==d.xz)c=!1;else{c=c.cd();d=d.cd();for(var e=c.head,f=d.head;e||
f;){var g;(g=null==e)||(g=null==f)||(g=e.x!==f.x||e.y!==f.y)||(e=e.value,f=f.value,g=!(e===f||(null==e||null==f?e===f:0===e.type&&0===f.type?Er(this,e.o,f.o)&&Er(this,e.n,f.n):1===e.type&&1===f.type&&(e.bounds&&f.bounds?Cr(e.bounds.o,f.bounds.o)&&Cr(e.bounds.n,f.bounds.n):e.bounds===f.bounds)&&(e.delta&&f.delta?this.component.Hj(e.delta,f.delta):e.delta===f.delta))));if(g){c=!1;break a}c.Iz();d.Iz();e=c.head;f=d.head}c=!0}}return c&&Gs.Hj(a.N2,b.N2)}identity(){return this.$d()}apply(a,b){a=this.REa(a,
b.x,b.y);const c=this.fg();Jnb(a.cd(),b.cells.cd(),(d,e,f,g)=>{if(null!=f||null!=g)if(null==g)oa(null!=f),c.add(Br(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:oa(null!=f);g.bounds&&oa(Cr(g.bounds.o,f));c.add({...(g.bounds?g.bounds.n:f),left:d,top:e},g.delta?this.component.apply(f.state,g.delta):f.state);break;case 0:g.o&&(oa(null!=f),oa(Er(this,f,g.o)));g.n&&c.add({left:d,top:e,right:g.n.right,bottom:g.n.bottom},g.n.state);break;default:throw new r(g);}});return c.build()}REa(a,b,c){if(wr.isIdentity(b)&&
wr.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=tr(b,d),g=tr(c,e),h=new ssb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};h.add(l,k)});return h.build()}Yk(a,b){const c=this.fg();Jnb(a.cd(),b.cells.cd(),(d,e,f,g)=>{if(null!=f||null!=g)if(null==g)oa(null!=f),c.add(Br(d,e,f.right,f.bottom),f.state);else switch(g.type){case 1:oa(null!=f);g.bounds&&
oa(Cr(g.bounds.n,f));c.add({...(g.bounds?g.bounds.o:f),left:d,top:e},g.delta?this.component.Yk(f.state,g.delta):f.state);break;case 0:g.n&&(oa(null!=f),oa(Er(this,f,g.n)));g.o&&c.add({left:d,top:e,right:g.o.right,bottom:g.o.bottom},g.o.state);break;default:throw new r(g);}});return this.$Ob(c.build(),b.x,b.y)}$Ob(a,b,c){if(wr.isIdentity(b)&&wr.isIdentity(c))return a;const d=new Set,e=new Set;a.forEach((k,l)=>{d.add(l.left);d.add(l.right);e.add(l.top);e.add(l.bottom)});const f=pnb(b,d),g=pnb(c,e),
h=new ssb;a.forEach((k,l)=>{l={left:m(f.get(l.left)),right:m(f.get(l.right)),top:m(g.get(l.top)),bottom:m(g.get(l.bottom))};h.add(l,k)});return h.build()}Th(a,b){if(a===b)return!0;a=a.cd();b=b.cd();let c=a.head,d=b.head;for(;c||d;){if(null==c||null==d||c.x!==d.x||c.y!==d.y||c.value.bottom!==d.value.bottom||c.value.right!==d.value.right||!this.component.Th(c.value.state,d.value.state))return!1;a.Iz();b.Iz();c=a.head;d=b.head}return!0}equals(a){return this===a||a instanceof Bsb&&this.component.equals(a.component)}constructor(a){super();
this.component=a}},wsb=class{append(a){for(let b=a.top;b<=a.bottom;b++)for(let c=a.left;c<=a.right;c++){oa(!this.readBuffer(c,b));const {yud:d,Cud:e}=Rnb(this,c,b);this.buffer[e]||(this.buffer[e]=[]);this.buffer[e][d]=!0}}readBuffer(a,b){const {yud:c,Cud:d}=Rnb(this,a,b);return this.buffer[d]&&this.buffer[d][c]}constructor(){this.buffer=[];this.tNa=this.$qa=0}},Csb=class extends Tr{isIdentity(a){return a.items.isEmpty()}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=
this.X3a.fg();tnb(a,b,c,(d,e,f)=>e||f);return c.build()}transform(a,b){return[b,a]}Ik(a){return a}Hj(a,b){return a.equals(b)}identity(){return this.id}apply(a){return a}Yk(a){return a}Th(a,b){return a===b}equals(a){return this===a||a instanceof Csb}wg(){return new Dsb(()=>this.X3a.fg(),a=>blb(this,a))}cursor(a,b,c){return new Esb(a,b,c)}project(a){const b=this.wg();a.forEach((c,d,e)=>{switch(e.type){case 1:e.bounds&&b.add(Br(c,d,e.bounds.n.right,e.bounds.n.bottom));break;case 0:e.n&&b.add(Br(c,d,
e.n.right,e.n.bottom));break;default:throw new r(e);}});return b.build()}expand(a,b,c){b=this.X3a.$d({x:Snb(b),y:Snb(c)});return this.X3a.apply(a,b)}constructor(){super();this.X3a=new jsb((a,b,c)=>b===c);this.id=this.X3a.fg().build()}},Dsb=class{add(a){const b=this.MTa(),c=2*a.left,d=2*a.top,e=2*a.right;a=2*a.bottom;b.rows(d);b.aw().RB(c).attrs({value:!0}).RB(e-c+1).attrs({value:void 0}).finish();b.rows(a-d+1);b.aw().RB(c).attrs({value:void 0}).RB(e-c+1).attrs({value:void 0}).finish();this.uS.push(b.build());
return this}build(){return this.uS.length?this.reduce(this.uS):this.MTa().build()}constructor(a,b){this.MTa=a;this.reduce=b;this.uS=[]}},Esb=class{get yi(){oa(0===this.Qia%2);return this.Qia/2}aw(){oa(0===this.gBa);this.SQ=this.cd.aw();return this}get value(){oa(null!=this.SQ);return this.SQ.attrs.value}J0b(a){oa(null!=this.SQ);for(var b=this.SQ.head;null!=b;){if(0===b.type)this.SQ.Dt();else if(b=this.SQ.Tm(b.length),0===this.Qia%2&&this.SQ.attrs.value)for(let c=0;c<b;c++)0===this.gBa%2&&a(this.gBa/
2,this.Qia/2),this.gBa++;else this.gBa+=b;b=this.SQ.head}return this}y9a(){for(oa(null!=this.SQ);this.SQ.head;)0===this.SQ.head.type?this.SQ.Dt():this.SQ.Tm(this.SQ.head.length);this.SQ.finish();this.SQ=void 0;this.gBa=0;return this}finish(){Mnb(this,this.cd.xz);this.cd.head&&(this.aw(),this.y9a());this.cd.finish()}constructor(a,b,c){this.gBa=this.Qia=0;this.cd=a.cd(void 0,2*b,2*c)}},Gs=new Csb;var Hsb=class extends Wr{get(a,b){a=this.grid.get(a,b);if(null!=a)return{span:a.span,ref:a.value}}forEach(a){this.grid.forEach((b,c,d)=>{b.PGa.left===d&&b.PGa.top===c&&a(b.value,b.span)})}set(a,b){b=(new Dr).add(a.left,a.top,this.domain.replace(void 0,{right:a.right,bottom:a.bottom,state:b})).build();this.lq(this.domain.compose(Tnb(this,a),this.domain.$d({cells:b})));return m(this.get(a.top,a.left))}delete(a){this.lq(Tnb(this,a))}createRef(a,b){var c=this.grid;var d={left:Llb(this.grid,b.left),top:Klb(this.grid,
b.top),right:Llb(this.grid,b.right),bottom:Klb(this.grid,b.bottom)};c=new Fsb(c,d);d=Bq(this,Unb(this,c));const {mutable:e,Uw:f}=Cq(this.type,a,d);a=new Gsb(e,f,d,c);for(c=b.top;c<=b.bottom;c++)for(d=b.left;d<=b.right;d++)this.grid.set(c,d,a);return a}m3b(a,b,c){oa(a.span.left===c.left);oa(a.span.top===c.top);oa(a.span.right===c.right);oa(a.span.bottom===c.bottom);for(let d=c.top;d<=c.bottom;d++)for(let e=c.left;e<=c.right;e++)oa(this.grid.get(d,e)===a),this.grid.delete(d,e);Dq(this.type,b,a.to,a.value)}cY(a){this.xXb(a.x);
this.yXb(a.y);a.cells.forEach((b,c,d)=>{switch(d.type){case 1:var e=m(this.grid.get(c,b));d.delta&&e.to.next(d.delta);if(d.bounds){oa(e.span.left===b&&e.span.top===c);const h=d.bounds.o;var f=d.bounds.n;oa(e.span.right===h.right&&e.span.bottom===h.bottom);if(h.right!==f.right||h.bottom!==f.bottom){d=Math.min(h.right,f.right);f=Math.min(h.bottom,f.bottom);for(var g=f+1;g<=h.bottom;g++)for(let k=b;k<=h.right;k++)oa(this.grid.get(g,k)===e),this.grid.delete(g,k);for(b=d+1;b<=h.right;b++)for(g=c;g<=f;g++)oa(this.grid.get(g,
b)===e),this.grid.delete(g,b);e.PGa.right=Llb(this.grid,d);e.PGa.bottom=Klb(this.grid,f)}}break;case 0:d.o&&(e=m(this.grid.get(c,b)),oa(e.span.left===b&&e.span.top===c),oa(e.span.right===d.o.right&&e.span.bottom===d.o.bottom),this.m3b(e,d.o.state,{left:b,top:c,right:d.o.right,bottom:d.o.bottom}));break;default:throw new r(d);}});a.cells.forEach((b,c,d)=>{switch(d.type){case 1:if(d.bounds){const g=m(this.grid.get(c,b));var e=d.bounds.o;d=d.bounds.n;var f=Math.min(e.right,d.right);e=Math.min(e.bottom,
d.bottom);for(e+=1;e<=d.bottom;e++)for(let h=b;h<=d.right;h++)oa(null==this.grid.get(e,h)),this.grid.set(e,h,g);for(b=f+1;b<=d.right;b++)for(f=c;f<=d.bottom;f++)oa(null==this.grid.get(f,b)),this.grid.set(f,b,g);g.PGa.right=Llb(this.grid,d.right);g.PGa.bottom=Klb(this.grid,d.bottom)}break;case 0:d.n&&this.createRef(d.n.state,{left:b,top:c,right:d.n.right,bottom:d.n.bottom});break;default:throw new r(d);}})}xXb(a){if(0!==a.pre||0!==a.post){var b=0;a=a.cd();for(var c=a.head;c;)0===c.type?b+=a.Jy(c.length):
(c=sr(a,c.length),Mlb(this.grid,b,c,d=>d.span.right!==b-1),b+=c),c=a.head}}yXb(a){let b=0;a=a.cd();for(var c=a.head;c;)0===c.type?b+=a.Jy(c.length):(c=sr(a,c.length),Nlb(this.grid,b,c,d=>d.span.bottom!==b-1),b+=c),c=a.head}$R(){const a=this.domain.fg();for(let b=0;b<this.grid.xz;b++)for(let c=0;c<this.grid.Fp;c++){const d=this.grid.get(b,c);null!=d&&d.span.top===b&&d.span.left===c&&a.add(d.span,this.type.kc(d.value))}return a.build()}destroy(a){let b=0,c=0;a.forEach(()=>c++);for(let d=0;d<this.grid.xz;d++)for(let e=
0;e<this.grid.Fp;e++){const f=this.grid.get(d,e);if(null==f||f.span.top!==d||f.span.left!==e)continue;const g=m(a.get(f.span.left,f.span.top));oa(g.span.right===f.span.right&&g.span.bottom===f.span.bottom);this.type.destroy(f.value,g.state);b++}oa(c===b)}Ai(a){const b=new Dr,c=new Dr;for(let d=0;d<this.grid.xz;d++)for(let e=0;e<this.grid.Fp;e++){const f=this.grid.get(d,e);null!=f&&f.span.top===d&&f.span.left===e&&b.add(f.span.left,f.span.top,this.domain.replace({right:f.span.right,bottom:f.span.bottom,
state:this.type.kc(f.value)},void 0))}a.forEach((d,e)=>c.add(e.left,e.top,this.domain.replace(void 0,{right:e.right,bottom:e.bottom,state:d})));this.lq(this.domain.compose(this.domain.$d({cells:b.build()}),this.domain.$d({cells:c.build()})));return!0}constructor(a,b,c){super();this.type=a;this.domain=b;this.grid=new Vob;c.forEach((d,e)=>{this.createRef(d,e)})}},Gsb=class{get span(){return this.PGa.ncd.get()}constructor(a,b,c,d){this.value=a;this.to=b;this.from=c;this.PGa=d}},Fsb=class{get right(){return this.qHc.get()}set right(a){this.qHc.set(a)}get bottom(){return this.ZGc.get()}set bottom(a){this.ZGc.set(a)}constructor(a,
b){this.tAb=a;this.ncd=Pr(()=>({left:m(this.tAb.Z_b.get(this.left)),top:m(this.tAb.wrc.get(this.top)),right:m(this.tAb.Z_b.get(this.right)),bottom:m(this.tAb.wrc.get(this.bottom))}),{equals:__c.nob.structural});this.left=b.left;this.top=b.top;this.qHc=new Xr(b.right);this.ZGc=new Xr(b.bottom)}},Isb=class extends Vr{My(a){return new Hsb(this.type,this.domain,a)}Bm(a){return a}connect(a,b){return this.Bm(a).connect(b)}kc(a){return this.Bm(a).kc()}destroy(a,b){return this.Bm(a).destroy(b)}Ai(a,b){return this.Bm(a).Ai(b)}constructor(a){super(Ur,
Ur);this.type=a;this.domain=new Bsb(this.type.domain)}};var Jsb,Ksb,Fr,Vnb,Hs,Lsb,Msb,Nsb;Jsb=new Map;Ksb=class{ordinal(a,b){null!=b?this.$2a.set(a,b):this.$2a.delete(a);return this}Mj(a){a.forEach((b,c)=>this.$2a.set(c,b));return this}build(){return this.$2a.size?this.$2a:Jsb}constructor(){this.$2a=new Map}};Fr=class{toString(){var a,b;return`R(${null!==(a=this.oldValue)&&void 0!==a?a:"_"},${null!==(b=this.newValue)&&void 0!==b?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=0}};
Vnb=class{toString(){return`U(${this.oldValue},${this.newValue})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type=1}};Hs=class{static create(a,b){b=b.size?b:Lsb.Mj;return b!==Lsb.Mj||a!==Lsb.axis?new Hs(a,b):Lsb}toString(){const a=[...this.Mj].map(([b,c])=>`"${b}":${c}`).join(",");return`{${this.axis}|${a}}`}constructor(a,b){this.axis=a;this.Mj=b}};Lsb=new Hs(wr.wg().build(),new Map);
Msb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}build(){return Hs.create(this.axis.build(),this.Mj)}constructor(){this.Mj=new Map;this.axis=wr.wg()}};
Nsb=class extends Tr{fg(){return new Ksb}wg(){return new Msb}replace(a,b,c){return Gr(this.wg(),a,b,c).build()}update(a,b,c){return Wnb(this.wg(),a,b,c).build()}$d(a,b){return Hs.create(a,b)}isIdentity(a){return wr.isIdentity(a.axis)&&!a.Mj.size}compose(a,b){if(this.isIdentity(a))return b;if(this.isIdentity(b))return a;const c=Ynb(a.Mj,b.axis),d=new Map;for(const h of Xnb(c,b.Mj)){var e=c.get(h);const k=b.Mj.get(h);if(e&&k){var f=d,g=f.set;a:switch(sa(e.newValue,k.oldValue),e.type){case 0:e=new Fr(e.oldValue,
k.newValue);break a;case 1:switch(k.type){case 0:e=new Fr(e.oldValue,k.newValue);break a;case 1:e=new Vnb(e.oldValue,k.newValue);break a;default:throw new r(k);}default:throw new r(e);}g.call(f,h,e)}else e?d.set(h,e):k&&d.set(h,k)}return Hs.create(wr.compose(a.axis,b.axis),d)}transform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return[b,a];const [c,d]=wr.transform(a.axis,b.axis);a=Ynb(a.Mj,c);const e=Ynb(b.Mj,d);b=new Map;const f=new Map;for(var g of Xnb(a,e)){var h=a.get(g);const k=e.get(g);
if(h&&k){a:switch(sa(h.oldValue,k.oldValue),h.type){case 0:switch(k.type){case 0:h=[void 0,new Fr(k.newValue,h.newValue)];break a;case 1:h=[void 0,new Fr(k.newValue,h.newValue)];break a;default:throw new r(k);}case 1:switch(k.type){case 0:h=[new Fr(h.newValue,k.newValue),void 0];break a;case 1:h=[void 0,new Vnb(k.newValue,h.newValue)];break a;default:throw new r(k);}default:throw new r(h);}const [l,n]=h;n&&b.set(g,n);l&&f.set(g,l)}else h?b.set(g,h):k&&f.set(g,k)}g=Hs.create(c,f);a=Hs.create(d,b);
return[g,a]}Ik(a){const b=0===a.Mj.size?a.Mj:Vh(a.Mj,c=>{switch(c.type){case 0:return new Fr(c.newValue,c.oldValue);case 1:return new Vnb(c.newValue,c.oldValue);default:throw new r(c);}});return Hs.create(wr.Ik(a.axis),b)}Hj(a,b){if(a===b)return!0;if(!wr.Hj(a.axis,b.axis)||a.Mj.size!==b.Mj.size)return!1;for(const e of a.Mj.keys()){var c=a.Mj.get(e),d=b.Mj.get(e);if(c!==d&&(null==c||null==d||c.type!==d.type||c.oldValue!==d.oldValue||c.newValue!==d.newValue))return!1}return!0}identity(){return Lsb}apply(a,
b){if(this.isIdentity(b)||!a.size&&!b.Mj.size)return a;a=this.REa(a,b.axis);if(!b.Mj.size)return a;const c=new Map(a);for(const [d,e]of b.Mj)b=a.get(d),sa(b,e.oldValue),null!=e.newValue?c.set(d,e.newValue):c.delete(d);return c}REa(a,b){if(wr.isIdentity(b))return a;const c=new Set(a.values()),d=tr(b,c);return Vh(a,e=>m(d.get(e)))}Yk(a,b){if(this.isIdentity(b)||!a.size&&!b.Mj.size)return a;if(!b.Mj.size)return this.$Ob(a,b.axis);const c=new Map(a);for(const [d,e]of b.Mj){const f=a.get(d);sa(f,e.newValue);
null!=e.oldValue?c.set(d,e.oldValue):c.delete(d)}return this.$Ob(c,b.axis)}$Ob(a,b){if(wr.isIdentity(b))return a;const c=new Set(a.values()),d=pnb(b,c);return Vh(a,e=>m(d.get(e)))}Th(a,b){return a===b?!0:a.size===b.size&&[...a.keys()].every(c=>a.get(c)===b.get(c))}equals(a){return this===a||a instanceof Nsb}constructor(){super();this.YM=Jsb}};Jr=__c.Jr=new Nsb;var Osb=new Map,Ir=class{static from(a){if(a instanceof Ir)return a;if(Array.isArray(a)){const [b,c]=a;return new Ir(b,c)}return new Ir(a.start,a.end)}toString(){return`[${this.start},${this.end}]`}constructor(a,b){this.start=a;this.end=b}},Psb=class{range(a,b){b?this.R6.set(a,Ir.from(b)):this.R6.delete(a);return this}Ke(a){a.forEach((b,c)=>this.R6.set(c,Ir.from(b)));return this}build(){return this.R6.size?this.R6:Osb}constructor(){this.R6=new Map}},cob=class{toString(){var a,b;return`R(${null!==
(a=this.oldValue)&&void 0!==a?a:"_"},${null!==(b=this.newValue)&&void 0!==b?b:"_"})`}constructor(a,b){this.oldValue=a;this.newValue=b;this.type="replace"}},Kr=class{static from(a){if(a instanceof Kr)return a;if(Array.isArray(a)){const [b,c]=a;return new Kr(b,c)}return new Kr(a.oldValue,a.newValue)}toString(){return`[${this.oldValue},${this.newValue}]`}constructor(a,b){this.oldValue=a;this.newValue=b}},dob=class{toString(){var a,b;return`U(${null!==(a=this.start)&&void 0!==a?a:"_"},${null!==(b=this.end)&&
void 0!==b?b:"_"})`}constructor(a,b){this.start=a;this.end=b;this.type="update"}},eob=class{static create(a,b){b=b.size?b:Qsb.Ke;return b!==Qsb.Ke||a!==Qsb.axis?new eob(a,b):Qsb}toString(){return`{${this.axis}|${[...this.Ke].map(([a,b])=>`"${a}":${b}`).join(",")}}`}constructor(a,b){this.axis=a;this.Ke=b}},Qsb=new eob(wr.wg().build(),new Map),Rsb=class{retain(a){this.axis.retain(a);return this}expand(a){this.axis.expand(a);return this}JYa(a,b,c){this.Ke.set(a,new cob(b&&Ir.from(b),c&&Ir.from(c)));
return this}createRange(a,b){return this.JYa(a,void 0,b)}build(){return eob.create(this.axis.build(),this.Ke)}constructor(){this.Ke=new Map;this.axis=wr.wg()}},Is,Ssb;oa(!0);Is=Jr.map(fob,bob,aob,$nb);
Ssb=class extends Tr{fg(){return new Psb}wg(){return new Rsb}replace(a,b,c){return this.wg().JYa(a,b,c).build()}update(a,b,c){var d=this.wg();d.Ke.set(a,new dob(b&&Kr.from(b),c&&Kr.from(c)));return d.build()}$d(a,b){return eob.create(a,b)}isIdentity(a){return Is.isIdentity(a)}compose(a,b){return Is.compose(a,b)}transform(a,b){return Is.transform(a,b)}Ik(a){return Is.Ik(a)}Hj(a,b){return Is.Hj(a,b)}identity(a){return Is.identity(a)}apply(a,b){return Is.apply(a,b)}Yk(a,b){return Is.Yk(a,b)}Th(a,b){return Is.Th(a,
b)}equals(a){return Is.equals(a)}constructor(){super();this.YM=Osb}};Js=__c.Js=new Ssb;var Tsb=class extends Tr{$d(a){return{rows:a.rows||this.rows.wg().build(),cols:a.cols||this.cols.wg().build(),Bo:a.Bo||Js.wg().build().Ke,Gn:a.Gn||Jr.wg().build().Mj,po:a.po||Js.wg().build().Ke,Rm:a.Rm||Jr.wg().build().Mj,cells:a.cells||Mr(this.cells.$d({}),this.cols.wg().build(),this.rows.wg().build()),attrs:a.attrs||Mr(this.attrs.$d({}),this.cols.wg().build(),this.rows.wg().build())}}isIdentity(a){return this.rows.isIdentity(a.rows)&&this.cols.isIdentity(a.cols)&&Js.isIdentity(Js.$d(wr.identity(),
a.Bo))&&Jr.isIdentity(Jr.$d(wr.identity(),a.Gn))&&Js.isIdentity(Js.$d(wr.identity(),a.po))&&Jr.isIdentity(Jr.$d(wr.identity(),a.Rm))&&this.cells.isIdentity(this.cells.$d(a.cells))&&this.attrs.isIdentity(this.attrs.$d(a.attrs))}compose(a,b){const c=Lr(a.cols),d=Lr(a.rows),e=Lr(b.cols),f=Lr(b.rows),g=this.rows.compose(a.rows,b.rows),h=this.cols.compose(a.cols,b.cols),k=Js.compose(Js.$d(d,a.Bo),Js.$d(f,b.Bo)).Ke,l=Jr.compose(Jr.$d(d,a.Gn),Jr.$d(f,b.Gn)).Mj,n=Js.compose(Js.$d(c,a.po),Js.$d(e,b.po)).Ke,
p=Jr.compose(Jr.$d(c,a.Rm),Jr.$d(e,b.Rm)).Mj,q=this.cells.compose(this.cells.$d({...a.cells,x:c,y:d}),this.cells.$d({...b.cells,x:e,y:f}));a=this.attrs.compose(this.attrs.$d({...a.attrs,x:c,y:d}),this.attrs.$d({...b.attrs,x:e,y:f}));return{rows:g,cols:h,Bo:k,Gn:l,po:n,Rm:p,cells:Mr(q,h,g),attrs:Mr(a,h,g)}}transform(a,b){const c=Lr(a.cols),d=Lr(a.rows),e=Lr(b.cols),f=Lr(b.rows),[g,h]=this.rows.transform(a.rows,b.rows),[k,l]=this.cols.transform(a.cols,b.cols),[{Ke:n},{Ke:p}]=Js.transform(Js.$d(d,a.Bo),
Js.$d(f,b.Bo)),[{Mj:q},{Mj:u}]=Jr.transform(Jr.$d(d,a.Gn),Jr.$d(f,b.Gn)),[{Ke:w},{Ke:y}]=Js.transform(Js.$d(c,a.po),Js.$d(e,b.po)),[{Mj:z},{Mj:B}]=Jr.transform(Jr.$d(c,a.Rm),Jr.$d(e,b.Rm)),[D,F]=this.cells.transform(this.cells.$d({...a.cells,x:c,y:d}),this.cells.$d({...b.cells,x:e,y:f})),[H,J]=this.attrs.transform(this.attrs.$d({...a.attrs,x:c,y:d}),this.attrs.$d({...b.attrs,x:e,y:f}));a={rows:g,cols:k,Bo:n,Gn:q,po:w,Rm:z,cells:Mr(D,k,g),attrs:Mr(H,k,g)};b={rows:h,cols:l,Bo:p,Gn:u,po:y,Rm:B,cells:Mr(F,
l,h),attrs:Mr(J,l,h)};return[a,b]}Ik(a){const b=Lr(a.cols),c=Lr(a.rows),d=this.rows.Ik(a.rows),e=this.cols.Ik(a.cols),f=Js.Ik(Js.$d(c,a.Bo)).Ke,g=Jr.Ik(Jr.$d(c,a.Gn)).Mj,h=Js.Ik(Js.$d(b,a.po)).Ke,k=Jr.Ik(Jr.$d(b,a.Rm)).Mj,l=this.cells.Ik({...a.cells,x:b,y:c});a=this.attrs.Ik(this.attrs.$d({...a.attrs,x:b,y:c}));return{rows:d,cols:e,Bo:f,Gn:g,po:h,Rm:k,cells:Mr(l,e,d),attrs:Mr(a,e,d)}}Hj(a,b){return this.rows.Hj(a.rows,b.rows)&&this.cols.Hj(a.cols,b.cols)&&Js.Hj(Js.$d(wr.identity(),a.Bo),Js.$d(wr.identity(),
b.Bo))&&Jr.Hj(Jr.$d(wr.identity(),a.Gn),Jr.$d(wr.identity(),b.Gn))&&Js.Hj(Js.$d(wr.identity(),a.po),Js.$d(wr.identity(),b.po))&&Jr.Hj(Jr.$d(wr.identity(),a.Rm),Jr.$d(wr.identity(),b.Rm))&&this.cells.Hj(this.cells.$d(a.cells),this.cells.$d(b.cells))&&this.attrs.Hj(this.attrs.$d(a.attrs),this.attrs.$d(b.attrs))}identity(a){return{rows:this.rows.identity(a.rows),cols:this.cols.identity(a.cols),Bo:Js.identity(a.Bo).Ke,Gn:Jr.identity(a.Gn).Mj,po:Js.identity(a.po).Ke,Rm:Jr.identity(a.Rm).Mj,cells:this.cells.identity(a.cells),
attrs:this.attrs.identity(a.attrs)}}apply(a,b){if(this.isIdentity(b))return a;const c=Lr(b.cols),d=Lr(b.rows),e=this.rows.apply(a.rows,b.rows),f=this.cols.apply(a.cols,b.cols),g=Js.apply(a.Bo,Js.$d(d,b.Bo)),h=Jr.apply(a.Gn,Jr.$d(d,b.Gn)),k=Js.apply(a.po,Js.$d(c,b.po)),l=Jr.apply(a.Rm,Jr.$d(c,b.Rm)),n=this.cells.apply(a.cells,{...b.cells,x:c,y:d});a=this.attrs.apply(a.attrs,this.attrs.$d({...b.attrs,x:c,y:d}));return{rows:e,cols:f,Bo:g,Gn:h,po:k,Rm:l,cells:n,attrs:a}}Yk(a,b){if(this.isIdentity(b))return a;
const c=Lr(b.cols),d=Lr(b.rows),e=this.rows.Yk(a.rows,b.rows),f=this.cols.Yk(a.cols,b.cols),g=Js.Yk(a.Bo,Js.$d(d,b.Bo)),h=Jr.Yk(a.Gn,Jr.$d(d,b.Gn)),k=Js.Yk(a.po,Js.$d(c,b.po)),l=Jr.Yk(a.Rm,Jr.$d(c,b.Rm)),n=this.cells.Yk(a.cells,{...b.cells,x:c,y:d});a=this.attrs.Yk(a.attrs,this.attrs.$d({...b.attrs,x:c,y:d}));return{rows:e,cols:f,Bo:g,Gn:h,po:k,Rm:l,cells:n,attrs:a}}Th(a,b){return a===b?!0:this.rows.Th(a.rows,b.rows)&&Js.Th(a.Bo,b.Bo)&&Jr.Th(a.Gn,b.Gn)&&Js.Th(a.po,b.po)&&Jr.Th(a.Rm,b.Rm)&&this.cols.Th(a.cols,
b.cols)&&this.cells.Th(a.cells,b.cells)&&this.attrs.Th(a.attrs,b.attrs)}equals(a){return this===a?!0:a instanceof Tsb?this.rows.equals(a.rows)&&this.cols.equals(a.cols)&&this.cells.equals(a.cells)&&this.attrs.equals(a.attrs):!1}constructor(a,b,c,d){super();this.rows=a;this.cols=b;this.cells=c;this.attrs=d}};var Usb=class extends Wr{static F(a){N(a,{a5c:Pr})}get a5c(){const a=new Map;this.items.forEach((b,c)=>a.set(b,c));return a}get(a){return Nr(this,this.refs.get(a))}create(a,b){a=this.domain.replace(a,this.get(a),b);this.lq(a)}update(a,b){const c=m(Nr(this,this.refs.get(a)));a=this.domain.update(a,c,b);this.lq(a)}delete(a){const b=Nr(this,this.refs.get(a));null!=b&&(a=this.domain.replace(a,b,void 0),this.lq(a))}$R(){const a=this.domain.fg();for(const [b,c]of this.refs)a.ordinal(b,Nr(this,c));return a.build()}destroy(a){oa(this.refs.size===
a.size);for(const [b,c]of this.refs)oa(a.has(b)),oa(Nr(this,c)===a.get(b))}Ai(a){const b=this.domain.wg();for(const [c,d]of this.refs){const e=Nr(this,d),f=a.get(c);Gr(b,c,e,f)}for(const [c,d]of a)this.refs.has(c)||Gr(b,c,void 0,d);this.lq(b.build());return!0}cY(a){if(!this.domain.isIdentity(a)){var b=a.axis;if(!b.isEmpty()){var c=0;this.items.length<b.pre&&(this.items.length=b.pre);b=b.cd();for(var d=b.head;d;)0===d.type?c+=b.Jy(d.length):(d=sr(b,d.length),this.items.spliceWithArray(c,0,Array(d)),
c+=d),d=b.head}for(const [e,f]of a.Mj)switch(f.type){case 0:null!=f.oldValue?(c=m(this.refs.get(e)),a=gob(this,f.oldValue),na(c===a)):na(!this.refs.has(e));null!=f.newValue?this.refs.set(e,gob(this,f.newValue)):this.refs.delete(e);break;case 1:c=m(this.refs.get(e));a=gob(this,f.oldValue);na(c===a);this.refs.set(e,gob(this,f.newValue));break;default:throw new r(f);}}}constructor(a){super();Usb.F(this);this.domain=__c.Jr;this.items=Qr.array([],{deep:!1});this.refs=Qr.map(new Map,{deep:!1});for(const [b,
c]of a)this.refs.set(b,gob(this,c))}},Vsb=class extends Vr{My(a){return new Usb(a)}Bm(a){return a}connect(a,b){return this.Bm(a).connect(b)}kc(a){return this.Bm(a).kc()}destroy(a,b){return this.Bm(a).destroy(b)}Ai(a,b){return this.Bm(a).Ai(b)}constructor(){super(Ur,zq);this.domain=__c.Jr}},Ks=new Vsb;var Wsb=class{create(a,b){a=Hr(a);var c=this.base.get(a.start);const d=this.base.get(a.end);if(null==c&&null==d){c=this.base;b=new Map([[a.start,b.start],[a.end,b.end]]);a=c.domain.wg();for(const [e,f]of b)Gr(a,e,c.get(e),f);c.lq(a.build())}}get(a){var b=Hr(a);a=this.base.get(b.start);b=this.base.get(b.end);if(null!=a&&null!=b)return{start:a,end:Math.max(a,b)}}delete(a){var b=Hr(a);a=this.base;var c=new Set([b.start,b.end]);b=a.domain.wg();for(const d of c)c=a.get(d),null!=c&&Gr(b,d,c);a.lq(b.build())}constructor(a){this.base=
a}},Xsb=Ks.map(fob,bob,aob,$nb,a=>new Wsb(a),a=>a.base),Ysb=class extends Tob{My(a){a=Ks.My($nb(a));return new Wsb(a)}connect(a,b){return Xsb.connect(a,b)}kc(a){return Xsb.kc(a)}destroy(a,b){return Xsb.destroy(a,b)}Ai(a,b){return Xsb.Ai(a,b)}constructor(){super();this.domain=__c.Js}},Ls=new Ysb;var ctb,atb,btb,Zsb,$sb;
ctb=class extends Wr{$R(){return{rows:this.rKb.kc(this.rows),cols:this.Tsb.kc(this.cols),Bo:Ls.kc(this.Bo.Ke),Gn:Ks.kc(this.Gn.Mj),po:Ls.kc(this.po.Ke),Rm:Ks.kc(this.Rm.Mj),cells:this.gsb.kc(this.cells.grid),attrs:this.Bqb.kc(this.attrs.grid)}}destroy(a){Dq(this.rKb,a.rows,this.tqd,this.rows);Dq(this.Tsb,a.cols,this.jqd,this.cols);Dq(Ls,a.Bo,this.Gxc,this.Bo.Ke);Dq(Ks,a.Gn,this.Fxc,this.Gn.Mj);Dq(Ls,a.po,this.Cxc,this.po.Ke);Dq(Ks,a.Rm,this.Bxc,this.Rm.Mj);Dq(this.gsb,a.cells,this.mOb,this.cells.grid);
Dq(this.Bqb,a.attrs,this.lOb,this.attrs.grid)}Ai(a){return this.rKb.Ai(this.rows,a.rows)&&this.Tsb.Ai(this.cols,a.cols)&&Ls.Ai(this.Bo.Ke,a.Bo)&&Ks.Ai(this.Gn.Mj,a.Gn)&&Ls.Ai(this.po.Ke,a.po)&&Ks.Ai(this.Rm.Mj,a.Rm)&&this.gsb.Ai(this.cells.grid,a.cells)&&this.Bqb.Ai(this.attrs.grid,a.attrs)}cY(a){const b=Lr(a.rows),c=Lr(a.cols);this.tqd.next(a.rows);this.jqd.next(a.cols);this.Gxc.next(Js.$d(b,a.Bo));this.Fxc.next(Jr.$d(b,a.Gn));this.Cxc.next(Js.$d(c,a.po));this.Bxc.next(Jr.$d(c,a.Rm));this.mOb.next(this.domain.cells.$d({...a.cells,
y:b,x:c}));this.lOb.next(this.domain.attrs.$d({...a.attrs,y:b,x:c}))}constructor(a,b,c,d,e,f){super();this.rKb=a;this.Tsb=b;this.gsb=c;this.Bqb=d;this.domain=e;this.o5=g=>this.rows.has(g)?this.rows.qL(g):void 0;this.j2=g=>this.cols.has(g)?this.cols.qL(g):void 0;this.kUa=g=>this.rows.get(g);this.jUa=g=>this.cols.get(g);this.sbe=Bq(this,g=>{const h=Lr(g);wr.isIdentity(h)||(this.mOb.next(this.domain.cells.$d({y:h})),this.lOb.next(this.domain.attrs.$d({y:h})),this.Fxc.next(Jr.$d(h,new Map)),this.Gxc.next(Js.$d(h,
new Map)));return this.domain.$d({rows:g})});a=Cq(this.rKb,f.rows,this.sbe);this.rows=a.mutable;this.tqd=a.Uw;this.nbe=Bq(this,g=>{const h=Lr(g);wr.isIdentity(h)||(this.mOb.next(this.domain.cells.$d({x:h})),this.lOb.next(this.domain.attrs.$d({x:h})),this.Bxc.next(Jr.$d(h,new Map)),this.Cxc.next(Js.$d(h,new Map)));return this.domain.$d({cols:g})});a=Cq(this.Tsb,f.cols,this.nbe);this.cols=a.mutable;this.jqd=a.Uw;this.qbe=Bq(this,g=>{na(wr.isIdentity(g.axis));return this.domain.$d({Gn:g.Mj})});a=Cq(Ks,
f.Gn,this.qbe);this.Gn=new Zsb(a.mutable,this.o5,this.kUa);this.Fxc=a.Uw;this.rbe=Bq(this,g=>{na(wr.isIdentity(g.axis));return this.domain.$d({Bo:g.Ke})});a=Cq(Ls,f.Bo,this.rbe);this.Bo=new $sb(a.mutable,this.o5,this.kUa);this.Gxc=a.Uw;this.lbe=Bq(this,g=>{na(wr.isIdentity(g.axis));return this.domain.$d({Rm:g.Mj})});a=Cq(Ks,f.Rm,this.lbe);this.Rm=new Zsb(a.mutable,this.j2,this.jUa);this.Bxc=a.Uw;this.mbe=Bq(this,g=>{na(wr.isIdentity(g.axis));return this.domain.$d({po:g.Ke})});a=Cq(Ls,f.po,this.mbe);
this.po=new $sb(a.mutable,this.j2,this.jUa);this.Cxc=a.Uw;this.kbe=Bq(this,g=>{na(wr.isIdentity(g.x));na(wr.isIdentity(g.y));return this.domain.$d({cells:g})});a=Cq(this.gsb,f.cells,this.kbe);this.cells=new atb(a.mutable,this.o5,this.j2,this.kUa,this.jUa);this.mOb=a.Uw;this.ibe=Bq(this,g=>{na(wr.isIdentity(g.x));na(wr.isIdentity(g.y));return this.domain.$d({attrs:g})});f=Cq(this.Bqb,f.attrs,this.ibe);this.attrs=new btb(f.mutable,this.o5,this.j2);this.lOb=f.Uw}};
atb=class{get(a,b){a=this.o5(a);b=this.j2(b);if(null!=a&&null!=b&&(b=this.grid.get(a,b),null!=b))return{span:{Qg:m(hob(this,b.span)),Gg:m(iob(this,b.span)),zk:m(job(this,b.span)),Ij:m(kob(this,b.span))},ref:b.ref}}forEach(a){this.grid.forEach((b,c)=>{const d=hob(this,c),e=iob(this,c);null!=d&&null!=e&&a(b,{Qg:d,Gg:e,zk:m(job(this,c)),Ij:m(kob(this,c))})})}map(a){const b=[];this.forEach((c,d)=>b.push(a(c,d)));return b}set(a,b){this.grid.set(lob(this,a),b);return m(this.get(a.Qg,a.Gg))}delete(a){this.grid.delete(lob(this,
a))}constructor(a,b,c,d,e){this.grid=a;this.o5=b;this.j2=c;this.kUa=d;this.jUa=e}};btb=class{get(a,b,c){b=this.o5(b);c=this.j2(c);if(null!=b&&null!=c)return this.grid.get(a,b,c)}set(a,b,c){const d=this.o5(b.Qg),e=this.j2(b.Gg),f=this.o5(b.zk||b.Qg);b=this.j2(b.Ij||b.Gg);null!=d&&null!=e&&null!=f&&null!=b&&this.grid.set(a,{COe:d,pOe:e,Cwb:f,y7d:b},c)}constructor(a,b,c){this.grid=a;this.o5=b;this.j2=c}};
Zsb=class{get(a){a=this.Mj.get(a);if(null!=a)for(;0<=a;a--){const b=this.uAb(a);if(b)return b}}create(a,b){b=m(this.HCb(b));this.Mj.create(a,b)}delete(a){this.Mj.delete(a)}constructor(a,b,c){this.Mj=a;this.HCb=b;this.uAb=c}};
$sb=class{get(a){a=this.Ke.get(a);if(null!=a){var b;a:{for(b=a.start;b<=a.end;b++){var c=this.uAb(b);if(c){b=c;break a}}b=void 0}a:{for(c=a.end;c>=a.start;c--){const d=this.uAb(c);if(d){a=d;break a}}a=void 0}if(null!=b&&null!=a)return{start:b,end:a}}}create(a,b){const c=m(this.HCb(b.start));b=m(this.HCb(b.end));this.Ke.create(a,{start:c,end:b})}delete(a){this.Ke.delete(a)}constructor(a,b,c){this.Ke=a;this.HCb=b;this.uAb=c}};
__c.gtb=class extends Vr{My(a){return new ctb(this.rows,this.cols,this.cells,this.attrs,this.domain,a)}Bm(a){return a}connect(a,b){return this.Bm(a).connect(b)}kc(a){return this.Bm(a).kc()}destroy(a,b){this.Bm(a).destroy(b)}Ai(a,b){return this.Bm(a).Ai(b)}constructor(a){var b=dtb,c=etb,d=__c.ftb;super(Ur,Ur);this.rows=b;this.cols=c;this.cells=a;this.attrs=d;this.domain=new Tsb(b.domain,c.domain,a.domain,d.domain)}};__c.gtb.prototype.MA=ea(113);var htb=Hq({tf:Gq($r)}),itb=Jq(/^([A-Z]+|[1-9]\d*)$/),jtb=Jq(/^([A-Z]+:[A-Z]+|[1-9]\d*:[1-9]\d*)$/),ktb=Hq({type:Fq("single-row"),Pga:Zr,Hga:itb}),ltb=Hq({type:Fq("single-column"),JCa:Zr,Hga:itb}),mtb=Hq({type:Fq("range-row"),gib:Zr,Hga:jtb}),ntb=Hq({type:Fq("range-column"),w5a:Zr,Hga:jtb}),otb,ptb,qtb,rtb,stb,ttb,utb,xtb,ytb,ztb,Atb,Btb,Ctb,Etb,Gtb,Htb,Itb,Jtb,Ktb,Ltb,Mtb,Ntb,Otb,Ptb,Qtb,Rtb,Stb,Ttb,Utb,Vtb,Wtb,Xtb,Ytb,Ztb,aub,bub,cub,eub,fub,gub,iub,jub,dtb,etb,kub,lub,mub,nub,oub,pub,qub,rub,sub,
tub,uub,zub,Aub,Bub,Cub,Dub,Eub,Fub;Gq(__c.Iq({"single-row":ktb,"single-column":ltb,"range-row":mtb,"range-column":ntb},a=>a.type));otb=Hq({type:Fq("canonical"),mCa:Zr});ptb=Hq({type:Fq("invalid"),eJb:Zr});qtb=Rq(Hq({type:Fq("formula"),value:__c.Iq({canonical:otb,invalid:ptb},a=>a.type)}));rtb=Rq(Hq({type:Fq("boolean"),value:Yr}));stb=Math.pow(2,-1022);ttb=Rq(Hq({type:Fq("number"),value:Eq(a=>Number.isFinite(a)&&(Math.abs(a)>=stb||Object.is(a,0)))}));utb=Rq(Hq({type:Fq("plaintext"),value:Zr}));
__c.vtb=Sq({attributes:{D7:Pq(yrb)},Xb:{fill:__c.As}});__c.wtb=Uq(__c.vtb);xtb=Sq({values:{type:Fq("media")},Xb:{value:__c.wtb}});ytb=Uq(Rq(Krb));ztb=Sq({values:{type:Fq("mention")},Xb:{value:ytb}});Atb=Hq({embed:Lrb});Btb=Uq(Rq(Atb));Ctb=Sq({values:{type:Fq("embed")},Xb:{value:Btb}});__c.Dtb=new __c.ws;Etb=Sq({values:{type:Fq("text2")},attributes:{fd:Nq(htb)},Xb:{value:__c.Dtb}});__c.Ftb=new __c.ws;Gtb=Sq({values:{type:Fq("text3")},Xb:{value:__c.Ftb}});
Htb={formula:qtb,boolean:rtb,number:ttb,plaintext:utb,media:xtb,mention:ztb,embed:Ctb};Itb=hr(Htb,a=>a.type,a=>a.type);Jtb=hr({...Htb,text2:Etb},a=>a.type,a=>a.type);Ktb=hr({...Htb,text3:Gtb},a=>a.type,a=>a.type);Ltb=hr({...Htb,text2:Etb},a=>a.type,a=>a.type);Mtb=Hq({type:Fq("plain"),format:Zr});Ntb=Hq({type:Fq("currency"),format:Zr});Otb=Hq({type:Fq("percentage"),format:Zr});Ptb=Hq({type:Fq("date"),format:Zr});Qtb=__c.Iq({plain:Mtb,currency:Ntb,percentage:Otb,date:Ptb},a=>a.type);
Rtb=Rq(Hq({type:Fq("plain_number"),Tk:Mtb}));Stb=Rq(Hq({type:Fq("currency"),Tk:Ntb}));Ttb=Rq(Hq({type:Fq("percentage"),Tk:Otb}));Utb=Rq(Hq({type:Fq("date"),Tk:Ptb}));Vtb=Sq({attributes:{label:__c.fs},Xb:{fill:__c.As}});Wtb=Uq(Vtb);Xtb=Sq({values:{type:Fq("select")},attributes:{Tk:Pq(Qtb)},Xb:{options:Wtb}});Ytb=Rq(Hq({type:Fq("mention")}));Ztb=Rq(Hq({type:Fq("embed")}));__c.$tb=hr({plain_number:Rtb,currency:Stb,percentage:Ttb,date:Utb,select:Xtb,mention:Ytb,embed:Ztb},a=>a.type,a=>a.type);
aub=a=>Sq({attributes:{wl:__c.ks},Xb:{content:Oq(Mq(a)),bd:Oq(Mq(__c.$tb))}});bub=aub(Itb);cub={static:{fontFamily:Cs.fontFamily,fontSize:Cs.fontSize,fontWeight:Cs.fontWeight,fontStyle:Cs.fontStyle,LS:Cs.LS,verticalAlign:Cs.verticalAlign,color:Cs.color,vn:Cs.vn,oz:Cs.oz,link:Cs.link,letterSpacing:Cs.letterSpacing,lineHeight:Cs.lineHeight,direction:Cs.direction,eB:Cs.eB,nL:Cs.nL},pRa:{},ju:{}};__c.dub=__c.mnb(cub);
eub={Bca:pr("block",jq(Aob,Sr),"inherit"),Aca:pr("block",jq(Aob,Sr),"inherit"),Dca:pr("block",jq(Aob,Sr),"inherit"),Cca:pr("block",jq(Aob,Sr),"inherit"),jsa:pr("block",jq(Rr,Sr),"inherit"),isa:pr("block",jq(Rr,Sr),"inherit"),lsa:pr("block",jq(Rr,Sr),"inherit"),ksa:pr("block",jq(Rr,Sr),"inherit"),hrb:pr("block",jq(Cob,Sr),"inherit"),grb:pr("block",jq(Cob,Sr),"inherit"),jrb:pr("block",jq(Cob,Sr),"inherit"),irb:pr("block",jq(Cob,Sr),"inherit")};fub=["auto",...$rb];
gub={static:{...cub.static,Kca:pr("block",jq(Rr,/^transparent$/),"#ffffff"),...eub,textAlign:qr("block",fub),YB:qr("block",["overflow","wrap","clip"]),$k:qr("block",["middle","start","end"])},pRa:{},ju:{}};__c.Fs=__c.mnb(gub);__c.ftb=new rsb;__c.hub=__c.ftb.domain.YM();iub=Sq({values:{id:Zr},attributes:{height:lpb,minHeight:__c.js}});jub=Sq({values:{id:Zr},attributes:{width:lpb}});Uq(iub);Uq(jub);dtb=new __c.umb(iub,Flb(iub.Wpa));etb=new __c.umb(jub,Flb(jub.Wpa));kub=Sq({values:{Pga:Zr,JCa:Zr,Z2d:Yr}});
lub=__c.Qq(kub);mub=Sq({values:{type:Fq("replace")},attributes:{Cj:Nq(Trb),gib:__c.fs,w5a:__c.fs}});nub=hr({replace:mub},a=>a.type,a=>a.type);oub=Uq(nub);pub=aub(Jtb);qub=aub(Ktb);rub=aub(Ltb);sub=new Isb(pub);tub=new Isb(qub);uub=new Isb(rub);__c.vub=(new Isb(bub)).domain.YM();__c.wub=new __c.gtb(sub);__c.xub=new __c.gtb(tub);__c.yub=new __c.gtb(uub);zub=Sq({attributes:{Isa:__c.ls,dZa:__c.ls}});Aub=Sq({Xb:{freeze:zub}});
Bub=a=>Sq({Xb:{Iq:a,KA:lub,uq:__c.Bs,view:Aub,jta:oub},attributes:{direction:Nq(Fq("ltr","rtl")),FE:gs}});Cub=Bub(__c.wub);Dub=Bub(__c.xub);Eub=Bub(__c.yub);__c.Gub=Cub.map(a=>a,a=>a,a=>a,a=>a,a=>new Fub(a),a=>a.base);__c.Iub=Dub.map(a=>a,a=>a,a=>a,a=>a,a=>new Fub(a),a=>a.base);__c.Jub=Eub.map(a=>a,a=>a,a=>a,a=>a,a=>new Fub(a),a=>a.base);
Fub=class{static F(a){N(a,{width:Pr,i0b:Pr,xrc:Pr})}get width(){return this.base.Iq.cols.reduce((a,b)=>a+b.width,0)}set width(a){oa(0<a);a/=this.width;for(const b of this.base.Iq.cols)b.width*=a}get height(){return this.base.Iq.rows.reduce((a,b)=>a+b.height,0)}set height(a){oa(0<a);a/=this.height;for(const b of this.base.Iq.rows)b.height*=a,b.minHeight=b.height}get cols(){return this.base.Iq.cols}get i0b(){const a=new Map;for(const b of this.cols)a.set(b.id,b);return a}get rows(){return this.base.Iq.rows}get xrc(){const a=
new Map;for(const b of this.rows)a.set(b.id,b);return a}get KA(){return this.base.KA}get jta(){return this.base.jta}get direction(){return this.base.direction}set direction(a){this.base.direction=a}get uq(){return this.base.uq}get FE(){return this.base.FE}set FE(a){this.base.FE=a}get view(){return this.base.view}constructor(a){Fub.F(this);this.base=a;this.layout=this.base.Iq;this.jpa=sob(b=>this.rows.has(b)?(b=this.rows.En(b))?this.jpa(b)+1:0:-1);this.Nja=sob(b=>this.cols.has(b)?(b=this.cols.En(b))?
this.Nja(b)+1:0:-1);this.xc=sob(b=>this.cols.has(b)?(b=this.cols.En(b))?this.xc(b)+b.width:0:0);this.Ec=sob(b=>this.rows.has(b)?(b=this.rows.En(b))?this.Ec(b)+b.height:0:0)}};
}).call(self, self._5880d4398c473aa67256e87589eaef11);}

}])
//# sourceMappingURL=sourcemaps/63037fe801e44dee.js.map